<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-06-09 금 21:39 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>testsc - 동적 시험 라이브러리</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="styles/pygments.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">testsc - 동적 시험 라이브러리</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgfe61227">1. 기본 사항</a>
<ul>
<li><a href="#orgd124115">1.1. 무엇을 하는 것인가?</a></li>
<li><a href="#org5229f87">1.2. 장점</a>
<ul>
<li><a href="#org9f9f418">1.2.1. 테스트 데이터 조합 가능</a></li>
<li><a href="#orgfea7a7f">1.2.2. 다수의 테스트케이스 생성</a></li>
<li><a href="#org62687c5">1.2.3. 테스트 데이터 재활용</a></li>
</ul>
</li>
<li><a href="#org53c1092">1.3. 단점</a></li>
</ul>
</li>
<li><a href="#org690ba2e">2. 사용방법 </a>
<ul>
<li><a href="#orgb1bcac9">2.1. 테스트케이스 생성</a></li>
<li><a href="#org68e9ca3">2.2. <b>testsc</b> 초기화</a>
<ul>
<li><a href="#orgad53d14">2.2.1. testsc 헤더파일 추가 </a></li>
<li><a href="#orgca91931">2.2.2. 사용자 코드 작성 </a></li>
<li><a href="#org6cc3a91">2.2.3. 호출전 코드 및 stub 코드 작성 </a></li>
</ul>
</li>
<li><a href="#orga36db2c">2.3. scheme 파일 작성 </a></li>
<li><a href="#org841b603">2.4. CodeScroll 테스트 케이스 빌드 및 커버리지 평가</a>
<ul>
<li><a href="#orgcc26275">2.4.1. 포함 파일 추가</a></li>
<li><a href="#orgd2da5cf">2.4.2. 링크 라이브러리 추가</a></li>
<li><a href="#org3ff84dc">2.4.3. 빌드 및 테스트 케이스를 실행한다.</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb46674d">3. scheme 파일 작성 </a>
<ul>
<li><a href="#org98046e8">3.1. scheme 파일 작성</a>
<ul>
<li><a href="#org503b60b">3.1.1. 함수내의 모든 분기문을 확인한다.</a></li>
<li><a href="#org05c7840">3.1.2. 식별한 항목이 가져야 하는 값을 확인한다.</a></li>
<li><a href="#orgcabbf12">3.1.3. 테스트 변수를 확인한다.</a></li>
<li><a href="#orga71ec6c">3.1.4. scheme 파일을 작성한다.</a></li>
</ul>
</li>
<li><a href="#org12ad1a2">3.2. scheme 파일 디버깅</a>
<ul>
<li><a href="#orga15945a">3.2.1. 출력 파일 확인</a></li>
<li><a href="#org4d4115e">3.2.2. scheme 실행</a></li>
</ul>
</li>
<li><a href="#orgaec6a96">3.3. 예제</a>
<ul>
<li><a href="#org4947508">3.3.1. example1 - 파라미터 조합</a></li>
<li><a href="#org492bda9">3.3.2. 예제 2 - enum 변수 확인</a></li>
<li><a href="#org0a1abe7">3.3.3. 예제 3 - filter check</a></li>
<li><a href="#org9b088b5">3.3.4. 예제 4 - 구조체 예제</a></li>
<li><a href="#orga0f445d">3.3.5. 예제 5 - stub 활용</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgac5d92b">4. testsc 구조체  </a>
<ul>
<li><a href="#org6f342e1">4.1. 구조체 테스트 데이터 생성</a></li>
<li><a href="#orgc86191b">4.2. 빌드 방법</a></li>
</ul>
</li>
<li><a href="#org220b332">5. Best Practice</a>
<ul>
<li><a href="#org203ac4a">5.1. 비관리 코드 활용</a>
<ul>
<li><a href="#org9b43665">5.1.1. 일괄 비관리 코드 전환</a></li>
<li><a href="#org29079f1">5.1.2. unittest 내부의 c 파일 편집</a></li>
</ul>
</li>
<li><a href="#orga03e6a7">5.2. CodeScroll 의 테스트데이터와 같이 사용</a></li>
<li><a href="#orgbfe80d2">5.3. testsc 확장 모듈</a>
<ul>
<li><a href="#orge468e29">5.3.1. 구조체 테스트 데이터 생성</a></li>
<li><a href="#org4a0f4db">5.3.2. 테스트 데이터를 파일에서 가져오게 한다.</a></li>
<li><a href="#org14f8fe7">5.3.3. 테스트 데이터를 프로그래밍 할 수 있게 한다.</a></li>
<li><a href="#org5ea1998">5.3.4. 라이브러리를 활용한다.</a></li>
</ul>
</li>
<li><a href="#org2442ca8">5.4. 정의 파일 활용</a>
<ul>
<li><a href="#orge89afcd">5.4.1. enum 타입 및 공통 상수 값 정의</a></li>
</ul>
</li>
<li><a href="#org4b19967">5.5. testsc 수정시</a></li>
<li><a href="#org9be485d">5.6. 표준 출력 redirection</a></li>
<li><a href="#org2d5bca2">5.7. 디버깅 </a></li>
</ul>
</li>
<li><a href="#org25b4805">6. Reference </a>
<ul>
<li><a href="#orge4e2a5c">6.1. C API - </a>
<ul>
<li><a href="#orgcd95837">6.1.1. testsc.cpp</a></li>
<li><a href="#org22cc7dd">6.1.2. testsc_ext.cpp</a></li>
</ul>
</li>
<li><a href="#org709d257">6.2. scheme API - </a>
<ul>
<li><a href="#org5f03e64">6.2.1. util.scm</a></li>
<li><a href="#org02052d9">6.2.2. testsc.c</a></li>
</ul>
</li>
<li><a href="#orgd71d9e3">6.3. 추가 C excention 구현</a>
<ul>
<li><a href="#orgfc37d47">6.3.1. 구조체 테스트 데이터 생성</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orgb133bf7">7. scheme 문법 </a>
<ul>
<li><a href="#org075be0d">7.1. scheme 파일 에디터</a></li>
<li><a href="#orgaedf455">7.2. 15분 만에 scheme 배우기</a></li>
</ul>
</li>
<li><a href="#org4b28dc4">8. 용어</a>
<ul>
<li><a href="#org2403aeb">8.1. 테스트케이스 </a></li>
<li><a href="#org09636c5">8.2. scheme 파일 </a></li>
<li><a href="#org11d965f">8.3. testsc 홈 </a></li>
<li><a href="#orgebef132">8.4. 테스트 변수 </a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-orgfe61227" class="outline-2">
<h2 id="orgfe61227"><span class="section-number-2">1</span> 기본 사항</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-orgd124115" class="outline-3">
<h3 id="orgd124115"><span class="section-number-3">1.1</span> 무엇을 하는 것인가?</h3>
<div class="outline-text-3" id="text-1-1">
<p>
동적 시험시 필요한 <a href="#org905da14">테스트 변수</a>를 파일로 부터 읽어 오는 라이브러리이다. 파일의
형식은 scheme 스트립트이다. 간단한 데이터의 정의 뿐만 아니라 프로그래밍을
통한 데이터의 생성이 가능하다.   
</p>


<div class="figure">
<p><img src="concept.png" alt="concept.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org5229f87" class="outline-3">
<h3 id="org5229f87"><span class="section-number-3">1.2</span> 장점</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-org9f9f418" class="outline-4">
<h4 id="org9f9f418"><span class="section-number-4">1.2.1</span> 테스트 데이터 조합 가능</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
<a href="#org905da14">테스트 변수</a>의 범위를 이용하여 데이터 조합을 생성할 수 이다. 가령 인자로
3개의 enum 타입을 사용하는 함수의 경우 각 파라미터가 가지는 값들의 범위를
이용하여 존재가능한 모든 파라미터 데이터 조합을 생성할 수 있다. 
</p>
</div>
</div>
<div id="outline-container-orgfea7a7f" class="outline-4">
<h4 id="orgfea7a7f"><span class="section-number-4">1.2.2</span> 다수의 테스트케이스 생성</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
테스트 데이터가 많을 경우 CodeScroll 이 제공하는 UI 를 통하여 데이터를
입력하기가 불편하다. 프로그래밍을 통하여 다수의 데이터도 간편하게 생성이
가능한다.  
</p>
</div>
</div>
<div id="outline-container-org62687c5" class="outline-4">
<h4 id="org62687c5"><span class="section-number-4">1.2.3</span> 테스트 데이터 재활용</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Codescroll 에서 같은 <a href="#orgc36c849">scheme 파일</a>을 읽어 오도록 설정하면 테스트 데이터를
재활용할 수 있다. 구조가 같은 함수가 다수 있을 때 사용하면 편리하다. 
라이브러리 구성이 간단하여 리눅스 타겟환경 테스트를 수행할 때도
정적라이브러리 링크를 통하여 사용할 수 있다. 
</p>
</div>
</div>
</div>
<div id="outline-container-org53c1092" class="outline-3">
<h3 id="org53c1092"><span class="section-number-3">1.3</span> 단점</h3>
<div class="outline-text-3" id="text-1-3">
<p>
scheme 언어에 대하여 지식이 있어야 사용 가능하다. 
<a href="#orgbf40595">scheme 문법 참조</a>
</p>
</div>
</div>
</div>
<div id="outline-container-org690ba2e" class="outline-2">
<h2 id="org690ba2e"><span class="section-number-2">2</span> 사용방법 <a id="orge37954e"></a></h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgb1bcac9" class="outline-3">
<h3 id="orgb1bcac9"><span class="section-number-3">2.1</span> 테스트케이스 생성</h3>
<div class="outline-text-3" id="text-2-1">
<p>
기존 방식 대로 CodeScroll 메뉴얼을 참고하여 테스트케이스를 생성한다. 
</p>
</div>
</div>
<div id="outline-container-org68e9ca3" class="outline-3">
<h3 id="org68e9ca3"><span class="section-number-3">2.2</span> <b>testsc</b> 초기화</h3>
<div class="outline-text-3" id="text-2-2">
<p>
다음에 나오는 C/Scheme 함수의 상세 내용은 <a href="#orgaa4e4a9">6</a> 을 참조한다. 
</p>
</div>
<div id="outline-container-orgad53d14" class="outline-4">
<h4 id="orgad53d14"><span class="section-number-4">2.2.1</span> testsc 헤더파일 추가 <a id="orgd87d745"></a></h4>
<div class="outline-text-4" id="text-2-2-1">
<p>
<b>유닛테스트</b> 더블클릭 &gt;&gt;  <b>테스트 정보</b> &gt;&gt; <b>테스트 전역 코드</b>
</p>

<p>
<b>testsc.h</b> 파일을 포함하도록 한다. 
</p>
<div class="org-src-container">

<pre class="src src-cpp"><span class="cp">#include &quot;testsc.h&quot;</span></pre>
</div>


<div class="figure">
<p><img src="file:///u:/orgdir/testsc/testglobalcode.png" alt="testglobalcode.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-orgca91931" class="outline-4">
<h4 id="orgca91931"><span class="section-number-4">2.2.2</span> 사용자 코드 작성 <a id="orgb14404e"></a></h4>
<div class="outline-text-4" id="text-2-2-2">
<ul class="org-ul">
<li><p>
<b>유닛테스트</b> 더블클릭 &gt;&gt;  <b>테스트 정보</b> &gt;&gt; <b>사용자 코드</b>
테스트스크립트를 로딩하는 부분으로써 다음과 같이 호출한다. 
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span class="n">testsc_init</span><span class="p">(</span><span class="n">CS_TESTCASENO</span><span class="p">(),</span> <span class="s">&quot;(testsc-require mb/t-9)&quot;</span><span class="p">,</span> <span class="s">&quot;/testsc/home/&quot;</span><span class="p">);</span></pre>
</div>

<p>
<a href="#orgd044b42">No description for this link</a> 를 호출하여 <b>testsc</b> 를 초기화 한다. 첫번째 파라미터는
CS_TESTCASENO()으로써 <b>testsc</b> 으로 테스트번호를 전달한다. 두번째
파라미터는 실행할 scheme 명령이다. 마지막 파라미터는 <a href="#orgcfddd3b">testsc 홈</a>경로가 된다. 
</p>

<ul class="org-ul">
<li>참조 : <a href="#orgd044b42">No description for this link</a> , <a href="#org531382a">No description for this link</a> , <a href="#org10d12be">No description for this link</a></li>
</ul></li>
</ul>



<div class="figure">
<p><img src="file:///u:/orgdir/testsc/usercode.png" alt="usercode.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org6cc3a91" class="outline-4">
<h4 id="org6cc3a91"><span class="section-number-4">2.2.3</span> 호출전 코드 및 stub 코드 작성 <a id="org45a9243"></a></h4>
<div class="outline-text-4" id="text-2-2-3">
</div><ul class="org-ul"><li><a id="org597b782"></a>호출 전 코드<br /><div class="outline-text-5" id="text-org597b782">
<ul class="org-ul">
<li><p>
<b>유닛테스트</b> 더블클릭 &gt;&gt;  <b>테스트 정보</b> &gt;&gt; <b>테스트 대상 함수</b> &gt;&gt; <b>호출 전 코드</b>
</p>

<p>
테스트스크립트에서 읽은 값을 codescroll <a href="#org905da14">테스트 변수</a>에 설정한다. 
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span class="n">iValue1</span>    <span class="o">=</span> <span class="n">testsc_ivalue</span><span class="p">(</span><span class="s">&quot;value1&quot;</span><span class="p">)</span> <span class="p">;</span> 
<span class="n">dValue2</span>    <span class="o">=</span> <span class="n">testsc_dvalue</span><span class="p">(</span><span class="s">&quot;value2&quot;</span><span class="p">)</span> <span class="p">;</span> 
<span class="n">strValue3</span>  <span class="o">=</span> <span class="n">testsc_strvalue</span><span class="p">(</span><span class="s">&quot;value3&quot;</span><span class="p">)</span> <span class="p">;</span>
<span class="n">pValue4</span>    <span class="o">=</span> <span class="p">(</span><span class="kt">track_t</span><span class="o">*</span><span class="p">)</span><span class="n">testsc_ext_get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span> </pre>
</div></li>
</ul>
</div></li>

<li><a id="org831b78d"></a>stub 코드 작성<br /><div class="outline-text-5" id="text-org831b78d">
<p>
CodeScroll은  stub 의 동작을 제어하기 위한 변수는 생성을 하지 아니한다.
<a href="#orgc36c849">scheme 파일</a>에서 stub을 제어할 변수를 설정하고 stub 구현부에서 <a href="#org2494854">testsc C API</a>
관련 함수를 이용하여 <a href="#org905da14">테스트 변수</a>값을 가져와 사용할 수 있다. 
테스트전역 코드에 <b>testsc.h</b> 파일이 포함되어 있기 때문에 별도의 선언 없이
<a href="#org2494854">testsc C API</a> 관련 함수를 사용할 수 있다.  
</p>
</div></li></ul>
</div>
</div>

<div id="outline-container-orga36db2c" class="outline-3">
<h3 id="orga36db2c"><span class="section-number-3">2.3</span> <a href="#orgc36c849">scheme 파일</a> 작성 <a id="orgcc01cad"></a></h3>
<div class="outline-text-3" id="text-2-3">
<p>
앞서 지정한 testsc 홈 폴더에 <a href="#orgc36c849">scheme 파일</a>을 다음과 같은 순서로 작성한다. 
</p>

<ol class="org-ol">
<li><p>
필요할 경우 <a href="#orgc36c849">scheme 파일</a>에서 공통 정의파일을 포함한다. 테스트 대상에서
정의한 enum 타입 및 define 된 값을 <a href="#orgc36c849">scheme 파일</a>에서 사용할 수 있다. 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">testsc-require</span> <span class="nv">icmsdefine</span><span class="p">)</span></pre>
</div></li>

<li><p>
<a href="#org905da14">테스트 변수</a>를 선언 한다. <a id="org46a17c5"></a>
scheme 의 define 을 이용하여 변수를 선언한다. 
CodeScroll이 정의한 변수인 경우 편리를 위해 같은 이름으로 정의한다.
CodeScroll이 정의하지 아니한 변수라도 <a href="#orgc36c849">scheme 파일</a> 에서 정의하여 사용할 수
있으며, stub 등을 작성할 때 관련 변수를 사용할 수 있다. 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="k">define </span><span class="nv">value1</span> <span class="nv">TRACK_IDENTITY_FRIEND</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">value2</span> <span class="mf">32.1234</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">value3</span> <span class="s">&quot;testsctring&quot;</span> <span class="p">)</span></pre>
</div>

<ul class="org-ul">
<li><a href="#orgbd9d3ab">testsc 구조체</a>
테스트에 사용되는 구조체의 경우 CodeScroll 에서 <a href="#org905da14">테스트 변수</a>를 이용하여
구조체 필드의 값을 설정한다. 대부분의 경우 변수를 이용하여 충분히 설정을
할 수 있으나, 특이한 경우 변수만으로는 설정이 어려울 수 있다. <b>testsc</b>
는 <a href="#orgbd9d3ab">testsc 구조체</a> 를 이용하여 구조체 테스트 데이터를 생성할 수 있다.
상세한 내용은 <a href="#orgbd9d3ab">testsc 구조체</a>부분 참조.</li>
</ul></li>

<li><p>
<a href="#orgb0d3b88">scheme 파일 작성</a>부분을 참조하여 <b>TESTCASENO</b> 에 따라  <a href="#org905da14">테스트 변수</a>를
설정한다. 
</p>

<p>
상세한 내용은 <a href="#orgb0d3b88">scheme 파일 작성</a> 및 <a href="#orgbd9d3ab">testsc 구조체</a>부분을 참조한다
</p></li>

<li><p>
scheme.exe 를 실행하여 <a href="#orgc36c849">scheme 파일</a>의 문법 오류를 확인한다. 
</p>

<p>
<a href="#org01f6975">No description for this link</a> 를 이용하여 작성한 <a href="#orgc36c849">scheme 파일</a>을 실행한다. 
다음은 TESTCASENO 를 1로 설정하고 <a href="#orgcfddd3b">testsc 홈</a> 폴더 아래 track/t-1.scm 파일을
실행한다. 문법 오류가 있을 경우 오류가 있는 라인번호를 출력한다. 
정상적으로 실행이 된 후 <a href="#org905da14">테스트 변수</a>를 입력하면 실행한 파일에 의해 설정된
값을 확인할 수 있다. 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">testsc-init</span> <span class="mi">1</span> <span class="nv">track/t-1</span> <span class="p">)</span></pre>
</div></li>
</ol>
</div>
</div>

<div id="outline-container-org841b603" class="outline-3">
<h3 id="org841b603"><span class="section-number-3">2.4</span> CodeScroll <a href="#org12715a3">테스트 케이스</a> 빌드 및 커버리지 평가</h3>
<div class="outline-text-3" id="text-2-4">
</div><div id="outline-container-orgcc26275" class="outline-4">
<h4 id="orgcc26275"><span class="section-number-4">2.4.1</span> 포함 파일 추가</h4>
<div class="outline-text-4" id="text-2-4-1">
<p>
<a href="#orgcfddd3b">testsc 홈</a> 을 포함 디렉토리에 추가한다. 
</p>
</div>
</div>
<div id="outline-container-orgd2da5cf" class="outline-4">
<h4 id="orgd2da5cf"><span class="section-number-4">2.4.2</span> 링크 라이브러리 추가</h4>
<div class="outline-text-4" id="text-2-4-2">
<p>
<a href="#orgcfddd3b">testsc 홈</a> 을 링크 디렉토리에 추가한다. 
링크할 라이브러리를 추가한다. 
</p>
<blockquote>
<p>
-L/testsc -ltestsc
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org3ff84dc" class="outline-4">
<h4 id="org3ff84dc"><span class="section-number-4">2.4.3</span> 빌드 및 <a href="#org12715a3">테스트 케이스</a>를 실행한다.</h4>
<div class="outline-text-4" id="text-2-4-3">
<p>
실행결과로 생성되는 커버리지를 참조하여 추가가 필요한 <a href="#org905da14">테스트 변수</a>값을
<a href="#orgc36c849">scheme 파일</a>에 설정한다.  CodeScroll 의 사용자 인터페이스를 통하여 값을
설정하는 것 보다 빠르게 커버리지를 올릴 수 있다.  
다음 파일은 <a href="#org12715a3">테스트케이스</a>가 실행하면서 출력하는 것을 저장하는 파일이다. 
</p>

<ul class="org-ul">
<li>testsc-stderr.txt : <a href="#orgcfddd3b">testsc 홈</a> 폴더 아래 위치한다. <a href="#org12715a3">테스트케이스</a>가
실행하면서 출력하는 표준에러 출력을 저장한다.</li>

<li>testsc-stdout.txt : <a href="#orgcfddd3b">testsc 홈</a> 폴더 아래 위치한다. <a href="#org12715a3">테스트케이스</a>가
실행하면서 출력하는 표준출력 및 <a href="#orgb5e7701">No description for this link</a> 출력을 저장한다.</li>
</ul>
</div>
</div>
</div>
</div>

<div id="outline-container-orgb46674d" class="outline-2">
<h2 id="orgb46674d"><span class="section-number-2">3</span> <a href="#orgc36c849">scheme 파일</a> 작성 <a id="orgb0d3b88"></a></h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-org98046e8" class="outline-3">
<h3 id="org98046e8"><span class="section-number-3">3.1</span> scheme 파일 작성</h3>
<div class="outline-text-3" id="text-3-1">
</div><div id="outline-container-org503b60b" class="outline-4">
<h4 id="org503b60b"><span class="section-number-4">3.1.1</span> 함수내의 모든 분기문을 확인한다.</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
if, switch 등의 분기문에서 사용하는 변수, 구조체 필드, 함수 리턴값 등을
식별한다. &amp;&amp;(and) , ||(or) 로 조건이 중첩 되어 있는 경우 로직 연산자의 좌·우
(operand)를 각각 따로 식별 한다. 
</p>

<p>
CodeScroll은 테스트케이스를 생성할 때 이 항목들을 테스트입력값이나 Stub 으로
대부분 식별한다. 
</p>


<div class="org-src-container">

<pre class="src src-cpp"><span class="kt">void</span> <span class="nf">check_track</span><span class="p">(</span><span class="kt">track_data_t</span><span class="o">*</span> <span class="n">track</span><span class="p">,</span> <span class="kt">int</span> <span class="n">value</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">is_online</span><span class="p">()</span> <span class="o">==</span> <span class="nb">true</span> <span class="p">){</span> <span class="c1">//→ is_online() 리턴값</span>

    <span class="k">switch</span><span class="p">(</span><span class="n">track</span><span class="o">-&gt;</span><span class="n">link_state</span><span class="p">){</span>  <span class="c1">//→ track-&gt;link_state</span>
    <span class="k">case</span> <span class="nl">link_received</span> <span class="p">:</span>
      <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">3000</span> <span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="n">track</span><span class="o">-&gt;</span><span class="n">x_position</span> <span class="o">&gt;</span> <span class="mi">10000</span><span class="p">)</span> <span class="p">){</span><span class="c1">//→ value, track-&gt;x_position</span>
	<span class="p">....</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="k">if</span><span class="p">(</span> <span class="p">(</span> <span class="n">value</span> <span class="o">&lt;</span> <span class="mi">700</span> <span class="p">)</span> <span class="o">||</span> <span class="p">(</span><span class="n">track</span><span class="o">-&gt;</span><span class="n">x_position</span> <span class="o">&lt;</span> <span class="mi">5000</span> <span class="p">)</span> <span class="p">){</span><span class="c1">//→ value, track-&gt;x_position</span>
	<span class="p">....</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
	<span class="p">....</span>
      <span class="p">}</span>
      <span class="k">break</span> <span class="p">;</span> 

    <span class="k">case</span> <span class="nl">link_transmitted</span> <span class="p">:</span>
      <span class="k">break</span> <span class="p">;</span> 
    <span class="k">case</span> <span class="nl">not_link_involved</span> <span class="p">:</span>
      <span class="k">break</span> <span class="p">;</span> 
    <span class="k">default</span> <span class="o">:</span>
      <span class="k">break</span> <span class="p">;</span> 
  <span class="p">}</span>

<span class="p">}</span></pre>
</div>
</div>
</div>

<div id="outline-container-org05c7840" class="outline-4">
<h4 id="org05c7840"><span class="section-number-4">3.1.2</span> 식별한 항목이 가져야 하는 값을 확인한다.</h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
항목별로 조건들을 나열한 후 이로 부터 테스트 데이터(값의 범위)를 생성한다.
조건으로 평가 되는 경우 true/false 가 되는 값들이며 switch의 경우
case/default의 모든 항목 값 이다. 값의 범위 (&gt;, &lt;) 로 평가하는 경우 구간별로
데이터를 포함한다. 
</p>

<ul class="org-ul">
<li>항목별 조건 나열</li>
</ul>
<div class="INFO">
<p>
is_online 리턴 값    ⇰ is_online() == true 
value                ⇰ value &gt; 3000 ,  value &lt; 700 
track-&gt;x_position    ⇰ track-&gt;x_position &gt; 10000 , track-&gt;x_position &lt; 5000 
track-&gt;link_state    ⇰ switch(track-&gt;link_state)
</p>

</div>

<ul class="org-ul">
<li>항목별 테스트 데이터 생성</li>
</ul>

<div class="INFO">
<p>

</p>

<p>
is_online 리턴 값    ⇰ (1 0 )
value                ⇰ (4000 2000 100 )  범위 구간 마다 데이트데이터 생성
track-&gt;x_position    ⇰ (11000 7000 3000) 범위 구간 마다 데이트데이터 생성
track-&gt;link_state    ⇰ (link_received link_transmitted not_link_involved)
</p>

</div>
</div>
</div>

<div id="outline-container-orgcabbf12" class="outline-4">
<h4 id="orgcabbf12"><span class="section-number-4">3.1.3</span> 테스트 변수를 확인한다.</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
앞의 두 단계에서 확인한 값들에 대하여 변수를 정의한다. scheme 파일에서
테스트 데이터를 정의하는데 사용한다.
</p>

<p>
대부분 CodeScroll 이 생성하는 테스트 입력값과 같으나, CodeScroll 이 생성을 
하지 아니한 경우에도 변수를 지정해 줄 수 있다. 이렇게 지정한 변수는 Stub
등을 구현하는데 사용할 수 있다.
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="k">define </span><span class="nv">value1</span> <span class="mi">10</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">value2</span> <span class="mf">3.1415926378</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">value3</span> <span class="s">&quot;string 테스트 데이터&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">anset</span> <span class="mi">0</span> <span class="p">)</span> </pre>
</div>
</div>
</div>

<div id="outline-container-orga71ec6c" class="outline-4">
<h4 id="orga71ec6c"><span class="section-number-4">3.1.4</span> scheme 파일을 작성한다.</h4>
<div class="outline-text-4" id="text-3-1-4">
<p>
<a href="#org8608d8a">No description for this link</a> 함수를 이용하여 모든 테스트 데이터 조합을 생성한다. 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">combi</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">4000</span> <span class="mi">2000</span> <span class="mi">100</span> <span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">11000</span> <span class="mi">7000</span> <span class="mi">3000</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">link_received</span> <span class="nv">link_transmitted</span> <span class="nv">not_link_involved</span><span class="p">)</span> <span class="p">)</span></pre>
</div>


<p>
조합한 데이터를 테스트변수에 할당한다. 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="k">define </span><span class="nv">is_online</span> <span class="mi">0</span> <span class="p">)</span> <span class="c1">;;테스트 정의 </span>
<span class="p">(</span><span class="k">define </span><span class="nv">value</span>     <span class="mi">0</span> <span class="p">)</span> <span class="c1">;;테스트 정의</span>
<span class="p">(</span><span class="nf">anset</span>  <span class="mi">0</span> 
<span class="ss">&#39;track</span><span class="o">.</span><span class="nv">link_state</span> <span class="mi">0</span>
<span class="ss">&#39;track</span><span class="o">.</span><span class="nv">x_position</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">;;테스트 admin 값 생성( id=0 )</span>


<span class="p">(</span><span class="nf">feio</span>
  <span class="mi">1</span>
  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">is_online</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">1</span> <span class="nv">x</span> <span class="p">))</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">value</span>     <span class="p">(</span><span class="nf">nth</span> <span class="mi">2</span> <span class="nv">x</span> <span class="p">))</span>
    <span class="p">(</span><span class="nf">anset</span> <span class="mi">0</span>
	   <span class="ss">&#39;track</span><span class="o">.</span><span class="nv">x_position</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">3</span> <span class="nv">x</span> <span class="p">)</span>
	   <span class="ss">&#39;track</span><span class="o">.</span><span class="nv">link_state</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">4</span> <span class="nv">x</span> <span class="p">)))</span>
   <span class="p">(</span><span class="nf">combi</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">0</span> <span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">4000</span> <span class="mi">2000</span> <span class="mi">100</span> <span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">11000</span> <span class="mi">7000</span> <span class="mi">3000</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">link_received</span> <span class="nv">link_transmitted</span> <span class="nv">not_link_involved</span><span class="p">)</span> <span class="p">))</span>
<span class="c1">;;         ↑ is_online range</span>
<span class="c1">;;                 ↑ value range</span>
<span class="c1">;;                                    ↑ track.x_position range</span>
<span class="c1">;;                                                      ↑ track.link_state range </span></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org12ad1a2" class="outline-3">
<h3 id="org12ad1a2"><span class="section-number-3">3.2</span> scheme 파일 디버깅</h3>
<div class="outline-text-3" id="text-3-2">
<p>
값이 예상과 다르거나 스크립트 로딩에 오류가 있는 것 같을 때 수행 
</p>
</div>
<div id="outline-container-orga15945a" class="outline-4">
<h4 id="orga15945a"><span class="section-number-4">3.2.1</span> 출력 파일 확인</h4>
</div>
<div id="outline-container-org4d4115e" class="outline-4">
<h4 id="org4d4115e"><span class="section-number-4">3.2.2</span> scheme 실행</h4>
<div class="outline-text-4" id="text-3-2-2">
<p>
<b>testsc</b> 홈 플더의 scheme.exe 를 실행한다. 
<a href="#org7f5331c">No description for this link</a> 를 이용하여 디버깅 하고자 하는 테스트 번호를 설정한다. 
(testsc-require ac/t-1 ) 를 이용하여 테스트 스크립트를 로딩한다. 
</p>

<p>
확인하고자 하는 값을 입력하면 값이 출력됨 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">testsc-set-testnum</span> <span class="mi">8</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">testsc-require</span> <span class="nv">ac/t-1</span> <span class="p">)</span>
<span class="nv">ts&gt;</span> <span class="nv">mas</span>
<span class="mi">100</span>
<span class="nv">ts&gt;</span> <span class="nv">testsc</span>
<span class="mi">1</span></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgaec6a96" class="outline-3">
<h3 id="orgaec6a96"><span class="section-number-3">3.3</span> 예제</h3>
<div class="outline-text-3" id="text-3-3">
<p>
아래의 예제는 배포파일에 포함되어 있는 CodeScroll 워크스페이스를 열어서
확인할 수 있다. 
</p>

<p>
<b>파일 &gt;&gt; 워크스페이스 바꾸기</b> 메뉴를 이용하여 예제가 있는 워크스페이스로 전환한다. 
</p>


<div class="figure">
<p><a href="chworksspace.PNG"><img src="file:///c:/testsc/doc/chworksspace.PNG" alt="chworksspace.PNG" /></a>
</p>
</div>
</div>

<div id="outline-container-org4947508" class="outline-4">
<h4 id="org4947508"><span class="section-number-4">3.3.1</span> example1 - 파라미터 조합</h4>
<div class="outline-text-4" id="text-3-3-1">
</div><ul class="org-ul"><li><a id="org17ce929"></a>테스트 대상<br /><div class="outline-text-5" id="text-org17ce929">
<p>
<code>/testsc/share/srcexample/example1.cpp</code> 에 대상 함수가 있다. 
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span class="kt">int</span> <span class="n">example1</span><span class="o">::</span><span class="n">get_sec_surf_ampl</span><span class="p">(</span><span class="k">const</span> <span class="n">primary_surface_id_ampl_e</span> <span class="n">priampl</span> <span class="p">,</span> 
				<span class="k">const</span> <span class="n">secondary_surface_id_ampl_e</span> <span class="n">secampl</span> <span class="p">)</span>
<span class="p">{</span>
  <span class="k">switch</span><span class="p">(</span><span class="n">priampl</span><span class="p">){</span>
  <span class="k">case</span> <span class="nl">pri_surf_ampl_no_statement</span>     <span class="p">:</span> <span class="k">return</span> <span class="n">SURPA_NO_STATEMENT</span> <span class="p">;</span> <span class="c1">// 세부정보 없음</span>
  <span class="k">case</span> <span class="nl">pri_surf_ampl_line</span>             <span class="p">:</span>      <span class="c1">//해군전단</span>
  <span class="k">case</span> <span class="nl">pri_surf_ampl_combatant</span>        <span class="p">:</span> <span class="c1">//함정</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">secampl</span><span class="p">){</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_no_statement</span>   <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_NO_STATEMENT</span><span class="p">;</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_carrier</span>        <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_CARRIER</span><span class="p">;</span> <span class="c1">// 1</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_destroyer</span>      <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_DESTROYER</span><span class="p">;</span> <span class="c1">// 4</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_cruiser</span>        <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_CRUISER</span><span class="p">;</span> <span class="c1">// 3</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_frigate</span>        <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_FRIGATE</span><span class="p">;</span> <span class="c1">// 5</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_battleship</span>     <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_BATTLESHIP</span><span class="p">;</span> <span class="c1">// 2</span>
    <span class="k">default</span> <span class="o">:</span> <span class="k">break</span> <span class="p">;</span>
    <span class="p">}</span>
    <span class="c1">// 다음은 실행되지 않습니다. </span>
    <span class="k">break</span> <span class="p">;</span> 

  <span class="k">case</span> <span class="nl">pri_surf_ampl_patrol_vessel</span>    <span class="p">:</span>  <span class="c1">// 초계함</span>
    <span class="c1">// 다음은 맵핑되지 않습니다. </span>
    <span class="c1">//enum ESurPatrolSecondaryAmp {</span>
    <span class="c1">//  return SURSA_FAST_PATROL          // 3</span>
    <span class="c1">//};</span>
    <span class="k">switch</span><span class="p">(</span><span class="n">secampl</span><span class="p">){</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_ASW</span>            <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_ASW_PATROL</span><span class="p">;</span> <span class="c1">// 1</span>
    <span class="k">case</span> <span class="nl">sec_surf_ampl_ASUW</span>           <span class="p">:</span><span class="k">return</span> <span class="n">SURSA_SURFACE_PATROL</span><span class="p">;</span> <span class="c1">// 2</span>
    <span class="k">default</span> <span class="o">:</span> <span class="k">break</span> <span class="p">;</span>
      <span class="p">......</span></pre>
</div>
</div>

<ul class="org-ul"><li><a id="org8fa8bdd"></a>함수의 입력 파라미터<br /><div class="outline-text-6" id="text-org8fa8bdd">
<p>
함수 입력으로 사용하는 두 enum 타입의 모든 조합을 <a href="#org905da14">테스트 변수</a> 로 생성하면
100% 커버리지를 달성할 수 있다. 
</p>

<p>
관련 enum 타입은 <code>/testsc/share/srcexample/example1.h</code> 에 정의 되어 있다. 
</p>

<p>
<b>primary_surface_id_ampl_e</b> 8개 값, <b>secondary_surface_id_ampl_e</b> 30개
값으로 해서 240개의 조합이 존재한다. 
</p>
</div></li></ul></li>

<li><a id="org6a14d2a"></a>사용자 코드<br /><div class="outline-text-5" id="text-org6a14d2a">
<p>
<b>테스트 정보</b> &gt;&gt; <b>사용자 코드</b> 에서 다음 사항을 확인한다. 
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span class="n">testsc_init</span><span class="p">(</span><span class="n">CS_TESTCASENO</span><span class="p">(),</span> <span class="s">&quot;(testsc-require ex/t-1)&quot;</span><span class="p">,</span>  <span class="s">&quot;/testsc/home&quot;</span><span class="p">)</span> <span class="p">;</span> 

<span class="n">printf</span><span class="p">(</span><span class="s">&quot;printf</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span> <span class="p">;</span> 
<span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="o">&lt;&lt;</span><span class="s">&quot;cout test&quot;</span><span class="o">&lt;&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">endl</span> <span class="p">;</span> </pre>
</div>

<p>
<a href="#orgcfddd3b">testsc 홈</a> 아래 ex/t-1.scm 파일을 호출 하는 부분이다. 
</p>
</div></li>

<li><a id="orgabe4444"></a>호출 전 코드<br /><ul class="org-ul"><li><a id="org1814c68"></a>호출 전 코드 내용<br /><div class="outline-text-6" id="text-org1814c68">
<p>
<b>테스트 정보</b> &gt;&gt; <b>테스트 대상 함수</b> &lt;&lt; <b>호출 전 코드</b> 부분에서 CodeScroll
이 생성한 <a href="#org905da14">테스트 변수</a>의 값을 <b>testsc</b> 에서 값을 가져 오도록 한다. 
</p>

<div class="org-src-container">

<pre class="src src-c++">priampl = (enum primary_surface_id_ampl_e)testsc_ivalue(&quot;priampl&quot;);
secampl = (enum secondary_surface_id_ampl_e)testsc_ivalue(&quot;secampl&quot;);</pre>
</div>
</div></li>

<li><a id="orgc5faa8b"></a>테스트 코드<br /><div class="outline-text-6" id="text-orgc5faa8b">
<p>
<b>테스트 코드</b> 에서 변경된 내용을 확인 하면 다음과 같다. 
</p>

<p>
CodeScroll 의 <a href="#org12715a3">테스트케이스</a>에 추가적으로 <b>testsc</b> 를 사용하려면 호출전
부분을 CS_TESTCASENO() 가 특정값 이상 일 때만 실행되도록 <b>if</b> 문을 사용할
수 있다. 
</p>
<div class="org-src-container">

<pre class="src src-cpp"><span class="cm">/*Input*/</span>
<span class="n">priampl</span> <span class="o">=</span> <span class="p">(</span><span class="k">enum</span> <span class="n">primary_surface_id_ampl_e</span><span class="p">)</span><span class="n">CS_INT_INPUT</span><span class="p">(</span><span class="k">enum</span> <span class="n">primary_surface_id_ampl_e</span><span class="p">,</span><span class="s">&quot;priampl&quot;</span><span class="p">);</span>
<span class="n">secampl</span> <span class="o">=</span> <span class="p">(</span><span class="k">enum</span> <span class="n">secondary_surface_id_ampl_e</span><span class="p">)</span><span class="n">CS_INT_INPUT</span><span class="p">(</span><span class="k">enum</span> <span class="n">secondary_surface_id_ampl_e</span><span class="p">,</span><span class="s">&quot;secampl&quot;</span><span class="p">);</span>


<span class="cp">#line 1 &quot;cs_test%example1_get_sec_surf_ampl_test0%BEFORE_CALL_CODE_KEY_get_sec_surf_ampl28983194&quot;</span>
<span class="n">priampl</span> <span class="o">=</span> <span class="p">(</span><span class="k">enum</span> <span class="n">primary_surface_id_ampl_e</span><span class="p">)</span><span class="n">testsc_ivalue</span><span class="p">(</span><span class="s">&quot;priampl&quot;</span><span class="p">);</span>
<span class="n">secampl</span> <span class="o">=</span> <span class="p">(</span><span class="k">enum</span> <span class="n">secondary_surface_id_ampl_e</span><span class="p">)</span><span class="n">testsc_ivalue</span><span class="p">(</span><span class="s">&quot;secampl&quot;</span><span class="p">);</span>
<span class="cp">#line 40 &quot;cs_test%example1_get_sec_surf_ampl_test0%cs_error&quot;</span></pre>
</div>
</div></li></ul></li>

<li><a id="org191c54a"></a><a href="#orgc36c849">scheme 파일</a><br /><div class="outline-text-5" id="text-org191c54a">
<p>
/testsc/home/ex/t-1.scm 파일 의 내용
</p>

<ul class="org-ul">
<li>C 코드에서 사용하는 enum 값이나 <code>#define</code> 된 상수값을 정의 하여 사용할 수
있다. 식별자의 실제 값을 찾기 위해 코드를 검색할 필요 없이 <a href="#org12715a3">테스트케이스</a>를
생성할 수 있다.</li>

<li><a href="#org3225d01">No description for this link</a>은 생성한 조합의 값을 첫번째 파라미터 이후의 테스트케이스에
대하여 순서대로 lambda 함수에 전달한다</li>

<li>을 통하여 priampl,
secampl 각각 0~7, 0~29 의 조합을 생성한다.</li>

<li>추가적인 <a href="#org905da14">테스트 변수</a> 값이 필요할 경우 scheme-case 문을 사용하여 지정할 수
있다.</li>
</ul>

<div class="org-src-container">

<pre class="src src-scheme"><span class="c1">;;; 상수 정의 - 공통파일을 만들으 테스트간에 공유할 수 있다. </span>
<span class="p">(</span><span class="k">define </span>  <span class="nv">pri_surf_ampl_amphibious</span>                 <span class="mi">4</span> <span class="p">)</span>
<span class="p">(</span><span class="k">define </span>  <span class="nv">sec_surf_ampl_frigate</span>                    <span class="mi">11</span> <span class="p">)</span>
<span class="p">(</span><span class="k">define </span>  <span class="nv">sec_surf_ampl_landing_ship</span>               <span class="mi">12</span> <span class="p">)</span>


<span class="c1">;;; 테스트변수 </span>
<span class="p">(</span><span class="k">define </span><span class="nv">priampl</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">secampl</span> <span class="mi">0</span><span class="p">)</span>

<span class="p">(</span><span class="nf">foreach-tnum</span>
 <span class="mi">1</span>                                      <span class="c1">; testcase 시작값</span>
 <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span>                            <span class="c1">; testcase 번호에서 testcase 시작값을 뺀 번째 조합 값을 파라미터로 전달한다. </span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">priampl</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">0</span> <span class="nv">x</span><span class="p">))</span>             <span class="c1">; 조합값의 첫번째 값은 priampl</span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">secampl</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">1</span> <span class="nv">x</span><span class="p">)))</span>            <span class="c1">; 조함값의 두번째 값은 secampl</span>
 <span class="p">(</span><span class="nf">combi</span> <span class="p">(</span><span class="nf">num-list</span> <span class="mi">0</span> <span class="mi">8</span><span class="p">)</span> <span class="p">(</span><span class="nf">num-list</span> <span class="mi">0</span> <span class="mi">30</span><span class="p">)))</span>

<span class="c1">;;; combi (num-list 0 8 ) (num-list 0 30 ) </span>
<span class="c1">;;; -&gt; ((0 0 ) (0 1 ) (0 2 )... (0 29) (1 0 ) (1 1 ) ...)</span>
<span class="c1">;;;     ↑ testcase 시작 값과 같은 경우 lambda 함수로 전달</span>
<span class="c1">;;;            ↑ testcase 시작 값보다 1 클 경우 lambda 함수로 전달</span>

<span class="p">(</span><span class="k">case </span><span class="p">(</span><span class="nf">testsc-get-testnum</span><span class="p">)</span>              <span class="c1">; C 의 switch 문에 해당 - testcase 번호</span>
  <span class="p">((</span><span class="mi">241</span><span class="p">)</span>                                <span class="c1">; C 의 case 문에 해당 - testcase 번호가 241 일 경우  </span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">secampl</span> <span class="mi">-1</span><span class="p">)</span>                    <span class="c1">; 테스트변수 secampl 을 -1 로 설정한다.</span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">priampl</span> <span class="mi">-1</span><span class="p">))</span>                   <span class="c1">; 테스트변수 priampl 을 -1 로 설정한다.</span>
  <span class="p">((</span><span class="mi">242</span> <span class="mi">243</span><span class="p">)</span>                            <span class="c1">; 테스트번호 나열이 가능하다. </span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">priampl</span> <span class="nv">pri_surf_ampl_amphibious</span><span class="p">)</span>      <span class="c1">; define 으로 정의된 상수값을 사용할 수 있다. </span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">secampl</span> <span class="nv">sec_surf_ampl_landing_ship</span><span class="p">)))</span>  <span class="c1">; define 으로 정의된 상수값을 사용할 수 있다. </span></pre>
</div>
</div></li>

<li><a id="orgc327190"></a>실행<br /><div class="outline-text-5" id="text-orgc327190">
<p>
<a href="#org12715a3">테스트케이스</a>실행을 하여 커버리지 100% 가 되는 것을 확인 한다. 
</p>

<p>
<a href="#orgcfddd3b">testsc 홈</a> 아래 testsc-stdout.txt 파일을 열어 보면 다음과 같은 로그를 확인
할 수 있다. 
</p>

<blockquote>
<p>
testsc-require /testsc/home/util.scm
testsc-require /testsc/home/testsc.scm
testsc-require /testsc/home/testsc-ext.scm
testsc-require /testsc/home/ex/t-1.scm
foreach-tnum next testnum is  241             → t-1.scm 에 있는 foreach-tnum  다음의 테스트번호가 241임을 알려줌 
testsc initalize done                         → testsc_init 함수가 끝나는 시점
printf                                        → 테스트코드(사용자코드) 표준출력 redirection 
cout test                                     → 테스트코드(사용자코드) 표준출력 redirection 
testsc_ivalue priampl is 7                    → 테스트코드(호출전 코드)에서 testsc_ivalue 의 값
testsc_ivalue secampl is 1                    → 테스트코드(호출전 코드)에서 testsc_ivalue 의 값
</p>
</blockquote>


<p>
ex/t-1.scm 파일에서 ')'괄호를 하나 추가 하고 실행하면 다음과 같은 에러 로그를
확인할 수 있다. 
</p>

<blockquote>
<p>
Error: (/testsc/home//ex/t-1.scm : 44) syntax error: illegal token 
</p>
</blockquote>

<p>
여는 괄호'(', 닫는 괄호')' 쌍을 scheme 에서는 sexp 라고 지칭한다. sexp 를
처리하는 과정에서 에러가 발생하면 에러가 발생한다. 여는 괄호가 아직 끝나지
아니한 경우는 에러검출이 아니될 수도 있다. 이럴 경우 <a href="#org455b8ae">디버깅</a> 을 통해서
문제가 있는 부분을 확인 할 수 있다. 디버깅 방법은 <a href="#org455b8ae">디버깅</a> 참조 
</p>
</div></li></ul>
</div>

<div id="outline-container-org492bda9" class="outline-4">
<h4 id="org492bda9"><span class="section-number-4">3.3.2</span> 예제 2 - enum 변수 확인</h4>
</div>
<div id="outline-container-org0a1abe7" class="outline-4">
<h4 id="org0a1abe7"><span class="section-number-4">3.3.3</span> 예제 3 - filter check</h4>
</div>
<div id="outline-container-org9b088b5" class="outline-4">
<h4 id="org9b088b5"><span class="section-number-4">3.3.4</span> 예제 4 - 구조체 예제</h4>
</div>
<div id="outline-container-orga0f445d" class="outline-4">
<h4 id="orga0f445d"><span class="section-number-4">3.3.5</span> 예제 5 - stub 활용</h4>
</div>
</div>
</div>
<div id="outline-container-orgac5d92b" class="outline-2">
<h2 id="orgac5d92b"><span class="section-number-2">4</span> testsc 구조체  <a id="orgbd9d3ab"></a></h2>
<div class="outline-text-2" id="text-4">
<p>
<a href="#orgc36c849">scheme 파일</a>을 통하여 구조체를 정의할 수 있다. <a href="#org905da14">테스트 변수</a>를 사용하여 구조체
필드를 각각 설정하기 어려운 경우 사용한다. 사용되는 구조체의 필드가 다수일 경우,
스텁함수에서 구조체에 대한 포인터를 리턴하는 경우, 사용되는 구조체가 다수인
경우 등이 해당한다. 
</p>

<p>
추가적인 C 구현이 필요하기 때문에 
데이터가 필요할 경우 사용한다. 추가적으로 C 함수를 구현해야 하는데, 구조체의
필드별로 테스트변수를 만들어서 설정하는방식과 비교하여 한번 구현해 두면 유리할 경우 추가 구현하여 사용한다. 
</p>

<p>
C 함수 추가
  구현이 필요한 부분으로써 관련 구조체가 빈번히 사용될 경우 구현을 하면 
</p>

<p>
C 구현이
  필요하기 때문에 내부에서 자주 사용하는 구조체에 대하여 구현을 사고 
</p>


<p>
GFE 로 부터 받는 메시지등을 구현하는데 사용할 수 있다. 
</p>

<p>
<a href="#org905da14">테스트 변수</a>를 활용해서 구조체의 필드에 값을 설정할 수 있다. 대부분의 경우
</p>

<p>
<a href="#orgbd9d3ab">testsc 구조체</a>는 테스트에 사용되는 구조체 생성을 위해 <b>testsc</b> 가
내부적으로 사용하는 구조체를 의미한다. 
</p>

<p>
다음은 식별자 0 으로 _track.TMSIndex 필드 값이 0 _track.identity 가 FRIEND
구조체를 생성한다.  
</p>

<p>
<a href="#orgbd9d3ab">testsc 구조체</a>에 대한 상세한 내용은 <a href="#orgbd9d3ab">testsc 구조체</a>부분 참조 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">testsc-stset</span> <span class="mi">0</span> 
		<span class="ss">&#39;_track</span><span class="o">.</span><span class="nv">TMSIndex</span> <span class="mi">10</span>
		<span class="ss">&#39;_track</span><span class="o">.</span><span class="nv">identit</span>  <span class="nv">FRIEND</span> <span class="p">)</span></pre>
</div>
</div>

<div id="outline-container-org6f342e1" class="outline-3">
<h3 id="org6f342e1"><span class="section-number-3">4.1</span> 구조체 테스트 데이터 생성</h3>
<div class="outline-text-3" id="text-4-1">
<p>
확장 모듈을 이용하여 구조체 테스트 데이터를 생성할 수 있다. 
<a href="#org30d4ea7">No description for this link</a> 을 이용하여 scheme 파일에서 생성한 구조체를 가져 온다. 
</p>
</div>
</div>

<div id="outline-container-orgc86191b" class="outline-3">
<h3 id="orgc86191b"><span class="section-number-3">4.2</span> 빌드 방법</h3>
<div class="outline-text-3" id="text-4-2">
<p>
build.bat 파일을 이용하여 빌드를 수행한다. 
</p>

<p>
scheme.exe 파일을 생성하기 위해서는 -DSTANDALONE=1 을 컴파일러로 전달해야 한다. 
</p>

<p>
libtestsc.a 파일을 생성하기 위해서는 -DSTANDALONE=0 을 컴파일러로 전달해야 한다.  
</p>
</div>
</div>
</div>

<div id="outline-container-org220b332" class="outline-2">
<h2 id="org220b332"><span class="section-number-2">5</span> Best Practice</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-org203ac4a" class="outline-3">
<h3 id="org203ac4a"><span class="section-number-3">5.1</span> 비관리 코드 활용</h3>
<div class="outline-text-3" id="text-5-1">
<p>
<a href="#org12715a3">테스트케이스</a>생성후 바로 비관리로 전환하며 직접 입력할 수 도 있다. 
</p>

<p>
비관리로 전환을 하였을 경우 테스트케이스 파일을 직접 편집할 수 있다. 비관리
코드로 전환하면 CodeScroll 없이 작업을 할 수 있어 라이센스를 절약할 수 있다. 
</p>


<p>
CodeScroll 테스트케이스 생성 및 일괄 빌드 후 비관리 코드 전환을 수행하고
테스트를 CodeScroll 없이 테스트를 편집할 수 있다. 결과적으로 CodeScroll
라이센스를 절약할 수 있다.  
</p>
</div>
<div id="outline-container-org9b43665" class="outline-4">
<h4 id="org9b43665"><span class="section-number-4">5.1.1</span> 일괄 비관리 코드 전환</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
CodeScroll 를 종료한 상태에서 프로젝트폴더내의 <b>.csp</b> 파일을 찾은 후
sqlite3 실행 파일을 이용하여 다음과 같이 수행한다. 
</p>

<p>
수행시 해당 .cpp 파일의 모든 함수가 비관리 코드로 전환 된다. 
</p>

<div class="org-src-container">

<pre class="src src-shell">.\sqlite3 c:\codescroll\testsc1\.csdata\testsfile.csp &lt; unmanage.sql</pre>
</div>


<p>
다음은 unmanage.sql 의 내용이다. 
</p>

<div class="org-src-container">

<pre class="src src-sql"><span class="k">update</span> <span class="n">UtTest</span> <span class="k">set</span> <span class="n">isManaged</span> <span class="o">=</span> <span class="mi">0</span> <span class="p">;</span> </pre>
</div>
</div>
</div>

<div id="outline-container-org29079f1" class="outline-4">
<h4 id="org29079f1"><span class="section-number-4">5.1.2</span> unittest 내부의 c 파일 편집</h4>
<div class="outline-text-4" id="text-5-1-2">
<p>
비관리 코드 전환이 되었을 때만 직접 편집을 하여야 한다. 안된 상태서
편집하는 경우 관련 사항을 읽어버릴 수 있다. 
</p>
<ul class="org-ul">
<li>USER_CODE_GLOBAL_KEY 부분을 찾아서 <a href="#orgd87d745">관련 헤더파일 include</a> 부분을 직접 편집한다.</li>
<li>User code start 부분을 찾아서 <a href="#orgb14404e">사용자 코드 작성</a> 부분을 직접 편집한다.</li>
<li>테스트 대상 함수 호출 전에 <a href="#org45a9243">호출전 코드 및 stub 코드 작성</a> 부분을 직접 편집한다.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orga03e6a7" class="outline-3">
<h3 id="orga03e6a7"><span class="section-number-3">5.2</span> CodeScroll 의 테스트데이터와 같이 사용</h3>
<div class="outline-text-3" id="text-5-2">
<p>
<b>CS_TESTCASENO()</b> 를 이용하여 관련 부분이 실행이 아니되게 할 수 있다. 다음과
같이 실행하며 10 보다 큰 테스트케이스에 대해서만 <a href="#orgc36c849">scheme 파일</a>로 부터 값을 읽어
온다.  
</p>

<div class="org-src-container">

<pre class="src src-cpp"><span class="k">if</span><span class="p">(</span><span class="n">CS_TESTCASENO</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">){</span>
  <span class="n">iValue1</span>    <span class="o">=</span> <span class="n">testsc_ivalue</span><span class="p">(</span><span class="s">&quot;value1&quot;</span><span class="p">)</span> <span class="p">;</span> 
  <span class="n">dValue2</span>    <span class="o">=</span> <span class="n">testsc_dvalue</span><span class="p">(</span><span class="s">&quot;value2&quot;</span><span class="p">)</span> <span class="p">;</span> 
  <span class="n">strValue3</span>  <span class="o">=</span> <span class="n">testsc_strvalue</span><span class="p">(</span><span class="s">&quot;value3&quot;</span><span class="p">)</span> <span class="p">;</span>
  <span class="n">pValue4</span>    <span class="o">=</span> <span class="p">(</span><span class="kt">track_t</span><span class="o">*</span><span class="p">)</span><span class="n">testsc_ext_get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">;</span> 
<span class="p">}</span></pre>
</div>
</div>
</div>

<div id="outline-container-orgbfe80d2" class="outline-3">
<h3 id="orgbfe80d2"><span class="section-number-3">5.3</span> testsc 확장 모듈</h3>
<div class="outline-text-3" id="text-5-3">
<p>
C 를 이용하여 확장 할 수 있다. C 확장을 불필요하게 생성하는 것을 지양하고
최대한 scheme 파일을 활용할 수 있도록 한다. 구조체에 대한 확장 정도만 구현을
하여도 충분하다. 
</p>
</div>

<div id="outline-container-orge468e29" class="outline-4">
<h4 id="orge468e29"><span class="section-number-4">5.3.1</span> 구조체 테스트 데이터 생성</h4>
<div class="outline-text-4" id="text-5-3-1">
<p>
확장 모듈을 이용하여 구조체 테스트 데이터를 생성할 수 있다. 
<a href="#org30d4ea7">No description for this link</a> 을 이용하여 scheme 파일에서 생성한 구조체를 가져 온다. 
</p>
</div>
</div>

<div id="outline-container-org4a0f4db" class="outline-4">
<h4 id="org4a0f4db"><span class="section-number-4">5.3.2</span> 테스트 데이터를 파일에서 가져오게 한다.</h4>
<div class="outline-text-4" id="text-5-3-2">
</div><ul class="org-ul"><li><a id="org3cfc2e7"></a>컴파일 없이 테스트 수행을 할 수 있다.<br /></li></ul>
</div>
<div id="outline-container-org14f8fe7" class="outline-4">
<h4 id="org14f8fe7"><span class="section-number-4">5.3.3</span> 테스트 데이터를 프로그래밍 할 수 있게 한다.</h4>
<div class="outline-text-4" id="text-5-3-3">
<p>
테스트 데이터에 대한 프로그래밍을 통하여 커버리지를 높일 수 있는 데이터를
생성할 수 있다.
</p>
</div>
</div>
<div id="outline-container-org5ea1998" class="outline-4">
<h4 id="org5ea1998"><span class="section-number-4">5.3.4</span> 라이브러리를 활용한다.</h4>
<div class="outline-text-4" id="text-5-3-4">
<p>
STUB 을 중복적으로 생성할 필요 없이 재사용 할 수 있다. 
</p>
</div>
<ul class="org-ul"><li><a id="org9654dac"></a>embedded language 활용<br /><ul class="org-ul"><li><a id="orgf52c29e"></a>scheme<br /><div class="outline-text-6" id="text-orgf52c29e">
<p>
문법이 간단하여 구현이 용이함. 
</p>
</div>
<ul class="org-ul"><li><a id="org09bb4bd"></a>구현 - tinyscheme<br /><div class="outline-text-7" id="text-org09bb4bd">
<p>
5천 라인 정도의 C 파일로 language 가 구현 되어 있음. 
codescroll에서 사용하는 컴파일러만으로 컴파일 가능. 추가 도구 등이 필요
없음. 
</p>
</div></li></ul></li></ul></li></ul>
</div>
</div>
<div id="outline-container-org2442ca8" class="outline-3">
<h3 id="org2442ca8"><span class="section-number-3">5.4</span> 정의 파일 활용</h3>
<div class="outline-text-3" id="text-5-4">
</div><div id="outline-container-orge89afcd" class="outline-4">
<h4 id="orge89afcd"><span class="section-number-4">5.4.1</span> enum 타입 및 공통 상수 값 정의</h4>
<div class="outline-text-4" id="text-5-4-1">
<p>
<a href="#orgc36c849">scheme 파일</a> 처음 실행 할 때 <b>(testsc-require icmsdefine)</b> 를 호출하여 관련 값을 가져올
수 있다. 각 타입의 값을 찾을 필요 없이 그대로 사용할 수 있다. 
</p>

<p>
icmsdefine.scm 파일이 공통으로 사용하는 부분이 정의되어 있음. 필요할 경우
타입를 추가 할 수 있다. 
</p>

<p>
두번 정의가 될 경우 뒤에 나오는 값으로 설정이 된다. 
</p>
</div>
</div>
</div>

<div id="outline-container-org4b19967" class="outline-3">
<h3 id="org4b19967"><span class="section-number-3">5.5</span> testsc 수정시</h3>
<div class="outline-text-3" id="text-5-5">
<p>
정적 라이브러리이기 때문에 <a href="#org12715a3">테스트케이스</a>재빌드 필요하다. 
</p>
</div>
</div>

<div id="outline-container-org9be485d" class="outline-3">
<h3 id="org9be485d"><span class="section-number-3">5.6</span> 표준 출력 redirection</h3>
<div class="outline-text-3" id="text-5-6">
<p>
라이브러리가 표준 출력을 파일로 redirection 해준다 코드가 실행하면서
출력하는 사항을 파일로 확인할 수 있다. 
</p>
</div>
</div>

<div id="outline-container-org2d5bca2" class="outline-3">
<h3 id="org2d5bca2"><span class="section-number-3">5.7</span> 디버깅 <a id="org455b8ae"></a></h3>
<div class="outline-text-3" id="text-5-7">
<ol class="org-ol">
<li>커맨드 창을 열고 <a href="#orgcfddd3b">testsc 홈</a> 폴더(<code>/testsc/home/</code>) 으로 이동한다.</li>
<li><p>
scheme 명령을 실행한다. 
</p>
<div class="org-src-container">

<pre class="src src-shell">C:\testsc\home&gt;.\scheme.exe</pre>
</div></li>
<li><p>
<a href="#org01f6975">No description for this link</a> 을 호출한다. 
</p>

<p>
다음은 testscase 번호를 1로 설정하고 <a href="#orgcfddd3b">testsc 홈</a> 폴더 아래 ex/t-1.scm 을
로딩한다. 로깅 과정에 에러가 있을 경우 화면으로 출력한다.  <a href="#orgc36c849">scheme 파일</a> 의
오류를 검증하는데 사용할 수있다. 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="nv">ts&gt;</span> <span class="p">(</span><span class="nf">testsc-init</span> <span class="mi">1</span> <span class="nv">ex/t-1</span> <span class="p">)</span></pre>
</div></li>
<li><p>
<a href="#org905da14">테스트 변수</a> 값을 확인한다. 
</p>

<p>
확인하고자 하는 변수를 입력후 엔터를 넣으면 값이 출력된다. <a href="#org01f6975">No description for this link</a>
함수의 테스트번호를 변경해가면서 <a href="#org905da14">테스트 변수</a> 의 값을 확인할 수 있다. 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="nv">ts&gt;priampl</span>
<span class="mi">0</span></pre>
</div></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org25b4805" class="outline-2">
<h2 id="org25b4805"><span class="section-number-2">6</span> Reference <a id="orgaa4e4a9"></a></h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-orge4e2a5c" class="outline-3">
<h3 id="orge4e2a5c"><span class="section-number-3">6.1</span> C API - <a id="org2494854"></a></h3>
<div class="outline-text-3" id="text-6-1">
<p>
CodeScroll 에서 스텁등을 작성할 때 사용한다. 
</p>
</div>
<div id="outline-container-orgcd95837" class="outline-4">
<h4 id="orgcd95837"><span class="section-number-4">6.1.1</span> testsc.cpp</h4>
<div class="outline-text-4" id="text-6-1-1">
<p>
<a href="#org905da14">테스트 변수</a>를 처리하는 함수
</p>
</div>
<ul class="org-ul"><li><a id="orgaf892de"></a>함수<br /><ul class="org-ul"><li><a id="org7f9237a"></a>long testsc_ivalue(const char* name)  <a id="org30551c6"></a><br /><div class="outline-text-6" id="text-org7f9237a">
<pre class="example">

</pre>
</div></li>
<li><a id="orgf5c2f5e"></a>double testsc_dvalue(const char* name)  <a id="orgce9b439"></a><br /></li>
<li><a id="org1e35169"></a>char* testsc_strvalue(const char* name)  <a id="org19c6faa"></a><br /></li>
<li><a id="org98ede5e"></a>void testsc_eval(const char *cmd)  <a id="org531382a"></a><br /><div class="outline-text-6" id="text-org98ede5e">
<p>
<a href="#orgd044b42">No description for this link</a> 에서 초기화 하면서 scheme 을 실행하는 것에 더하여 추가적으로
다른 scheme 명령을 실행고 싶을 때 사용한다. <a href="#org10d12be">No description for this link</a> 명령을 이용하여
다른 파일을 불러 올 수 있다. 
</p>

<p>
<a href="#orgc36c849">scheme 파일</a>를 불어오는 것에 추가적으로 다른 파일을 불러
     오고 싶을 사용한다. 
</p>
<ul class="org-ul">
<li>scheme 파일 추가 실행 
다음과 같이 수행하면 관련 scheme 파일을</li>
</ul>
<div class="org-src-container">

<pre class="src src-cpp"><span class="n">testsc_eval</span><span class="p">(</span> <span class="s">&quot;(testsc-require mb/t-9)&quot;</span><span class="p">)</span> <span class="p">;</span></pre>
</div>
</div></li>

<li><a id="org50864d0"></a>void testsc_init(int testnum, const char *cmd, const char *homepath = 0 )  <a id="orgd044b42"></a><br /><div class="outline-text-6" id="text-org50864d0">
<p>
<a href="#orgd044b42">No description for this link</a> 를 호출하여 <b>testsc</b> 를 초기화 한다. 첫번째 파라미터는
CS_TESTCASENO() 으로써 테스트번호를 전달한다. 두번째 파라미터는 실행할
scheme 명령이다. <a href="#org10d12be">No description for this link</a> 를 호출하여 <a href="#orgc36c849">scheme 파일</a>을 읽어 올 수 있다.
마지막 파라미터는 <b>testsc</b> 의 HOME 경로가 된다. <a href="#org10d12be">No description for this link</a> 는 홈
경로아래에서 <a href="#orgc36c849">scheme 파일</a> 을 불러온다. 경로를 파라미터로 넘기지 아니할 경우
프로젝트가 있는 드라이브의 <code>/testsc/home</code> 폴더가 홈이 된다. (C 드라이브에
프로젝트 폴더가 있을 경우 <code>c:\testsc\home</code> 폴더, 리눅스의 경우
<code>/testsc/home</code> )       
</p>
</div></li>



<li><a id="org398e861"></a>void testsc_debug(const char*format &#x2026;)  <a id="orgb5e7701"></a><br /></li></ul></li></ul>
</div>

<div id="outline-container-org22cc7dd" class="outline-4">
<h4 id="org22cc7dd"><span class="section-number-4">6.1.2</span> testsc_ext.cpp</h4>
<div class="outline-text-4" id="text-6-1-2">
</div><ul class="org-ul"><li><a id="org3396bc7"></a>함수<br /><ul class="org-ul"><li><a id="org09be464"></a>int testsc_ext_length( void ) <a id="org4393a80"></a><br /></li>
<li><a id="org0d654a8"></a>void testsc_ext_erase(int index ) <a id="org999608c"></a><br /></li>
<li><a id="org584b3c0"></a>char* testsc_ext_get( int i )  <a id="org30d4ea7"></a><br /><ul class="org-ul"><li><a id="org6b59e10"></a>구현 방법<br /></li></ul></li>
<li><a id="orgf1f71cd"></a>pop_args<br /></li></ul></li></ul>
</div>
</div>

<div id="outline-container-org709d257" class="outline-3">
<h3 id="org709d257"><span class="section-number-3">6.2</span> scheme API - <a id="org11f97db"></a></h3>
<div class="outline-text-3" id="text-6-2">
</div><div id="outline-container-org5f03e64" class="outline-4">
<h4 id="org5f03e64"><span class="section-number-4">6.2.1</span> util.scm</h4>
<div class="outline-text-4" id="text-6-2-1">
</div><ul class="org-ul"><li><a id="org221f7bd"></a>변수<br /><ul class="org-ul"><li><a id="org281e8c4"></a><b>testsc-home</b>  <a id="orgdf734bc"></a><br /><div class="outline-text-6" id="text-org281e8c4">
<ul class="org-ul">
<li>목적 : 스크립트 파일 위치</li>
<li>방향 :</li>
<li><p>
사용법 
testsc-debug 를 이용하여 경로를 확인한다. 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">testsc-debug</span> <span class="nv">*testsc-home*</span><span class="p">)</span></pre>
</div></li>
</ul>
</div></li></ul></li>

<li><a id="org3229cb8"></a>함수<br /><ul class="org-ul"><li><a id="org2698017"></a>(define-macro (testsc-require x) &#x2026;) <a id="org10d12be"></a><br /><div class="outline-text-6" id="text-org2698017">
<p>
<a href="#org10d12be">No description for this link</a> 의 파라미터는 불러오고자 하는 <a href="#orgc36c849">scheme 파일</a>이다. (testsc-require
mb/t-9) 은 홈 폴더 아래의 <b>mb/t-9.scm</b> 파일을 호출한다. 경로명에 공백이
있어서는 아니되고 파일의 확장자인 <b>.scm</b> 은 생략해야 한다. 
</p>

<p>
경로명은 다음과 같는 명명 규칙을 사용한다. 단순한 convention이며 따르지
아니하여도 상관없음. 기억하기 쉽고 짧을 수록 유리
</p>

<blockquote>
<ul class="org-ul">
<li>폴더명 : 테스트하고자 하는 .cpp 파일을 나타내는 약어</li>
<li>t-testname.scm : 테스트케이스(함수별) 를 나타내는 약어. <b>t-</b> 으로 시작
하도록 한다.</li>
</ul>
</blockquote>
</div></li>
<li><a id="org15405ad"></a>(define (t-offset start) &#x2026;) <a id="orgfc92ef7"></a><br /><div class="outline-text-6" id="text-org15405ad">
<p>
(define (t-offset start) (- (testsc-get-testnum) start))
</p>
</div></li>

<li><a id="orgbc715a5"></a>(define (for-each-index-offset offset proc  . args ) &#x2026;) <a id="org0fbd950"></a><br /><div class="outline-text-6" id="text-orgbc715a5">
<ul class="org-ul">
<li>목적 : 테스트케이스별 값을 설정한다.</li>
<li><p>
사용법 : 테이스케이스별로 순차적으로 값을 설정하고자 할 때 사용한다. 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="k">define </span><span class="nv">testsc</span> <span class="mi">0</span> <span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">order</span> <span class="mi">0</span> <span class="p">)</span>
<span class="p">(</span><span class="nf">for-each-index-offset</span>
  <span class="mi">1</span>
  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">testsc</span> <span class="mi">1</span> <span class="p">)</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">order</span> <span class="nv">x</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="nv">system_types-assume_cntrl</span>
    <span class="nv">system_types-control_and_engage</span>
    <span class="nv">system_types-return_to_base</span>
    <span class="nv">system_types-transfer_cntrl</span>
    <span class="nv">system_types-launch_heli</span>
    <span class="nv">system_types-request_cntrl</span>
    <span class="nv">system_types-cancel_handover</span>  
    <span class="mi">-1</span>
  <span class="p">)</span></pre>
</div></li>
<li>입력 파라미터 
<ul class="org-ul">
<li>offset : 값 설정을 시작할 테스트케이스 번호</li>
<li>proc   : 값 설정을 수행할 함수</li>
<li>args   : 테스트 값</li>
</ul></li>
</ul>
</div></li>

<li><a id="org629f4c6"></a>(define (feio offset proc args ) &#x2026;) <a id="org9ba4135"></a><br /><div class="outline-text-6" id="text-org629f4c6">
<ul class="org-ul">
<li>목적 : 테스트케이스별 값을 설정한다.</li>
<li><p>
사용법 : 테이스케이스별로 순차적으로 값을 설정하고자 할 때 사용한다. 
<a href="#org0fbd950">No description for this link</a> 와 비교하여 args 부분에 리스트가 올 수
있다. 
</p>
<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="k">define </span><span class="nv">i_enStatus</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">m_bEnableCallback</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">i_pchData_0</span> <span class="mi">0</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">i_pchData_1</span> <span class="mi">0</span><span class="p">)</span>

<span class="p">(</span><span class="nf">feio</span>
 <span class="mi">1</span>
 <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">i_enStatus</span>        <span class="p">(</span><span class="nf">nth</span> <span class="mi">0</span> <span class="nv">x</span><span class="p">))</span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">m_bEnableCallback</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">1</span> <span class="nv">x</span><span class="p">))</span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">i_pchData_0</span>       <span class="p">(</span><span class="nf">nth</span> <span class="mi">2</span> <span class="nv">x</span><span class="p">))</span>
   <span class="p">(</span><span class="k">set! </span><span class="nv">i_pchData_1</span>       <span class="p">(</span><span class="nf">nth</span> <span class="mi">3</span> <span class="nv">x</span><span class="p">)))</span>

 <span class="p">(</span><span class="nf">combi</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">11</span> <span class="mi">12</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">0</span> <span class="p">)))</span></pre>
</div></li>
</ul>
</div></li>

<li><a id="orgbbd224b"></a>(define (combi . args)&#x2026;) <a id="org8608d8a"></a><br /><div class="outline-text-6" id="text-orgbbd224b">
<ul class="org-ul">
<li>목적 : 테스트 데이터 생성(combination)</li>
<li><p>
사용법 : 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">combi</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">a</span> <span class="nv">b</span> <span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="p">))</span></pre>
</div>

<p>
#+RESULT :
'((a 1) (a 2) (b 1) (b 2))
</p></li>
</ul>
</div></li>
<li><a id="org7588288"></a>(define (nth n l) &#x2026;)<br /><div class="outline-text-6" id="text-org7588288">
<ul class="org-ul">
<li>목적 : 리스트에서 n 번째 항목을 리턴한다.</li>
<li><p>
사용법 : 리스트에서 값을 가져오고자 할 때 사용한다. 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">nth</span> <span class="mi">3</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">zero</span> <span class="nv">one</span> <span class="nv">two</span> <span class="nv">three</span> <span class="nv">four</span><span class="p">))</span></pre>
</div>

<p>
#+RESULT :
three
</p></li>

<li>입력 파라미터 
<ul class="org-ul">
<li>n : 리스트에서 가져오고자 하는 인덱스( 0 부터 시작 )</li>
<li>l : 리스트</li>
</ul></li>
</ul>
</div></li>
<li><a id="org78fc0a8"></a>(define (num-list start end  ) &#x2026;) <a id="org1669eab"></a><br /><div class="outline-text-6" id="text-org78fc0a8">
<ul class="org-ul">
<li>프로토타입 : (define (num-list start end  ) &#x2026;)</li>
<li>목적 : 숫자 리스트를 리턴한다.</li>
<li><p>
사용법 : 
</p>

<div class="org-src-container">

<pre class="src src-scheme"><span class="p">(</span><span class="nf">num-list</span> <span class="mi">1</span> <span class="mi">10</span><span class="p">)</span></pre>
</div>

<p>
#+RESULT :
'(1 2 3 4 5 6 7 8 9 )
</p></li>

<li>입력 파라미터 
<ul class="org-ul">
<li>start : 시작 값(포함)</li>
<li>end : 종료 값(불포함)</li>
</ul></li>
</ul>
</div></li>

<li><a id="orgefaaac1"></a>(define-macro (testsc-init x  initcmd) &#x2026;) <a id="org01f6975"></a><br /></li>
<li><a id="org0a9e814"></a>populate<br /><div class="outline-text-6" id="text-org0a9e814">
<p>
구현 필요. 
</p>
</div></li></ul></li>
<li><a id="org6d98428"></a>testsc.scm<br /><ul class="org-ul"><li><a id="org674e5ba"></a>(define (foreach-tnum offset proc args )&#x2026;) <a id="org3225d01"></a><br /></li></ul></li></ul>
</div>
<div id="outline-container-org02052d9" class="outline-4">
<h4 id="org02052d9"><span class="section-number-4">6.2.2</span> testsc.c</h4>
<div class="outline-text-4" id="text-6-2-2">
</div><ul class="org-ul"><li><a id="orgbf085c7"></a>함수<br /><ul class="org-ul"><li><a id="org06a079b"></a>pointer foreign_testsc_set_testnum(scheme* sc, pointer args) <a id="org4225ae9"></a> <a id="org7f5331c"></a><br /></li></ul></li></ul>
</div>
</div>

<div id="outline-container-orgd71d9e3" class="outline-3">
<h3 id="orgd71d9e3"><span class="section-number-3">6.3</span> 추가 C excention 구현</h3>
<div class="outline-text-3" id="text-6-3">
<p>
C 를 이용하여 추가적인 기능을 구현할 수 있다.
</p>

<p>
어떻게 구현 하는지 설명 할 수 있다.
</p>
</div>

<div id="outline-container-orgfc37d47" class="outline-4">
<h4 id="orgfc37d47"><span class="section-number-4">6.3.1</span> 구조체 테스트 데이터 생성</h4>
</div>
</div>
</div>

<div id="outline-container-orgb133bf7" class="outline-2">
<h2 id="orgb133bf7"><span class="section-number-2">7</span> scheme 문법 <a id="orgbf40595"></a></h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-org075be0d" class="outline-3">
<h3 id="org075be0d"><span class="section-number-3">7.1</span> scheme 파일 에디터</h3>
</div>
<div id="outline-container-orgaedf455" class="outline-3">
<h3 id="orgaedf455"><span class="section-number-3">7.2</span> 15분 만에 scheme 배우기</h3>
<div class="outline-text-3" id="text-7-2">
<div class="org-src-container">

<pre class="src src-scheme"><span class="c1">;; This gives an introduction to Scheme in 15 minutes</span>
<span class="c1">;;</span>
<span class="c1">;; First make sure you read this text by Peter Norvig:</span>
<span class="c1">;; http://norvig.com/21-days.html</span>
<span class="c1">;;</span>
<span class="c1">;; Then install GNU Guile</span>
<span class="c1">;; NOTE: I won&#39;t encourage using Racket but if you really want,</span>
<span class="c1">;;       I still give you some hints in this tutorial. But the</span>
<span class="c1">;;       tutorial will base on Guile and RnRs.</span>
<span class="c1">;;</span>
<span class="c1">;; openSUSE: zypper install guile</span>
<span class="c1">;; Debian: apt-get install guile-2.0 (or see your distro instructions)</span>
<span class="c1">;; MacOSX: Building Guile 2.0 on the Mac</span>
<span class="c1">;;         http://irrealblog.blogspot.hk/2011/03/building-guile-2.html</span>
<span class="c1">;; Windows try web: http://repl.it/languages/Scheme</span>
<span class="c1">;;</span>
<span class="c1">;; More general information can be found at:</span>
<span class="c1">;; http://www.gnu.org/software/guile</span>

<span class="c1">;; Important warning:</span>
<span class="c1">;;</span>
<span class="c1">;; Going through this tutorial won&#39;t damage your computer unless</span>
<span class="c1">;; you get so angry that you throw it on the floor.  In that case,</span>
<span class="c1">;; I hereby decline any responsability.  Have fun!</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; </span>
<span class="c1">;; Fire up Scheme:</span>
<span class="c1">;; Type &#39;guile&#39; for GNU Guile</span>
<span class="c1">;; Or just use the browser for web version</span>
<span class="c1">;;</span>
<span class="c1">;; Now look at the prompt:</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;;</span>
<span class="c1">;; Semi-colons start comments anywhere on a line.</span>
<span class="c1">;;</span>
<span class="c1">;; Scheme programs are made of symbolic expressions (s-exps):</span>
<span class="p">(</span><span class="nb">+ </span><span class="mi">2</span> <span class="mi">2</span><span class="p">)</span>

<span class="c1">;; This symbolic expression reads as &quot;Add 2 to 2&quot;.</span>

<span class="c1">;; Sexps are enclosed into parentheses, possibly nested:</span>
<span class="p">(</span><span class="nb">+ </span><span class="mi">2</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">1</span><span class="p">))</span>

<span class="c1">;; A symbolic expression contains atoms or other symbolic</span>
<span class="c1">;; expressions.  In the above examples, 1 and 2 are atoms,</span>
<span class="c1">;; (+ 2 (+ 1 1)) and (+ 1 1) are symbolic expressions.</span>

<span class="p">(</span><span class="nb">+ </span><span class="mi">3</span> <span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">2</span><span class="p">))</span>
<span class="c1">;; =&gt; 6</span>

<span class="c1">;; `set!&#39; stores a value into a variable:</span>
<span class="c1">;; Please define my-name first, or you can&#39;t assign it.</span>
<span class="p">(</span><span class="k">define </span><span class="nv">my-name</span> <span class="s">&quot;unknown&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="k">set! </span><span class="nv">my-name</span> <span class="s">&quot;NalaGinrut&quot;</span><span class="p">)</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 1. Primitive Datatypes and Operators</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;;; Numbers</span>
<span class="mi">9999999999999999999999</span> <span class="c1">; integers</span>
<span class="o">#</span><span class="nv">b111</span>                  <span class="c1">; binary =&gt; 7</span>
<span class="o">#</span><span class="nv">o111</span>                  <span class="c1">; octal =&gt; 73</span>
<span class="o">#</span><span class="nv">x111</span>                  <span class="c1">; hexadecimal =&gt; 273</span>
<span class="mf">3.14</span>                   <span class="c1">; reals</span>
<span class="mf">6.02</span><span class="nv">e+23</span>
<span class="mi">1</span><span class="nv">/2</span>                    <span class="c1">; rationals</span>
<span class="mi">1</span><span class="nv">+2i</span>                   <span class="c1">; complex numbers</span>

<span class="c1">;; Function application is written (f x y z ...)</span>
<span class="c1">;; where f is a function and x, y, z, ... are operands</span>
<span class="c1">;; If you want to create a literal list of data, use &#39; to stop it from</span>
<span class="c1">;; being evaluated</span>
<span class="o">&#39;</span><span class="p">(</span><span class="nv">+</span> <span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; (+ 1 2)</span>
<span class="c1">;; Now, some arithmetic operations</span>
<span class="p">(</span><span class="nb">+ </span><span class="mi">1</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="nb">- </span><span class="mi">8</span> <span class="mi">1</span><span class="p">)</span>  <span class="c1">; =&gt; 7</span>
<span class="p">(</span><span class="nb">* </span><span class="mi">10</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; 20</span>
<span class="p">(</span><span class="nb">expt </span><span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; 8</span>
<span class="p">(</span><span class="nb">quotient </span><span class="mi">5</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="nb">remainder </span><span class="mi">5</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; 1</span>
<span class="p">(</span><span class="nb">/ </span><span class="mi">35</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">; =&gt; 7</span>
<span class="p">(</span><span class="nb">/ </span><span class="mi">1</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; 1/3</span>
<span class="p">(</span><span class="nb">exact-&gt;inexact </span><span class="mi">1</span><span class="nv">/3</span><span class="p">)</span> <span class="c1">; =&gt; 0.3333333333333333</span>
<span class="p">(</span><span class="nb">+ </span><span class="mi">1</span><span class="nv">+2i</span>  <span class="mi">2-3</span><span class="nv">i</span><span class="p">)</span> <span class="c1">; =&gt; 3-1i</span>

<span class="c1">;;; Booleans</span>
<span class="no">#t</span> <span class="c1">; for true</span>
<span class="no">#f</span> <span class="c1">; for false -- any value other than #f is true</span>
<span class="p">(</span><span class="nb">not </span><span class="no">#t</span><span class="p">)</span> <span class="c1">; =&gt; #f</span>
<span class="p">(</span><span class="k">and </span><span class="mi">0</span> <span class="no">#f</span> <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;doesn&#39;t get here&quot;</span><span class="p">))</span> <span class="c1">; =&gt; #f</span>
<span class="p">(</span><span class="k">or </span><span class="no">#f</span> <span class="mi">0</span> <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;doesn&#39;t get here&quot;</span><span class="p">))</span>  <span class="c1">; =&gt; 0</span>

<span class="c1">;;; Characters</span>
<span class="c1">;; According to RnRs, characters only have two notations:</span>
<span class="c1">;; #\ and #\x</span>
<span class="c1">;; Racket support #\u, but it&#39;s never Scheme.</span>
<span class="sc">#\A</span> <span class="c1">; =&gt; #\A</span>
<span class="o">#</span><span class="err">\</span><span class="nv">λ</span> <span class="c1">; =&gt; #\λ</span>
<span class="sc">#\x03BB</span> <span class="c1">; =&gt; #\λ</span>

<span class="c1">;;; Strings are fixed-length array of characters.</span>
<span class="s">&quot;Hello, world!&quot;</span>
<span class="s">&quot;Benjamin \&quot;Bugsy\&quot; Siegel&quot;</span>   <span class="c1">; backslash is an escaping character</span>
<span class="s">&quot;Foo\tbar\x21\a\r\n&quot;</span> <span class="c1">; includes C escapes (only support hex)</span>
<span class="c1">;; try to print the above string</span>
<span class="c1">;; Printing is pretty easy</span>
<span class="p">(</span><span class="nb">display </span><span class="s">&quot;I&#39;m Guile. Nice to meet you!\n&quot;</span><span class="p">)</span>
<span class="c1">;; and unicode escapes</span>
<span class="s">&quot;\u004B&quot;</span> <span class="c1">; =&gt; K</span>

<span class="c1">;; Strings can be added too!</span>
<span class="p">(</span><span class="nb">string-append </span><span class="s">&quot;Hello &quot;</span> <span class="s">&quot;world!&quot;</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hello world!&quot;</span>

<span class="c1">;; A string can be treated like a list of characters</span>
<span class="p">(</span><span class="nb">string-ref </span><span class="s">&quot;Apple&quot;</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">; =&gt; #\A</span>

<span class="c1">;; format can be used to format strings:</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;~a can be ~a&quot;</span> <span class="s">&quot;strings&quot;</span> <span class="s">&quot;formatted&quot;</span><span class="p">)</span>
<span class="c1">;; ==&gt; print &quot;strings can be formatted&quot; on screen</span>
<span class="p">(</span><span class="k">define </span><span class="nv">str</span> <span class="p">(</span><span class="nf">format</span> <span class="no">#f</span> <span class="s">&quot;~a can be ~a&quot;</span> <span class="s">&quot;strings&quot;</span> <span class="s">&quot;formatted&quot;</span><span class="p">))</span>
<span class="c1">;; str was assigned to &quot;strings can be formatted&quot;</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 2. Variables</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; You can create a variable using define</span>
<span class="c1">;; a variable name can use any character except: ()[]{}&quot;,&#39;`;#|\</span>
<span class="p">(</span><span class="k">define </span><span class="nv">some-var</span> <span class="mi">5</span><span class="p">)</span>
<span class="nv">some-var</span> <span class="c1">; =&gt; 5</span>

<span class="c1">;; Accessing a previously unassigned variable is an exception</span>
					<span class="c1">; x ; =&gt; x: undefined ...</span>

<span class="c1">;; Local binding: `me&#39; is bound to &quot;Bob&quot; only within the (let ...)</span>
<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">me</span> <span class="s">&quot;Bob&quot;</span><span class="p">))</span>
  <span class="s">&quot;Alice&quot;</span>
  <span class="nv">me</span><span class="p">)</span> 
<span class="c1">;; =&gt; &quot;Bob&quot;</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 3. Structs and Collections</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Record Type (Skip this chapter if you&#39;re trying web version</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-9</span><span class="p">))</span>
<span class="p">(</span><span class="nf">define-record-type</span> <span class="nv">dog</span> 
  <span class="p">(</span><span class="nf">make-dog</span> <span class="nv">name</span> <span class="nv">breed</span> <span class="nv">age</span><span class="p">)</span>
  <span class="nv">dog?</span>
  <span class="p">(</span><span class="nf">name</span> <span class="nv">dog-name</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">breed</span> <span class="nv">dog-breed</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">age</span> <span class="nv">dog-age</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">my-pet</span>
  <span class="p">(</span><span class="nf">make-dog</span> <span class="s">&quot;lassie&quot;</span> <span class="s">&quot;collie&quot;</span> <span class="mi">5</span><span class="p">))</span>
<span class="nv">my-pet</span> <span class="c1">; =&gt; #&lt;dog&gt;</span>
<span class="p">(</span><span class="nf">dog?</span> <span class="nv">my-pet</span><span class="p">)</span> <span class="c1">; =&gt; #t</span>
<span class="p">(</span><span class="nf">dog-name</span> <span class="nv">my-pet</span><span class="p">)</span> <span class="c1">; =&gt; &quot;lassie&quot;</span>

<span class="c1">;;; Pairs (immutable)</span>
<span class="c1">;; `cons&#39; constructs pairs, `car&#39; and `cdr&#39; extract the first</span>
<span class="c1">;; and second elements</span>
<span class="p">(</span><span class="nb">cons </span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; &#39;(1 . 2)</span>
<span class="p">(</span><span class="nb">car </span><span class="p">(</span><span class="nb">cons </span><span class="mi">1</span> <span class="mi">2</span><span class="p">))</span> <span class="c1">; =&gt; 1</span>
<span class="p">(</span><span class="nb">cdr </span><span class="p">(</span><span class="nb">cons </span><span class="mi">1</span> <span class="mi">2</span><span class="p">))</span> <span class="c1">; =&gt; 2</span>

<span class="c1">;;; Lists</span>

<span class="c1">;; Lists are linked-list data structures, made of `cons&#39; pairs and end</span>
<span class="c1">;; with a &#39;() to mark the end of the list</span>
<span class="p">(</span><span class="nb">cons </span><span class="mi">1</span> <span class="p">(</span><span class="nb">cons </span><span class="mi">2</span> <span class="p">(</span><span class="nb">cons </span><span class="mi">3</span> <span class="o">&#39;</span><span class="p">())))</span> <span class="c1">; =&gt; &#39;(1 2 3)</span>
<span class="c1">;; `list&#39; is a convenience variadic constructor for lists</span>
<span class="p">(</span><span class="nb">list </span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; &#39;(1 2 3)</span>
<span class="c1">;; and a quote can also be used for a literal list value</span>
<span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; &#39;(1 2 3)</span>

<span class="c1">;; Can still use `cons&#39; to add an item to the beginning of a list</span>
<span class="p">(</span><span class="nb">cons </span><span class="mi">4</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span> <span class="c1">; =&gt; &#39;(4 1 2 3)</span>

<span class="c1">;; Use `append&#39; to add lists together</span>
<span class="p">(</span><span class="nb">append </span><span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">3</span> <span class="mi">4</span><span class="p">))</span> <span class="c1">; =&gt; &#39;(1 2 3 4)</span>

<span class="c1">;; Lists are a very basic type, so there is a *lot* of functionality for</span>
<span class="c1">;; them, a few examples:</span>
<span class="c1">;; For Racket users:</span>
<span class="p">(</span><span class="nb">map </span><span class="nv">add1</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>          <span class="c1">; =&gt; &#39;(2 3 4)</span>
<span class="c1">;; For Guile users:</span>
<span class="p">(</span><span class="nb">map </span><span class="mi">1</span><span class="nv">+</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">))</span>	     <span class="c1">; =&gt; &#39;(2 3 4)</span>
<span class="c1">;; add1 or 1+ is not a standard primitive, so it depends on implementations.</span>

<span class="p">(</span><span class="nb">map </span><span class="nv">+</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">10</span> <span class="mi">20</span> <span class="mi">30</span><span class="p">))</span> <span class="c1">; =&gt; &#39;(11 22 33)</span>

<span class="c1">;; filter/count/take/drop are dwell in SRFI-1, so you have to load it first.</span>
<span class="c1">;; For Racket users:</span>
<span class="p">(</span><span class="nf">require</span> <span class="nv">srfi/1</span><span class="p">)</span>
<span class="c1">;; For Guile users:</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-1</span><span class="p">))</span>

<span class="p">(</span><span class="nf">filter</span> <span class="nv">even?</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>    <span class="c1">; =&gt; &#39;(2 4)</span>
<span class="p">(</span><span class="nf">count</span> <span class="nv">even?</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>     <span class="c1">; =&gt; 2</span>
<span class="p">(</span><span class="nf">take</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span>          <span class="c1">; =&gt; &#39;(1 2)</span>
<span class="p">(</span><span class="nf">drop</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">)</span> <span class="mi">2</span><span class="p">)</span>          <span class="c1">; =&gt; &#39;(3 4)</span>

<span class="c1">;;; Vectors</span>

<span class="c1">;; Vectors are fixed-length arrays</span>
<span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; &#39;#(1 2 3)</span>

<span class="c1">;; Use `vector-append&#39; to add vectors together</span>
<span class="c1">;; NOTE: vector-append is in SRFI-43 which is not supported in Guile-2.0.9</span>
<span class="c1">;;       or earlier. And it may not be added in Guile-2.0.10.</span>
<span class="c1">;;       But it&#39;s proposed in R7RS, and there&#39;s a r7rs branch in Guile upstream.</span>
<span class="c1">;;       If your Guile doesn&#39;t support vector-append, please skip this step.</span>
<span class="p">(</span><span class="nf">vector-append</span> <span class="o">#</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="o">#</span><span class="p">(</span><span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">))</span> <span class="c1">; =&gt; #(1 2 3 4 5 6)</span>

<span class="c1">;;; Hashes</span>

<span class="c1">;; Create mutable hash table</span>
<span class="c1">;; For GNU Guile</span>
<span class="p">(</span><span class="k">define </span><span class="nv">m</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-set!</span> <span class="nv">m</span> <span class="ss">&#39;a</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-set!</span> <span class="nv">m</span> <span class="ss">&#39;b</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-set!</span> <span class="nv">m</span> <span class="ss">&#39;c</span> <span class="mi">3</span><span class="p">)</span>

<span class="c1">;; Retrieve a value</span>
<span class="p">(</span><span class="nf">hash-ref</span> <span class="nv">m</span> <span class="ss">&#39;a</span><span class="p">)</span> <span class="c1">; =&gt; 1</span>

<span class="c1">;; Retrieving a non-present value is an exception</span>
<span class="p">(</span><span class="nf">hash-ref</span> <span class="nv">m</span> <span class="ss">&#39;d</span><span class="p">)</span> 
<span class="c1">;; =&gt; #f </span>

<span class="c1">;; You can provide a default value for missing keys</span>
<span class="p">(</span><span class="nf">hash-ref</span> <span class="nv">m</span> <span class="ss">&#39;d</span> <span class="mi">0</span><span class="p">)</span>
<span class="c1">;; =&gt; 0</span>

<span class="c1">;; Use `hash-remove&#39; to remove keys (functional too)</span>
<span class="p">(</span><span class="nf">hash-remove!</span> <span class="nv">m</span> <span class="ss">&#39;a</span><span class="p">)</span> <span class="c1">; =&gt; ((b . 2) (c . 3))</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 3. Functions</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Use `lambda&#39; to create functions.</span>
<span class="c1">;; A function always returns the value of its last expression</span>
<span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="s">&quot;Hello World&quot;</span><span class="p">)</span> <span class="c1">; =&gt; #&lt;procedure&gt;</span>

<span class="c1">;; Use parens to call all functions, including a lambda expression</span>
<span class="p">((</span><span class="k">lambda </span><span class="p">()</span> <span class="s">&quot;Hello World&quot;</span><span class="p">))</span> <span class="c1">; =&gt; &quot;Hello World&quot;</span>
<span class="p">((</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">x</span> <span class="nv">x</span><span class="p">))</span> <span class="mi">5</span><span class="p">)</span>      <span class="c1">; =&gt; 10</span>

<span class="c1">;; Assign a function to a var</span>
<span class="p">(</span><span class="k">define </span><span class="nv">hello-world</span> <span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="s">&quot;Hello World&quot;</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hello-world</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hello World&quot;</span>

<span class="c1">;; You can shorten this using the function definition syntatcic sugar:</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">hello-world2</span><span class="p">)</span> <span class="s">&quot;Hello World&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hello-world2</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hello World&quot;</span>

<span class="c1">;; The () in the above is the list of arguments for the function</span>
<span class="p">(</span><span class="k">define </span><span class="nv">hello</span>
  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">name</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">string-append </span><span class="s">&quot;Hello &quot;</span> <span class="nv">name</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">hello</span> <span class="s">&quot;Steve&quot;</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hello Steve&quot;</span>
<span class="c1">;; ... or equivalently, using a sugared definition:</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">hello2</span> <span class="nv">name</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">string-append </span><span class="s">&quot;Hello &quot;</span> <span class="nv">name</span><span class="p">))</span>

<span class="c1">;; You can have multi-variadic functions too, using `case-lambda&#39;</span>
<span class="p">(</span><span class="k">define </span><span class="nv">hello3</span>
  <span class="p">(</span><span class="nf">case-lambda</span>
    <span class="p">(()</span> <span class="s">&quot;Hello World&quot;</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">name</span><span class="p">)</span> <span class="p">(</span><span class="nb">string-append </span><span class="s">&quot;Hello &quot;</span> <span class="nv">name</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">hello3</span> <span class="s">&quot;Jake&quot;</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hello Jake&quot;</span>
<span class="p">(</span><span class="nf">hello3</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hello World&quot;</span>
<span class="c1">;; ... or specify optional arguments with a default value expression</span>
<span class="p">(</span><span class="nf">define*</span> <span class="p">(</span><span class="nf">hello4</span> <span class="o">#</span><span class="nv">:key</span> <span class="p">(</span><span class="nf">name</span> <span class="s">&quot;World&quot;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">string-append </span><span class="s">&quot;Hello &quot;</span> <span class="nv">name</span><span class="p">))</span>

<span class="c1">;; Functions can pack extra arguments up in a list</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">count-args</span> <span class="o">.</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;You passed ~a args: ~a&quot;</span> <span class="p">(</span><span class="nb">length </span><span class="nv">args</span><span class="p">)</span> <span class="nv">args</span><span class="p">))</span>
<span class="p">(</span><span class="nf">count-args</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span> <span class="c1">; =&gt; &quot;You passed 3 args: (1 2 3)&quot;</span>
<span class="c1">;; ... or with the unsugared `lambda&#39; form:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">count-args2</span>
  <span class="p">(</span><span class="k">lambda </span><span class="nv">args</span>
    <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;You passed ~a args: ~a&quot;</span> <span class="p">(</span><span class="nb">length </span><span class="nv">args</span><span class="p">)</span> <span class="nv">args</span><span class="p">)))</span>

<span class="c1">;; You can mix regular and packed arguments</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">hello-count</span> <span class="nv">name</span> <span class="o">.</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Hello ~a, you passed ~a extra args&quot;</span> <span class="nv">name</span> <span class="p">(</span><span class="nb">length </span><span class="nv">args</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">hello-count</span> <span class="s">&quot;Finn&quot;</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>
					<span class="c1">; =&gt; &quot;Hello Finn, you passed 3 extra args&quot;</span>
<span class="c1">;; ... unsugared:</span>
<span class="p">(</span><span class="k">define </span><span class="nv">hello-count2</span>
  <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">name</span> <span class="o">.</span> <span class="nv">args</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;Hello ~a, you passed ~a extra args&quot;</span> <span class="nv">name</span> <span class="p">(</span><span class="nb">length </span><span class="nv">args</span><span class="p">))))</span>

<span class="c1">;; And with keywords</span>
<span class="c1">;; the keywords are those like this #:its-name, sometimes you may see</span>
<span class="c1">;; :its-name without &#39;#&#39; in certain Scheme implementation.</span>
<span class="c1">;; NOTE: keywords is not in any Scheme standards like RnRs.</span>
<span class="c1">;;       But mainstream Scheme implementation often contains it. </span>
<span class="c1">;;	 This truth also means that different implementation may has</span>
<span class="c1">;;	 different result.</span>
<span class="c1">;;       The code below will follow Guile situation.</span>
<span class="p">(</span><span class="nf">define*</span> <span class="p">(</span><span class="nf">hello</span> <span class="o">#</span><span class="nv">:key</span> <span class="p">(</span><span class="nf">name</span> <span class="s">&quot;World&quot;</span><span class="p">)</span> <span class="p">(</span><span class="nf">greeting</span> <span class="s">&quot;Hello&quot;</span><span class="p">)</span> <span class="o">.</span> <span class="nv">args</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;~a ~a, ~a extra args~%&quot;</span> <span class="nv">greeting</span> <span class="nv">name</span> <span class="p">(</span><span class="nb">length </span><span class="nv">args</span><span class="p">)))</span>
<span class="c1">;; &#39;define*&#39; is similar with &#39;define&#39;, but you may use it for defining</span>
<span class="c1">;; optional args or using keyword to specify the value to specified argument.</span>
<span class="p">(</span><span class="nf">hello</span><span class="p">)</span>                 <span class="c1">; =&gt; &quot;Hello World, 0 extra args&quot;</span>
<span class="p">(</span><span class="nf">hello</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span><span class="p">)</span>           <span class="c1">; =&gt; &quot;Hello World, 3 extra args&quot;</span>
<span class="p">(</span><span class="nf">hello</span> <span class="o">#</span><span class="nv">:greeting</span> <span class="s">&quot;Hi&quot;</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hi World, 2 extra args&quot;</span>
<span class="c1">;; NOTE: In Guile, all the keyword-value pairs are countered as the rest args.</span>
<span class="c1">;;       It means &#39;args&#39; here will be (#:greeting &quot;Hi&quot;), so its length is 2.</span>
<span class="c1">;;       If you are in Racket, it&#39;s different, so the result will be 0.</span>
<span class="c1">;;       Because it&#39;s not defined in RnRs, so it&#39;s implementation specific.</span>
<span class="p">(</span><span class="nf">hello</span> <span class="o">#</span><span class="nv">:name</span> <span class="s">&quot;Finn&quot;</span> <span class="o">#</span><span class="nv">:greeting</span> <span class="s">&quot;Hey&quot;</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hey Finn, 4 extra args&quot;</span>
<span class="p">(</span><span class="nf">hello</span> <span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="o">#</span><span class="nv">:greeting</span> <span class="s">&quot;Hi&quot;</span> <span class="o">#</span><span class="nv">:name</span> <span class="s">&quot;Finn&quot;</span> <span class="mi">4</span> <span class="mi">5</span> <span class="mi">6</span><span class="p">)</span> <span class="c1">; =&gt; &quot;Hi Finn, 10 extra args&quot;</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 4. Equality</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; for numbers use `=&#39;</span>
<span class="p">(</span><span class="nb">= </span><span class="mi">3</span> <span class="mf">3.0</span><span class="p">)</span> <span class="c1">; =&gt; #t</span>
<span class="p">(</span><span class="nb">= </span><span class="mi">2</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">; =&gt; #f</span>

<span class="c1">;; for characters use `char=?&#39;</span>
<span class="p">(</span><span class="nb">char=? </span><span class="sc">#\c</span> <span class="sc">#\c</span><span class="p">)</span> <span class="c1">; =&gt; #t</span>

<span class="c1">;; for object identity use `eq?&#39;</span>
<span class="c1">;; WARNING: don&#39;t use `eq?&#39; on numbers and characters, the reason is very simple:</span>
<span class="c1">;;          because RnRs treat this rule as undefined! </span>
<span class="c1">;;(eq? 3 3) ; =&gt; Wrong! it&#39;s undefined! So it depends on implementation!</span>
<span class="c1">;; No matter if you got #t from above, it&#39;s a wrong usage!!!</span>
<span class="c1">;; Should use (= 3 3) or (eqv? 3 3)</span>

<span class="p">(</span><span class="nb">eq? </span><span class="p">(</span><span class="nb">list </span><span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">list </span><span class="mi">3</span><span class="p">))</span> <span class="c1">; =&gt; #f</span>
<span class="c1">;; Why it&#39;s #f? Because comparison between objects depends on their head-pointers.</span>
<span class="c1">;; These two lists are different objects, and they have different head-pointers.</span>

<span class="p">(</span><span class="nb">eq? </span><span class="ss">&#39;a</span> <span class="ss">&#39;a</span><span class="p">)</span> <span class="c1">; =&gt; #t</span>
<span class="c1">;; Symbols are the typical objects to compare with their head-pointers</span>

<span class="c1">;; eqv?</span>
<span class="c1">;; The difference between `eqv?&#39; and `eq&#39;:</span>
<span class="c1">;; You can compare numbers and characters with `eqv?&#39;</span>
<span class="c1">;; When you use `eqv?&#39; for any objects other than numbers&amp;characters, it&#39;s the</span>
<span class="c1">;; same with `eq?&#39;.</span>
<span class="p">(</span><span class="nb">eqv? </span><span class="mi">3</span> <span class="mi">3</span><span class="p">)</span>     <span class="c1">; =&gt; #t</span>
<span class="p">(</span><span class="nb">eqv? </span><span class="sc">#\c</span> <span class="sc">#\c</span><span class="p">)</span> <span class="c1">; =&gt; #t</span>
<span class="p">(</span><span class="nb">eqv? </span><span class="ss">&#39;a</span> <span class="ss">&#39;a</span><span class="p">)</span>   <span class="c1">; =&gt; #t</span>

<span class="c1">;; for collections use `equal?&#39;</span>
<span class="c1">;; `equal?&#39; will compare all the values in a collections type like record or list.</span>
<span class="c1">;; You can compare any objects with `equal?&#39; safely, but inefficiency.</span>
<span class="p">(</span><span class="nb">equal? </span><span class="p">(</span><span class="nb">list </span><span class="ss">&#39;a</span> <span class="ss">&#39;b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list </span><span class="ss">&#39;a</span> <span class="ss">&#39;b</span><span class="p">))</span> <span class="c1">; =&gt; #t</span>
<span class="p">(</span><span class="nb">equal? </span><span class="p">(</span><span class="nb">list </span><span class="ss">&#39;a</span> <span class="ss">&#39;b</span><span class="p">)</span> <span class="p">(</span><span class="nb">list </span><span class="ss">&#39;b</span> <span class="ss">&#39;a</span><span class="p">))</span> <span class="c1">; =&gt; #f</span>

<span class="c1">;; Choosing proper equal pred for you code, is one of the art in Scheme programming!</span>

<span class="p">(</span><span class="nb">eqv? </span><span class="s">&quot;abcd&quot;</span> <span class="s">&quot;abcd&quot;</span><span class="p">)</span> <span class="c1">; =&gt; unspecified</span>
<span class="c1">;; Obviously, strings are collections type, so...it&#39;s your EXECISE now!</span>

<span class="c1">;; Another EXECISE, what&#39;s the proper &#39;equal-pred&#39; for functions?</span>
<span class="p">(</span><span class="nf">what-to-use?</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">x</span><span class="p">))</span> <span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">x</span><span class="p">)))</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 5. Control Flow</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;;; Conditionals</span>

<span class="p">(</span><span class="k">if </span><span class="no">#t</span>               <span class="c1">; test expression</span>
    <span class="s">&quot;this is true&quot;</span>   <span class="c1">; then expression</span>
    <span class="s">&quot;this is false&quot;</span><span class="p">)</span> <span class="c1">; else expression</span>
					<span class="c1">; =&gt; &quot;this is true&quot;</span>

<span class="c1">;; In conditionals, all non-#f values are treated as true</span>
<span class="p">(</span><span class="nb">member </span><span class="ss">&#39;Groucho</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">Harpo</span> <span class="nv">Groucho</span> <span class="nv">Zeppo</span><span class="p">))</span> <span class="c1">; =&gt; &#39;(Groucho Zeppo)</span>
<span class="p">(</span><span class="k">if </span><span class="p">(</span><span class="nb">member </span><span class="ss">&#39;Groucho</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">Harpo</span> <span class="nv">Groucho</span> <span class="nv">Zeppo</span><span class="p">))</span>
    <span class="ss">&#39;yep</span>
    <span class="ss">&#39;nope</span><span class="p">)</span>
					<span class="c1">; =&gt; &#39;yep</span>

<span class="c1">;; `cond&#39; chains a series of tests to select a result</span>
<span class="p">(</span><span class="k">cond </span><span class="p">((</span><span class="nb">&gt; </span><span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;wrong!&quot;</span><span class="p">))</span>
      <span class="p">((</span><span class="nb">&lt; </span><span class="mi">2</span> <span class="mi">2</span><span class="p">)</span> <span class="p">(</span><span class="nf">error</span> <span class="s">&quot;wrong again!&quot;</span><span class="p">))</span>
      <span class="p">(</span><span class="k">else </span><span class="ss">&#39;ok</span><span class="p">))</span> <span class="c1">; =&gt; &#39;ok</span>

<span class="c1">;;; Pattern Matching</span>
<span class="c1">;; For Racket users:</span>
<span class="p">(</span><span class="nf">require</span> <span class="nv">racket/match</span><span class="p">)</span> <span class="c1">; use match module</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fizzbuzz?</span> <span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">match</span> <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nb">remainder </span><span class="nv">n</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">remainder </span><span class="nv">n</span> <span class="mi">5</span><span class="p">))</span>
    <span class="p">((</span><span class="nb">list </span><span class="mi">0</span> <span class="mi">0</span><span class="p">)</span> <span class="ss">&#39;fizzbuzz</span><span class="p">)</span>
    <span class="p">((</span><span class="nb">list </span><span class="mi">0</span> <span class="nv">_</span><span class="p">)</span> <span class="ss">&#39;fizz</span><span class="p">)</span>
    <span class="p">((</span><span class="nb">list </span><span class="nv">_</span> <span class="mi">0</span><span class="p">)</span> <span class="ss">&#39;buzz</span><span class="p">)</span>
    <span class="p">(</span><span class="k">else </span><span class="no">#f</span><span class="p">)))</span>

<span class="c1">;; For Guile users:</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">ice-9</span> <span class="nv">match</span><span class="p">))</span> <span class="c1">; use match module</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">fizzbuzz?</span> <span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">match</span> <span class="p">(</span><span class="nb">list </span><span class="p">(</span><span class="nb">remainder </span><span class="nv">n</span> <span class="mi">3</span><span class="p">)</span> <span class="p">(</span><span class="nb">remainder </span><span class="nv">n</span> <span class="mi">5</span><span class="p">))</span>
    <span class="p">((</span><span class="mi">0</span> <span class="mi">0</span><span class="p">)</span> <span class="ss">&#39;fizzbuzz</span><span class="p">)</span>
    <span class="p">((</span><span class="mi">0</span> <span class="nv">_</span><span class="p">)</span> <span class="ss">&#39;fizz</span><span class="p">)</span>
    <span class="p">((</span><span class="nf">_</span> <span class="mi">0</span><span class="p">)</span> <span class="ss">&#39;buzz</span><span class="p">)</span>
    <span class="p">(</span><span class="k">else </span><span class="no">#f</span><span class="p">)))</span>

<span class="p">(</span><span class="nf">fizzbuzz?</span> <span class="mi">15</span><span class="p">)</span> <span class="c1">; =&gt; &#39;fizzbuzz</span>
<span class="p">(</span><span class="nf">fizzbuzz?</span> <span class="mi">37</span><span class="p">)</span> <span class="c1">; =&gt; #f</span>

<span class="c1">;;; Loops</span>

<span class="c1">;; Looping can be done through (tail-) recursion</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">lp</span> <span class="nv">i</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;i=~a\n&quot;</span> <span class="nv">i</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">lp</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">i</span><span class="p">))))</span>
<span class="p">(</span><span class="nf">lp</span> <span class="mi">5</span><span class="p">)</span> <span class="c1">; =&gt; i=5, i=6, ...</span>

<span class="c1">;; Similarly, with a named let</span>
<span class="p">(</span><span class="k">let </span><span class="nv">lp</span> <span class="p">((</span><span class="nf">i</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">when</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span> <span class="mi">10</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;i=~a\n&quot;</span> <span class="nv">i</span><span class="p">)</span>
    <span class="p">(</span><span class="nf">lp</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">i</span><span class="p">))))</span> <span class="c1">; =&gt; i=0, i=1, ...</span>

<span class="c1">;; how to get a range? just like range(0, 9)?</span>
<span class="c1">;; the original &#39;iota&#39; only accept one para</span>
<span class="p">(</span><span class="nf">iota</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">; ==&gt; (0 1 2 3 4 5 6 7 8 9)</span>
<span class="c1">;; the &#39;iota&#39; in srfi-1 was extended </span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">srfi</span> <span class="nv">srfi-1</span><span class="p">))</span>
<span class="c1">;; #&lt;procedure iota (count #:optional start step)&gt;</span>
<span class="p">(</span><span class="nf">iota</span> <span class="mi">5</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">; =&gt; (10 11 12 13 14) </span>
<span class="c1">;; means from 10 count 5 times, each step +1 (plus one is default)</span>
<span class="p">(</span><span class="nf">iota</span> <span class="mi">5</span> <span class="mi">10</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">; =&gt; (10 12 14 16 18)</span>
<span class="c1">;; from 10 count 5 times, each step +2</span>
<span class="c1">;; If you need a Python like range(5, 10) ==&gt; (5 6 7 8 9), try:</span>
<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">range</span> <span class="nv">from</span> <span class="nv">to</span><span class="p">)</span> <span class="p">(</span><span class="nb">map </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">x</span><span class="p">)</span> <span class="p">(</span><span class="nb">+ </span><span class="nv">from</span> <span class="nv">x</span><span class="p">))</span> <span class="p">(</span><span class="nf">iota</span> <span class="p">(</span><span class="nb">- </span><span class="nv">to</span> <span class="nv">from</span><span class="p">))))</span>
<span class="c1">;; EXECISE: you may find this &#39;range&#39; implementation is not so good,</span>
<span class="c1">;;          please optimize it if you can.</span>
<span class="p">(</span><span class="nf">range</span> <span class="mi">5</span> <span class="mi">10</span><span class="p">)</span> <span class="c1">; =&gt; (5 6 7 8 9)</span>

<span class="c1">;; how to do iteration?</span>
<span class="p">(</span><span class="nb">for-each </span><span class="nv">display</span> <span class="o">&#39;</span><span class="p">(</span><span class="mi">1</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span> <span class="mi">5</span><span class="p">))</span>
<span class="c1">;; =&gt; 12345</span>
<span class="p">(</span><span class="nb">for-each </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;i=~a\n&quot;</span> <span class="nv">i</span><span class="p">))</span>
	  <span class="p">(</span><span class="nf">iota</span> <span class="mi">10</span><span class="p">))</span> <span class="c1">; =&gt; i=0, i=1, ...</span>
<span class="p">(</span><span class="nb">for-each </span><span class="p">(</span><span class="k">lambda </span><span class="p">(</span><span class="nf">i</span><span class="p">)</span> <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;i=~a\n&quot;</span> <span class="nv">i</span><span class="p">))</span>
	  <span class="p">(</span><span class="nf">range</span> <span class="mi">5</span> <span class="mi">10</span><span class="p">))</span> <span class="c1">; =&gt; i=5, i=6, ...</span>

<span class="c1">;;; Iteration Over Other Sequences</span>
<span class="c1">;; `for&#39; allows iteration over many other kinds of sequences:</span>
<span class="c1">;; lists, vectors, strings, sets, hash tables, etc...</span>
<span class="p">(</span><span class="nb">for-each </span><span class="nv">display</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">l</span> <span class="nv">i</span> <span class="nv">s</span> <span class="nv">t</span><span class="p">))</span>
<span class="c1">;; =&gt; list</span>
<span class="p">(</span><span class="k">define </span><span class="nv">vector-for-each</span> <span class="p">(</span><span class="nf">@</span> <span class="p">(</span><span class="nf">rnrs</span><span class="p">)</span> <span class="nv">vector-for-each</span><span class="p">))</span>
<span class="c1">;; export vector-for-each from rnrs only</span>
<span class="p">(</span><span class="nf">vector-for-each</span> <span class="nv">display</span> <span class="o">#</span><span class="p">(</span><span class="nv">v</span> <span class="nv">e</span> <span class="nv">c</span> <span class="nv">t</span> <span class="nv">o</span> <span class="nv">r</span><span class="p">))</span>
<span class="c1">;; =&gt; vector</span>
<span class="p">(</span><span class="nf">string-for-each</span> <span class="nv">display</span> <span class="s">&quot;string&quot;</span><span class="p">)</span>
<span class="c1">;; =&gt; string</span>
<span class="c1">;;; More Iterations</span>
<span class="p">(</span><span class="k">do </span><span class="p">((</span><span class="nf">i</span> <span class="mi">10</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">i</span><span class="p">))</span> <span class="p">(</span><span class="nf">j</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">x</span> <span class="nv">y</span> <span class="nv">z</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr </span><span class="nv">j</span><span class="p">)))</span> 
    <span class="p">((</span><span class="nb">null? </span><span class="nv">j</span><span class="p">))</span> <span class="c1">; if j is &#39;(), just end the loop</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;~a:~a &quot;</span> <span class="nv">i</span> <span class="p">(</span><span class="nb">car </span><span class="nv">j</span><span class="p">)))</span>
					<span class="c1">; =&gt; 0:x 1:y 2:z</span>

<span class="c1">;;; Exceptions</span>

<span class="c1">;; To catch exceptions, use the &#39;catch&#39; form</span>
<span class="p">(</span><span class="nf">catch</span> <span class="ss">&#39;my-error</span> 
  <span class="p">(</span><span class="k">lambda </span><span class="p">()</span> <span class="p">(</span><span class="nf">throw</span> <span class="ss">&#39;my-error</span><span class="p">))</span>
  <span class="p">(</span><span class="k">lambda </span><span class="nv">e</span> <span class="p">(</span><span class="nb">display </span><span class="s">&quot;oh~my error!\n&quot;</span><span class="p">)))</span>
					<span class="c1">; =&gt; oh~my error!</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 6. Mutation</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Use `set!&#39; to assign a new value to an existing variable</span>
<span class="p">(</span><span class="k">define </span><span class="nv">n</span> <span class="mi">5</span><span class="p">)</span>
<span class="p">(</span><span class="k">set! </span><span class="nv">n</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">n</span><span class="p">))</span>
<span class="nv">n</span> <span class="c1">; =&gt; 6</span>

<span class="c1">;; Use fluid for explicitly mutable values</span>
<span class="p">(</span><span class="k">define </span><span class="nv">n*</span> <span class="p">(</span><span class="nf">make-fluid</span> <span class="mi">5</span><span class="p">))</span>
<span class="p">(</span><span class="nf">fluid-set!</span> <span class="nv">n*</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="p">(</span><span class="nf">fluid-ref</span> <span class="nv">n*</span><span class="p">)))</span>
<span class="p">(</span><span class="nf">fluid-ref</span> <span class="nv">n*</span><span class="p">)</span> <span class="c1">; =&gt; 6</span>

<span class="c1">;; Many Guile datatypes are immutable (pairs, lists, etc), some come in</span>
<span class="c1">;; both mutable and immutable flavors (strings, vectors, hash tables,</span>
<span class="c1">;; etc...)</span>

<span class="c1">;; Use `vector&#39; or `make-vector&#39; to create mutable vectors</span>
<span class="p">(</span><span class="k">define </span><span class="nv">vec</span> <span class="p">(</span><span class="nb">vector </span><span class="mi">2</span> <span class="mi">2</span> <span class="mi">3</span> <span class="mi">4</span><span class="p">))</span>
<span class="p">(</span><span class="k">define </span><span class="nv">wall</span> <span class="p">(</span><span class="nb">make-vector </span><span class="mi">100</span> <span class="ss">&#39;bottle-of-beer</span><span class="p">))</span>
<span class="c1">;; Use vector-set! to update a slot</span>
<span class="p">(</span><span class="nb">vector-set! </span><span class="nv">vec</span> <span class="mi">0</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nb">vector-set! </span><span class="nv">wall</span> <span class="mi">99</span> <span class="ss">&#39;down</span><span class="p">)</span>
<span class="nv">vec</span> <span class="c1">; =&gt; #(1 2 3 4)</span>

<span class="c1">;; Create an empty mutable hash table and manipulate it</span>
<span class="p">(</span><span class="k">define </span><span class="nv">m3</span> <span class="p">(</span><span class="nf">make-hash-table</span><span class="p">))</span>
<span class="p">(</span><span class="nf">hash-set!</span> <span class="nv">m3</span> <span class="ss">&#39;a</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-set!</span> <span class="nv">m3</span> <span class="ss">&#39;b</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-set!</span> <span class="nv">m3</span> <span class="ss">&#39;c</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">hash-ref</span> <span class="nv">m3</span> <span class="ss">&#39;a</span><span class="p">)</span>   <span class="c1">; =&gt; 1</span>
<span class="p">(</span><span class="nf">hash-ref</span> <span class="nv">m3</span> <span class="ss">&#39;d</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">; =&gt; 0</span>
<span class="p">(</span><span class="nf">hash-remove!</span> <span class="nv">m3</span> <span class="ss">&#39;a</span><span class="p">)</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 7. Modules</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Modules let you organize code into multiple files and reusable</span>
<span class="c1">;; libraries; Make sure put all the module code in one file, since </span>
<span class="c1">;; the modules split as files. And the module name should be same </span>
<span class="c1">;; with the filename, say, module named (my-cake) is &#39;my-cake.scm&#39;,</span>
<span class="c1">;; and module named (mods my-cake) is &#39;mods/my-cake.scm&#39;,</span>
<span class="c1">;; (mods submods my-cake) ==&gt; &#39;mods/submods/my-cake.scm&#39;.</span>
<span class="c1">;; ---begin my-cake.scm---</span>
<span class="p">(</span><span class="nf">define-module</span> <span class="p">(</span><span class="nf">my-cake</span><span class="p">)</span> <span class="c1">; define a `cake&#39; module based on racket/base</span>
  <span class="o">#</span><span class="nv">:use-module</span> <span class="p">(</span><span class="nf">ice-9</span> <span class="nv">format</span><span class="p">)</span> <span class="c1">; the pre-requisition of current module</span>
  <span class="o">#</span><span class="nv">:export</span> <span class="p">(</span><span class="nf">print-cake</span><span class="p">))</span> <span class="c1">; function exported by the module</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">show</span> <span class="nv">fmt</span> <span class="nv">n</span> <span class="nv">ch</span><span class="p">)</span> <span class="c1">; internal function</span>
  <span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="nv">fmt</span> <span class="p">(</span><span class="nb">make-string </span><span class="nv">n</span> <span class="nv">ch</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">newline</span><span class="p">))</span>

<span class="p">(</span><span class="k">define </span><span class="p">(</span><span class="nf">print-cake</span> <span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">show</span> <span class="s">&quot;   ~a   &quot;</span> <span class="nv">n</span> <span class="sc">#\.</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">show</span> <span class="s">&quot; .-~a-. &quot;</span> <span class="nv">n</span> <span class="o">#</span><span class="err">\</span><span class="nv">|</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">show</span> <span class="s">&quot; | ~a | &quot;</span> <span class="nv">n</span> <span class="sc">#\space</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">show</span> <span class="s">&quot;---~a---&quot;</span> <span class="nv">n</span> <span class="sc">#\-</span><span class="p">))</span>
<span class="c1">;; --end my-cake.scm---</span>

<span class="c1">;; Be sure that the path of &#39;my-cake.scm&#39; is in your current </span>
<span class="c1">;; %load-path list. Use `use-modules&#39; to get all `provide&#39;d names </span>
<span class="c1">;; from a module.</span>
<span class="p">(</span><span class="nf">use-modules</span> <span class="p">(</span><span class="nf">my-cake</span><span class="p">))</span> <span class="c1">; the &#39; is for a local submodule</span>
<span class="p">(</span><span class="nf">print-cake</span> <span class="mi">3</span><span class="p">)</span>
					<span class="c1">; (show &quot;~a&quot; 1 #\A) ; =&gt; error, `show&#39; was not exported</span>

<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 8. Classes and Objects</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; TODO</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span class="c1">;; 9. Macros</span>
<span class="c1">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span class="c1">;; Macros let you extend the syntax of the language</span>

<span class="c1">;; Let&#39;s add a while loop</span>
<span class="p">(</span><span class="nf">define-syntax-rule</span> <span class="p">(</span><span class="nf">while</span> <span class="nv">condition</span> <span class="nv">body</span> <span class="o">...</span><span class="p">)</span>
  <span class="p">(</span><span class="k">let </span><span class="nv">loop</span> <span class="p">()</span>
    <span class="p">(</span><span class="nf">when</span> <span class="nv">condition</span>
      <span class="nv">body</span> <span class="o">...</span>
      <span class="p">(</span><span class="nf">loop</span><span class="p">))))</span>

<span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">i</span> <span class="mi">0</span><span class="p">))</span>
  <span class="p">(</span><span class="nf">while</span> <span class="p">(</span><span class="nb">&lt; </span><span class="nv">i</span>  <span class="mi">10</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">display </span><span class="nv">i</span><span class="p">)</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">i</span> <span class="p">(</span><span class="mi">1</span><span class="nv">+</span> <span class="nv">i</span><span class="p">))))</span>

<span class="c1">;; Macros are hygienic, you cannot clobber existing variables!</span>
<span class="p">(</span><span class="nf">define-syntax-rule</span> <span class="p">(</span><span class="nf">swap!</span> <span class="nv">x</span> <span class="nv">y</span><span class="p">)</span> <span class="c1">; -! is idomatic for mutation</span>
  <span class="p">(</span><span class="k">let </span><span class="p">((</span><span class="nf">tmp</span> <span class="nv">x</span><span class="p">))</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">x</span> <span class="nv">y</span><span class="p">)</span>
    <span class="p">(</span><span class="k">set! </span><span class="nv">y</span> <span class="nv">tmp</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define </span><span class="nv">tmp</span> <span class="mi">1</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">a</span> <span class="mi">2</span><span class="p">)</span>
<span class="p">(</span><span class="k">define </span><span class="nv">b</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">(</span><span class="nf">swap!</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span>
<span class="p">(</span><span class="nf">format</span> <span class="no">#t</span> <span class="s">&quot;tmp = ~a; a = ~a; b = ~a\n&quot;</span> <span class="nv">tmp</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="c1">; tmp is unaffected</span>

<span class="c1">;; But they are still code transformations, for example:</span>
<span class="p">(</span><span class="nf">define-syntax-rule</span> <span class="p">(</span><span class="nf">bad-while</span> <span class="nv">condition</span> <span class="nv">body</span> <span class="o">...</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">when</span> <span class="nv">condition</span>
    <span class="nv">body</span> <span class="o">...</span>
    <span class="p">(</span><span class="nf">bad-while</span> <span class="nv">condition</span> <span class="nv">body</span> <span class="o">...</span><span class="p">)))</span>
<span class="c1">;; this macro is broken: it generates infinite code, if you try to use</span>
<span class="c1">;; it, the compiler will get in an infinite loop</span>

<span class="p">(</span><span class="nf">quit</span><span class="p">)</span> <span class="c1">;; exit repl</span></pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4b28dc4" class="outline-2">
<h2 id="org4b28dc4"><span class="section-number-2">8</span> 용어</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-org2403aeb" class="outline-3">
<h3 id="org2403aeb"><span class="section-number-3">8.1</span> 테스트케이스 <a id="org12715a3"></a></h3>
<div class="outline-text-3" id="text-8-1">
<p>
CodeScroll 이 생성하는 함수별 테스트를 의미한다. 
</p>
</div>
</div>
<div id="outline-container-org09636c5" class="outline-3">
<h3 id="org09636c5"><span class="section-number-3">8.2</span> scheme 파일 <a id="orgc36c849"></a></h3>
<div class="outline-text-3" id="text-8-2">
<p>
테스트 데이터를 생성하는 scheme 테스트 스크립트를 의미한다. 
</p>
</div>
</div>
<div id="outline-container-org11d965f" class="outline-3">
<h3 id="org11d965f"><span class="section-number-3">8.3</span> testsc 홈 <a id="orgcfddd3b"></a></h3>
</div>
<div id="outline-container-orgebef132" class="outline-3">
<h3 id="orgebef132"><span class="section-number-3">8.4</span> 테스트 변수 <a id="org905da14"></a></h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2017-06-09 금 21:39</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
