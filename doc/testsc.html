<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2017-06-10 토 18:46 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>testsc - 동적 시험 라이브러리</title>
<meta name="generator" content="Org mode" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<link rel="stylesheet" type="text/css" href="styles/pygments.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2017 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">testsc - 동적 시험 라이브러리</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org4baf628">1. 기본 사항</a>
<ul>
<li><a href="#org92f4107">1.1. 무엇을 하는 것인가?</a></li>
<li><a href="#org4cbda90">1.2. 장점</a>
<ul>
<li><a href="#orgdad31c4">1.2.1. 테스트 데이터 조합 가능</a></li>
<li><a href="#org4409afd">1.2.2. 다수의 테스트케이스 생성</a></li>
<li><a href="#orgfcaccf8">1.2.3. 테스트 데이터 재활용</a></li>
</ul>
</li>
<li><a href="#org3de011a">1.3. 단점</a></li>
</ul>
</li>
<li><a href="#orgced449f">2. 사용방법 </a>
<ul>
<li><a href="#org8317cf9">2.1. <b>testsc</b> 초기화</a>
<ul>
<li><a href="#org61fc26c">2.1.1. testsc 헤더파일 추가 </a></li>
<li><a href="#org5c311fb">2.1.2. 사용자 코드 작성 </a></li>
<li><a href="#org9b0eef0">2.1.3. 호출전 코드 및 stub 코드 작성 </a></li>
</ul>
</li>
<li><a href="#org88196a7">2.2. scheme 파일 작성</a></li>
<li><a href="#orgf15f1e4">2.3. CodeScroll 테스트 케이스 빌드 및 커버리지 평가</a>
<ul>
<li><a href="#org455487f">2.3.1. 포함 파일 추가</a></li>
<li><a href="#org59791d9">2.3.2. 링크 라이브러리 추가</a></li>
<li><a href="#org2ed6495">2.3.3. 빌드 및 테스트 케이스를 실행한다.</a></li>
<li><a href="#org0a0b031">2.3.4. 커버리지 평가</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org07ec3f8">3. scheme 파일 작성 </a>
<ul>
<li><a href="#orgce57cce">3.1. 테스트 변수 식별</a></li>
<li><a href="#org12dbb57">3.2. 테스트 데이터 확인</a></li>
<li><a href="#org93f2153">3.3. 테스트 변수 선언</a></li>
<li><a href="#orga50fc98">3.4. 테스트 변수에 테스트 데이터를 설정</a></li>
<li><a href="#orgdac48ea">3.5. 예제 </a>
<ul>
<li><a href="#org8a324b4">3.5.1. 예제 1 - 파라미터 조합</a></li>
<li><a href="#org7960187">3.5.2. 예제 2 - 수치 연산</a></li>
<li><a href="#org5581fd3">3.5.3. 예제 3 - 리스트 활용</a></li>
<li><a href="#org600f1d2">3.5.4. 예제 4 - testsc 구조체  </a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#orge563002">4. 👍 엄지의 법칙</a>
<ul>
<li><a href="#org0b48f47">4.1. 비관리 코드 활용</a>
<ul>
<li><a href="#org37f8f93">4.1.1. 일괄 비관리 코드 전환</a></li>
<li><a href="#orga3f5dee">4.1.2. unittest 내부의 c 파일 편집</a></li>
</ul>
</li>
<li><a href="#org21e1a06">4.2. CodeScroll 의 테스트데이터와 같이 사용</a></li>
<li><a href="#org2c8d696">4.3. testsc 확장 모듈</a>
<ul>
<li><a href="#orgcadb6fc">4.3.1. 구조체 테스트 데이터 생성</a></li>
<li><a href="#org994aab5">4.3.2. 테스트 데이터를 파일에서 가져오게 한다.</a></li>
<li><a href="#orgfae2e00">4.3.3. 테스트 데이터를 프로그래밍 할 수 있게 한다.</a></li>
<li><a href="#org5d0407b">4.3.4. 라이브러리를 활용한다.</a></li>
</ul>
</li>
<li><a href="#orgbf47c7c">4.4. 정의 파일 활용</a>
<ul>
<li><a href="#orge40361a">4.4.1. enum 타입 및 공통 상수 값 정의</a></li>
</ul>
</li>
<li><a href="#org7b5df65">4.5. testsc 수정시</a></li>
<li><a href="#org1c2686b">4.6. 표준 출력 redirection</a></li>
<li><a href="#orgc2af52c">4.7. 디버깅 </a>
<ul>
<li><a href="#org9dae745">4.7.1. 테스트 케이스 C 코딩 오류</a></li>
<li><a href="#org553575a">4.7.2. scheme 파일 오류</a></li>
</ul>
</li>
<li><a href="#org2dcf820">4.8. testsc 구조체</a></li>
</ul>
</li>
<li><a href="#orgf2787cd">5. Reference </a>
<ul>
<li><a href="#org8b14b20">5.1. C API - </a>
<ul>
<li><a href="#orgac9d3fb">5.1.1. testsc.h</a></li>
<li><a href="#org5dbf255">5.1.2. testsc_ext.h</a></li>
</ul>
</li>
<li><a href="#org6782cc9">5.2. scheme API - </a>
<ul>
<li><a href="#orgbcf2367">5.2.1. util.scm</a></li>
<li><a href="#orgcbbe11e">5.2.2. testsc.c</a></li>
</ul>
</li>
<li><a href="#org1898497">5.3. 추가 C excention 구현</a>
<ul>
<li><a href="#org2512a3c">5.3.1. 구조체 테스트 데이터 생성</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org6c250a4">6. scheme 문법 </a>
<ul>
<li><a href="#org3499452">6.1. scheme 파일 에디터</a></li>
<li><a href="#orgfcd37a7">6.2. 15분 만에 scheme 배우기</a></li>
</ul>
</li>
<li><a href="#org660375c">7. 용어</a>
<ul>
<li><a href="#org9058207">7.1. 테스트케이스 </a></li>
<li><a href="#org4c89d47">7.2. scheme 파일 </a></li>
<li><a href="#org96dcafe">7.3. testsc 홈 </a></li>
<li><a href="#orgc1f8abb">7.4. 테스트 변수 </a></li>
<li><a href="#orgb034d8c">7.5. 테스트 데이터 </a></li>
<li><a href="#orgfeb8470">7.6. 테스트 번호 </a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-org4baf628" class="outline-2">
<h2 id="org4baf628"><span class="section-number-2">1</span> 기본 사항</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-org92f4107" class="outline-3">
<h3 id="org92f4107"><span class="section-number-3">1.1</span> 무엇을 하는 것인가?</h3>
<div class="outline-text-3" id="text-1-1">
<p>
동적 시험 시 필요한 <a href="#org3576f09">테스트 변수</a>를 파일로 부터 읽어 오는 라이브러리이다.
파일의 형식은 scheme 스트립트이다. 간단한 데이터의 정의 뿐만 아니라
프로그래밍을 통한 데이터의 생성이 가능하다.  
</p>


<div class="figure">
<p><img src="concept.png" alt="concept.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org4cbda90" class="outline-3">
<h3 id="org4cbda90"><span class="section-number-3">1.2</span> 장점</h3>
<div class="outline-text-3" id="text-1-2">
</div><div id="outline-container-orgdad31c4" class="outline-4">
<h4 id="orgdad31c4"><span class="section-number-4">1.2.1</span> 테스트 데이터 조합 가능</h4>
<div class="outline-text-4" id="text-1-2-1">
<p>
<a href="#org3576f09">테스트 변수</a>의 범위를 이용하여 데이터 조합을 생성할 수 있다. 가령 인자로
3개의 enum 타입을 사용하는 함수의 경우 각 파라미터가 가지는 값들의 범위를
이용하여 존재가능한 모든 파라미터 데이터 조합을 생성할 수 있다. 
</p>
</div>
</div>
<div id="outline-container-org4409afd" class="outline-4">
<h4 id="org4409afd"><span class="section-number-4">1.2.2</span> 다수의 테스트케이스 생성</h4>
<div class="outline-text-4" id="text-1-2-2">
<p>
테스트 데이터가 많을 경우 CodeScroll 이 제공하는 UI 를 통하여 데이터를
입력하기가 불편하다. 프로그래밍을 통하여 다수의 데이터도 간편하게 생성이
가능하다. 
</p>
</div>
</div>
<div id="outline-container-orgfcaccf8" class="outline-4">
<h4 id="orgfcaccf8"><span class="section-number-4">1.2.3</span> 테스트 데이터 재활용</h4>
<div class="outline-text-4" id="text-1-2-3">
<p>
Codescroll 에서 같은 <a href="#orge3cc677">scheme 파일</a>을 읽도록 설정하면 테스트 데이터를
재활용할 수 있다. 구조가 같은 함수가 다수 있을 때 사용하면 편리하다. 
라이브러리 구성이 간단하여 타겟환경 테스트를 수행할 때도 포팅을 하여 사용할
수 있다. 
</p>
</div>
</div>
</div>
<div id="outline-container-org3de011a" class="outline-3">
<h3 id="org3de011a"><span class="section-number-3">1.3</span> 단점</h3>
<div class="outline-text-3" id="text-1-3">
<p>
scheme 언어에 대하여 지식이 있어야 사용 가능하다. 
<a href="#orgdf04e2f">scheme 문법 참조</a>
</p>

<hr>
</div>
</div>
</div>

<div id="outline-container-orgced449f" class="outline-2">
<h2 id="orgced449f"><span class="section-number-2">2</span> 사용방법 <a id="org6b58f61"></a></h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org8317cf9" class="outline-3">
<h3 id="org8317cf9"><span class="section-number-3">2.1</span> <b>testsc</b> 초기화</h3>
<div class="outline-text-3" id="text-2-1">
<p>
다음에 나오는 C/Scheme 함수의 상세 내용은 <a href="#orge905670">5</a> 을 참조한다. 
</p>
</div>
<div id="outline-container-org61fc26c" class="outline-4">
<h4 id="org61fc26c"><span class="section-number-4">2.1.1</span> testsc 헤더파일 추가 <a id="org8eb1c60"></a></h4>
<div class="outline-text-4" id="text-2-1-1">
<p>
<b>유닛테스트</b> 더블클릭 &gt;&gt;  <b>테스트 정보</b> &gt;&gt; <b>테스트 전역 코드</b>
</p>

<p>
<b>testsc.h</b> 파일을 포함하도록 한다. 
</p>
<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #483d8b;">#include</span> <span style="color: #8b2252;">"testsc.h"</span>
</pre>
</div>


<div class="figure">
<p><img src="u:/orgdir/testsc/testglobalcode.png" alt="testglobalcode.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org5c311fb" class="outline-4">
<h4 id="org5c311fb"><span class="section-number-4">2.1.2</span> 사용자 코드 작성 <a id="orgbbd0ff2"></a></h4>
<div class="outline-text-4" id="text-2-1-2">
<ul class="org-ul">
<li><p>
<b>유닛테스트</b> 더블클릭 &gt;&gt;  <b>테스트 정보</b> &gt;&gt; <b>사용자 코드</b>
테스트스크립트를 로딩하는 부분으로써 다음과 같이 호출한다. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">testsc_init(CS_TESTCASENO(), <span style="color: #8b2252;">"(testsc-require mb/t-9)"</span>, <span style="color: #8b2252;">"/testsc/home/"</span>);
</pre>
</div>

<p>
<a href="#org62838d7">No description for this link</a> 를 호출하여 <b>testsc</b> 를 초기화 한다. 첫번째 파라미터는
CS_TESTCASENO()으로써 <b>testsc</b> 으로 <a href="#org721e067">테스트 번호</a>를 전달한다. 두번째
파라미터는 실행할 scheme 명령이다. 마지막 파라미터는 <a href="#org19399f3">testsc 홈</a>경로가 된다. 
</p>

<ul class="org-ul">
<li>참조 : <a href="#org62838d7">No description for this link</a> , <a href="#org77c1f07">No description for this link</a> , <a href="#org578235e">No description for this link</a></li>
</ul></li>
</ul>



<div class="figure">
<p><img src="u:/orgdir/testsc/usercode.png" alt="usercode.png" />
</p>
</div>
</div>
</div>

<div id="outline-container-org9b0eef0" class="outline-4">
<h4 id="org9b0eef0"><span class="section-number-4">2.1.3</span> 호출전 코드 및 stub 코드 작성 <a id="org8fbc4b6"></a></h4>
<div class="outline-text-4" id="text-2-1-3">
</div><ul class="org-ul"><li><a id="org458cbb9"></a>호출 전 코드<br /><div class="outline-text-5" id="text-org458cbb9">
<ul class="org-ul">
<li><p>
<b>유닛테스트</b> 더블클릭 &gt;&gt;  <b>테스트 정보</b> &gt;&gt; <b>테스트 대상 함수</b> &gt;&gt; <b>호출 전 코드</b>
</p>

<p>
테스트스크립트에서 읽은 값을 codescroll <a href="#org3576f09">테스트 변수</a>에 설정한다. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">iValue1    = testsc_ivalue(<span style="color: #8b2252;">"value1"</span>) ; 
dValue2    = testsc_dvalue(<span style="color: #8b2252;">"value2"</span>) ; 
strValue3  = testsc_strvalue(<span style="color: #8b2252;">"value3"</span>) ;
pValue4    = (<span style="color: #228b22;">track_t</span>*)testsc_ext_get(0) ; 
</pre>
</div></li>
</ul>
</div></li>

<li><a id="org47331e2"></a>stub 코드 작성<br /><div class="outline-text-5" id="text-org47331e2">
<p>
CodeScroll은  stub 의 동작을 제어하기 위한 변수는 생성을 하지 아니한다.
<a href="#orge3cc677">scheme 파일</a>에서 stub을 제어할 변수를 설정하고 stub 구현부에서 <a href="#org7f06562">testsc C API</a>
관련 함수를 이용하여 <a href="#org3576f09">테스트 변수</a>값을 가져와 사용할 수 있다. 
테스트전역 코드에 <b>testsc.h</b> 파일이 포함되어 있기 때문에 별도의 선언 없이
<a href="#org7f06562">testsc C API</a> 관련 함수를 사용할 수 있다.  
</p>
</div></li></ul>
</div>
</div>

<div id="outline-container-org88196a7" class="outline-3">
<h3 id="org88196a7"><span class="section-number-3">2.2</span> <a href="#orge3cc677">scheme 파일</a> 작성</h3>
<div class="outline-text-3" id="text-2-2">
<p>
<a href="#orgbbd0ff2">testsc_init 호출</a>은 테스트 번호를 설정한 후 <a href="#orge3cc677">scheme 파일</a>을
실행(evaluation)한다. <a href="#orge3cc677">scheme 파일</a>이 실행될 때 <a href="#org721e067">테스트 번호</a>에 따라
<a href="#org3576f09">테스트 변수</a>에 <a href="#org4ce0003">테스트 데이터</a>를 설정한다.   
</p>

<p>
<a href="#orge3cc677">scheme 파일</a> 작성법에 대한 상세한 내용은 <a href="#org806da25">3</a> 부분을 참조한다. 
</p>
</div>
</div>

<div id="outline-container-orgf15f1e4" class="outline-3">
<h3 id="orgf15f1e4"><span class="section-number-3">2.3</span> CodeScroll <a href="#orga906361">테스트 케이스</a> 빌드 및 커버리지 평가</h3>
<div class="outline-text-3" id="text-2-3">
</div><div id="outline-container-org455487f" class="outline-4">
<h4 id="org455487f"><span class="section-number-4">2.3.1</span> 포함 파일 추가</h4>
<div class="outline-text-4" id="text-2-3-1">
<p>
<a href="#org19399f3">testsc 홈</a> 을 포함 디렉토리에 추가한다. 
</p>
</div>
</div>
<div id="outline-container-org59791d9" class="outline-4">
<h4 id="org59791d9"><span class="section-number-4">2.3.2</span> 링크 라이브러리 추가</h4>
<div class="outline-text-4" id="text-2-3-2">
<p>
<a href="#org19399f3">testsc 홈</a> 을 링크 디렉토리에 추가한다. 
링크할 라이브러리를 추가한다. 
</p>
<blockquote>
<p>
-L/testsc -ltestsc
</p>
</blockquote>
</div>
</div>
<div id="outline-container-org2ed6495" class="outline-4">
<h4 id="org2ed6495"><span class="section-number-4">2.3.3</span> 빌드 및 <a href="#orga906361">테스트 케이스</a>를 실행한다.</h4>
<div class="outline-text-4" id="text-2-3-3">
<p>
실행결과로 생성되는 커버리지를 참조하여 추가가 필요한 <a href="#org3576f09">테스트 변수</a>값을
<a href="#orge3cc677">scheme 파일</a>에 설정한다.  CodeScroll 의 사용자 인터페이스를 통하여 값을
설정하는 것 보다 빠르게 커버리지를 올릴 수 있다.  
다음 파일은 <a href="#orga906361">테스트케이스</a>가 실행하면서 출력하는 것을 저장하는 파일이다. 
</p>

<ul class="org-ul">
<li>testsc-stderr.txt : <a href="#org19399f3">testsc 홈</a> 폴더 아래 위치한다. <a href="#orga906361">테스트케이스</a>가
실행하면서 출력하는 표준에러 출력을 저장한다.</li>

<li>testsc-stdout.txt : <a href="#org19399f3">testsc 홈</a> 폴더 아래 위치한다. <a href="#orga906361">테스트케이스</a>가
실행하면서 출력하는 표준출력 및 <a href="#org402989e">No description for this link</a> 출력을 저장한다.</li>
</ul>
</div>
</div>

<div id="outline-container-org0a0b031" class="outline-4">
<h4 id="org0a0b031"><span class="section-number-4">2.3.4</span> 커버리지 평가</h4>
<div class="outline-text-4" id="text-2-3-4">
<p>
테스트결과를 평가한 후 커버가 아니되는 분기를 확인하여 추가적으로
테스트데이터를 생성한다. CodeScroll에 추가적으로 입력 하는 부분 없이 <a href="#orge3cc677">scheme
파일</a>을 수정하여 테스트데이터를 생성할 수 있다. 
</p>

<hr>
</div>
</div>
</div>
</div>

<div id="outline-container-org07ec3f8" class="outline-2">
<h2 id="org07ec3f8"><span class="section-number-2">3</span> <a href="#orge3cc677">scheme 파일</a> 작성 <a id="org4e2f878"></a> <a id="org806da25"></a></h2>
<div class="outline-text-2" id="text-3">
</div>
<div id="outline-container-orgce57cce" class="outline-3">
<h3 id="orgce57cce"><span class="section-number-3">3.1</span> <a href="#org3576f09">테스트 변수</a> 식별</h3>
<div class="outline-text-3" id="text-3-1">
<p>
if, switch 등의 분기문에서 사용하는 변수, 구조체 필드, 함수 리턴값 등을
식별한다. CodeScroll은 <a href="#orga906361">테스트 케이스</a>를 생성할 때 이 항목들을 대부분 식별한다.
함수의 리턴값등 CodeScroll이 <a href="#org3576f09">테스트 변수</a>로 식별하지 아니하는 항목도 포함한다.  
</p>

<p>
&amp;&amp;(and) , ||(or) 로 조건이 중첩 되어 있는 경우 로직 연산자의 좌·우
(operand)를 각각 따로 식별 한다.  
</p>


<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">void</span> <span style="color: #0000ff;">check_track</span>(<span style="color: #228b22;">track_data_t</span>* <span style="color: #a0522d;">track</span>, <span style="color: #228b22;">int</span> <span style="color: #a0522d;">value</span>)
{
  <span style="color: #a020f0;">if</span>(is_online() == <span style="color: #008b8b;">true</span> ){ <span style="color: #b22222;">//</span><span style="color: #b22222;">&#8594; is_online() &#47532;&#53556;&#44050;</span>

    <span style="color: #a020f0;">switch</span>(track-&gt;link_state){  <span style="color: #b22222;">//</span><span style="color: #b22222;">&#8594; track-&gt;link_state</span>
    <span style="color: #a020f0;">case</span> link_received :
      <span style="color: #a020f0;">if</span>( ( value &gt; 3000 ) &amp;&amp; (track-&gt;x_position &gt; 10000) ){<span style="color: #b22222;">//</span><span style="color: #b22222;">&#8594; value ,</span>
        ....                                                <span style="color: #b22222;">//</span><span style="color: #b22222;">track-&gt;x_position</span>
      }
      <span style="color: #a020f0;">else</span> <span style="color: #a020f0;">if</span>( ( value &lt; 700 ) || (track-&gt;x_position &lt; 5000 ) ){<span style="color: #b22222;">//</span><span style="color: #b22222;">&#8594; value ,</span>
        ....                                                    <span style="color: #b22222;">//</span><span style="color: #b22222;">track-&gt;x_position</span>
      }
      <span style="color: #a020f0;">else</span> {
        ....
      }
      <span style="color: #a020f0;">break</span> ; 

    <span style="color: #a020f0;">case</span> link_transmitted :
      <span style="color: #a020f0;">break</span> ; 
    <span style="color: #a020f0;">case</span> not_link_involved :
      <span style="color: #a020f0;">break</span> ; 
    <span style="color: #a020f0;">default</span> :
      <span style="color: #a020f0;">break</span> ; 
  }

}
</pre>
</div>
</div>
</div>


<div id="outline-container-org12dbb57" class="outline-3">
<h3 id="org12dbb57"><span class="section-number-3">3.2</span> <a href="#org4ce0003">테스트 데이터</a> 확인</h3>
<div class="outline-text-3" id="text-3-2">
<p>
<a href="#org3576f09">테스트 변수</a>의 조건들을 나열한 후 이로 부터 <a href="#org4ce0003">테스트 데이터</a>를 확인한다. 조건으로
평가 되는 경우 true/false 가 되는 값들이며 switch의 경우 case/default의 모든
항목 값 이다. 값의 범위 (&gt;, &lt;) 로 평가하는 경우 구간(최대값, 최소값,
중간값)을 활용하여 <a href="#org4ce0003">테스트 데이터</a>를 생성할 수 있다. 
</p>

<ul class="org-ul">
<li><p>
<a href="#org3576f09">테스트 변수</a>별 조건 나열
</p>
<pre class="example">
is_online 리턴 값    → is_online() == true 
value                → value &gt; 3000 ,  value &lt; 700 
track-&gt;x_position    → track-&gt;x_position &gt; 10000 , 
                        track-&gt;x_position &lt; 5000 
track-&gt;link_state    → switch(track-&gt;link_state)
</pre></li>

<li><p>
<a href="#org4ce0003">테스트 데이터</a> 생성
</p>

<pre class="example">
is_online 리턴 값    → '(1 0 )
value                → '(4000 3000 2000 700 100 )  
track-&gt;x_position    → '(11000 10000 7000 5000 3000) 
track-&gt;link_state    → '(link_received link_transmitted 
                          not_link_involved)
</pre></li>
</ul>
</div>
</div>

<div id="outline-container-org93f2153" class="outline-3">
<h3 id="org93f2153"><span class="section-number-3">3.3</span> <a href="#org3576f09">테스트 변수</a> 선언</h3>
<div class="outline-text-3" id="text-3-3">
<p>
C 코드 상의 항목과 잘 연상이 될 수 있고 짧은 이름으로 선언한다. 
</p>

<div class="org-src-container">
<pre class="src src-scheme">(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">is-online</span>     1)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">value</span>         7000)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">trk-xpos</span>      300)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">trk-ls</span>        link_received)
(anset 0 ) 
</pre>
</div>
</div>
</div>

<div id="outline-container-orga50fc98" class="outline-3">
<h3 id="orga50fc98"><span class="section-number-3">3.4</span> <a href="#org3576f09">테스트 변수</a>에 <a href="#org4ce0003">테스트 데이터</a>를 설정</h3>
<div class="outline-text-3" id="text-3-4">
<p>
<a href="#org416c93c">No description for this link</a>는 <a href="#org3576f09">테스트 변수</a>별 <a href="#org4ce0003">테스트 데이터</a> 값의 모든 조합(combination)을 생성한다.
<a href="#orge6c5e87">No description for this link</a> 는 테스트 번호에 맞는 테스트 데이터를 가져와서 lambda
함수를 적용한다. lambda 함수에서 <a href="#org3576f09">테스트 변수</a>에 값을 설정(set!) 한다.  
</p>

<div class="org-src-container">
<pre class="src src-scheme">(testsc-apply-tdata     
  1                     <span style="color: #b22222;">; </span><span style="color: #b22222;">&#50668;&#44592; &#51080;&#45716; &#44050;&#51032; &#53580;&#49828;&#53944; &#48264;&#54840;&#48512;&#53552; &#44032;&#51256;&#50724;&#44592; &#49884;&#51089;&#54620;&#45796;.</span>
  (<span style="color: #a020f0;">lambda</span> (d0 d1 d2 d3) 
    (set! is-online      d0)
    (set! value          d1)
    (set! trk-xpos       d2)
    (set! trk-ls         d3))
  (combi '(1 0 )              <span style="color: #b22222;">;</span><span style="color: #b22222;">is-online tdata</span>
         '(4000 2000 100 )    <span style="color: #b22222;">;</span><span style="color: #b22222;">value tdata</span>
         '(11000 7000 3000)   <span style="color: #b22222;">;</span><span style="color: #b22222;">trk-xpos tdata</span>
         '(link_received link_transmitted not_link_involved) )) <span style="color: #b22222;">;</span><span style="color: #b22222;">trk-ls tdata</span>
</pre>
</div>

<p>
값을 설정하는 다른 방식들은 <a href="#orga83ee86">예제</a>부분에서 확인한다. 
</p>
</div>
</div>

<div id="outline-container-orgdac48ea" class="outline-3">
<h3 id="orgdac48ea"><span class="section-number-3">3.5</span> 예제 <a id="orga83ee86"></a></h3>
<div class="outline-text-3" id="text-3-5">
<p>
아래의 예제는 배포파일에 포함되어 있는 CodeScroll 워크스페이스를 열어서
확인할 수 있다. 
</p>

<p>
<b>파일 &gt;&gt; 워크스페이스 바꾸기</b> 메뉴를 이용하여 예제가 있는 워크스페이스로 전환한다. 
</p>


<div class="figure">
<p><a href="chworksspace.PNG"><img src="c:/testsc/doc/chworksspace.PNG" alt="chworksspace.PNG" /></a>
</p>
</div>
</div>

<div id="outline-container-org8a324b4" class="outline-4">
<h4 id="org8a324b4"><span class="section-number-4">3.5.1</span> 예제 1 - 파라미터 조합</h4>
<div class="outline-text-4" id="text-3-5-1">
</div><ul class="org-ul"><li><a id="org84b895e"></a>테스트 대상<br /><div class="outline-text-5" id="text-org84b895e">
<p>
<code>/testsc/share/srcexample/example1.cpp</code> 에 대상 함수가 있다. 
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #228b22;">int</span> <span style="color: #008b8b;">example1</span>::<span style="color: #0000ff;">get_sec_surf_ampl</span>(<span style="color: #a020f0;">const</span> <span style="color: #228b22;">primary_surface_id_ampl_e</span> <span style="color: #a0522d;">priampl</span> , 
                                <span style="color: #a020f0;">const</span> <span style="color: #228b22;">secondary_surface_id_ampl_e</span> <span style="color: #a0522d;">secampl</span> )
{
  <span style="color: #a020f0;">switch</span>(priampl){
  <span style="color: #a020f0;">case</span> pri_surf_ampl_no_statement     : <span style="color: #a020f0;">return</span> SURPA_NO_STATEMENT ; <span style="color: #b22222;">// </span><span style="color: #b22222;">&#49464;&#48512;&#51221;&#48372; &#50630;&#51020;</span>
  <span style="color: #a020f0;">case</span> pri_surf_ampl_line             :      <span style="color: #b22222;">//</span><span style="color: #b22222;">&#54644;&#44400;&#51204;&#45800;</span>
  <span style="color: #a020f0;">case</span> pri_surf_ampl_combatant        : <span style="color: #b22222;">//</span><span style="color: #b22222;">&#54632;&#51221;</span>
    <span style="color: #a020f0;">switch</span>(secampl){
    <span style="color: #a020f0;">case</span> sec_surf_ampl_no_statement   :<span style="color: #a020f0;">return</span> SURSA_NO_STATEMENT;
    <span style="color: #a020f0;">case</span> sec_surf_ampl_carrier        :<span style="color: #a020f0;">return</span> SURSA_CARRIER; <span style="color: #b22222;">// </span><span style="color: #b22222;">1</span>
    <span style="color: #a020f0;">case</span> sec_surf_ampl_destroyer      :<span style="color: #a020f0;">return</span> SURSA_DESTROYER; <span style="color: #b22222;">// </span><span style="color: #b22222;">4</span>
    <span style="color: #a020f0;">case</span> sec_surf_ampl_cruiser        :<span style="color: #a020f0;">return</span> SURSA_CRUISER; <span style="color: #b22222;">// </span><span style="color: #b22222;">3</span>
    <span style="color: #a020f0;">case</span> sec_surf_ampl_frigate        :<span style="color: #a020f0;">return</span> SURSA_FRIGATE; <span style="color: #b22222;">// </span><span style="color: #b22222;">5</span>
    <span style="color: #a020f0;">case</span> sec_surf_ampl_battleship     :<span style="color: #a020f0;">return</span> SURSA_BATTLESHIP; <span style="color: #b22222;">// </span><span style="color: #b22222;">2</span>
    <span style="color: #a020f0;">default</span> : <span style="color: #a020f0;">break</span> ;
    }
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#45796;&#51020;&#51008; &#49892;&#54665;&#46104;&#51648; &#50506;&#49845;&#45768;&#45796;. </span>
    <span style="color: #a020f0;">break</span> ; 

  <span style="color: #a020f0;">case</span> pri_surf_ampl_patrol_vessel    :  <span style="color: #b22222;">// </span><span style="color: #b22222;">&#52488;&#44228;&#54632;</span>
    <span style="color: #b22222;">// </span><span style="color: #b22222;">&#45796;&#51020;&#51008; &#47605;&#54609;&#46104;&#51648; &#50506;&#49845;&#45768;&#45796;. </span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">enum ESurPatrolSecondaryAmp {</span>
    <span style="color: #b22222;">//  </span><span style="color: #b22222;">return SURSA_FAST_PATROL          // 3</span>
    <span style="color: #b22222;">//</span><span style="color: #b22222;">};</span>
    <span style="color: #a020f0;">switch</span>(secampl){
    <span style="color: #a020f0;">case</span> sec_surf_ampl_ASW            :<span style="color: #a020f0;">return</span> SURSA_ASW_PATROL; <span style="color: #b22222;">// </span><span style="color: #b22222;">1</span>
    <span style="color: #a020f0;">case</span> sec_surf_ampl_ASUW           :<span style="color: #a020f0;">return</span> SURSA_SURFACE_PATROL; <span style="color: #b22222;">// </span><span style="color: #b22222;">2</span>
    <span style="color: #a020f0;">default</span> : <span style="color: #a020f0;">break</span> ;
      ......
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="org6bcfdb1"></a>함수의 입력 파라미터<br /><div class="outline-text-6" id="text-org6bcfdb1">
<p>
함수 입력으로 사용하는 두 enum 타입의 모든 조합을 <a href="#org3576f09">테스트 변수</a> 로 생성하면
100% 커버리지를 달성할 수 있다. 
</p>

<p>
관련 enum 타입은 <code>/testsc/share/srcexample/example1.h</code> 에 정의 되어 있다. 
</p>

<p>
<b>primary_surface_id_ampl_e</b> 8개 값, <b>secondary_surface_id_ampl_e</b> 30개
값으로 해서 240개의 조합이 존재한다. 
</p>
</div></li></ul></li>

<li><a id="orgc18fc7b"></a>사용자 코드<br /><div class="outline-text-5" id="text-orgc18fc7b">
<p>
<b>테스트 정보</b> &gt;&gt; <b>사용자 코드</b> 에서 다음 사항을 확인한다. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">testsc_init(CS_TESTCASENO(), <span style="color: #8b2252;">"(testsc-require ex/t-1)"</span>,  <span style="color: #8b2252;">"/testsc/home"</span>) ; 

printf(<span style="color: #8b2252;">"printf\n"</span>) ; 
<span style="color: #008b8b;">std</span>::cout&lt;&lt;<span style="color: #8b2252;">"cout test"</span>&lt;&lt;<span style="color: #008b8b;">std</span>::endl ; 
</pre>
</div>

<p>
<a href="#org19399f3">testsc 홈</a> 아래 ex/t-1.scm 파일을 호출 하는 부분이다. 
</p>
</div></li>

<li><a id="org8d37453"></a>호출 전 코드<br /><div class="outline-text-5" id="text-org8d37453">
<p>
<b>테스트 정보</b> &gt;&gt; <b>테스트 대상 함수</b> &lt;&lt; <b>호출 전 코드</b> 부분에서 CodeScroll
이 생성한 <a href="#org3576f09">테스트 변수</a>의 값을 <b>testsc</b> 에서 값을 가져 오도록 한다. 
</p>

<p>
CodeScroll 의 <a href="#orga906361">테스트케이스</a>에 추가적으로 <b>testsc</b> 를 사용하려면 호출전
부분을 CS_TESTCASENO() 가 특정값 이상 일 때만 실행되도록 <b>if</b> 문을 사용할
수 있다. 
</p>

<div class="org-src-container">
<pre class="src src-cpp">priampl = (<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">primary_surface_id_ampl_e</span>)testsc_ivalue(<span style="color: #8b2252;">"priampl"</span>);
secampl = (<span style="color: #a020f0;">enum</span> <span style="color: #228b22;">secondary_surface_id_ampl_e</span>)testsc_ivalue(<span style="color: #8b2252;">"secampl"</span>);
</pre>
</div>
</div></li>

<li><a id="orgd19a61f"></a><a href="#orge3cc677">scheme 파일</a><br /><div class="outline-text-5" id="text-orgd19a61f">
<p>
/testsc/home/ex/t-1.scm 파일 의 내용
</p>

<ul class="org-ul">
<li>C 코드에서 사용하는 enum 값이나 <code>#define</code> 된 상수값을 정의 하여 사용할 수
있다. 식별자의 실제 값을 찾기 위해 코드를 검색할 필요 없이 <a href="#orga906361">테스트케이스</a>를
생성할 수 있다.</li>

<li><a href="#orge6c5e87">No description for this link</a>은 생성한 조합의 값을 첫번째 파라미터 이후의 테스트케이스에
대하여 순서대로 lambda 함수에 전달한다</li>

<li>을 통하여 priampl,
secampl 각각 0~7, 0~29 의 조합을 생성한다.</li>

<li>추가적인 <a href="#org3576f09">테스트 변수</a> 값이 필요할 경우 scheme-case 문을 사용하여 지정할 수
있다.</li>
</ul>

<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #b22222;">;;; </span><span style="color: #b22222;">&#49345;&#49688; &#51221;&#51032; - &#44277;&#53685;&#54028;&#51068;&#51012; &#47564;&#46308;&#50612; &#53580;&#49828;&#53944;&#44036;&#50640; &#44277;&#50976;&#54624; &#49688; &#51080;&#45796;. </span>
(<span style="color: #a020f0;">define</span>   <span style="color: #0000ff;">pri_surf_ampl_amphibious</span>                 4 )
(<span style="color: #a020f0;">define</span>   <span style="color: #0000ff;">sec_surf_ampl_frigate</span>                    11 )
(<span style="color: #a020f0;">define</span>   <span style="color: #0000ff;">sec_surf_ampl_landing_ship</span>               12 )


<span style="color: #b22222;">;;; </span><span style="color: #b22222;">&#53580;&#49828;&#53944;&#48320;&#49688; </span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">priampl</span> 0)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">secampl</span> 0)

(testsc-apply-tdata
 1                                      <span style="color: #b22222;">; </span><span style="color: #b22222;">testcase &#49884;&#51089;&#44050;</span>
 (<span style="color: #a020f0;">lambda</span> (x)                            <span style="color: #b22222;">; </span><span style="color: #b22222;">testcase &#48264;&#54840;&#50640;&#49436; testcase &#49884;&#51089;&#44050;&#51012; &#48768; &#48264;&#51704; &#51312;&#54633; &#44050;&#51012; &#54028;&#46972;&#48120;&#53552;&#47196; &#51204;&#45804;&#54620;&#45796;. </span>
   (set! priampl (nth 0 x))             <span style="color: #b22222;">; </span><span style="color: #b22222;">&#51312;&#54633;&#44050;&#51032; &#52395;&#48264;&#51704; &#44050;&#51008; priampl</span>
   (set! secampl (nth 1 x)))            <span style="color: #b22222;">; </span><span style="color: #b22222;">&#51312;&#54632;&#44050;&#51032; &#46160;&#48264;&#51704; &#44050;&#51008; secampl</span>
 (combi (num-list 0 8) (num-list 0 30)))

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">(combi (num-list 0 8 ) (num-list 0 30 ) )</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">-&gt; ((0 0 ) (0 1 ) (0 2 )... (0 29) (1 0 ) (1 1 ) ...)</span>
<span style="color: #b22222;">;;;     </span><span style="color: #b22222;">&#8593; testcase &#49884;&#51089; &#44050;&#44284; &#44057;&#51008; &#44221;&#50864; lambda &#54632;&#49688;&#47196; &#51204;&#45804;</span>
<span style="color: #b22222;">;;;            </span><span style="color: #b22222;">&#8593; testcase &#49884;&#51089; &#44050;&#48372;&#45796; 1 &#53364; &#44221;&#50864; lambda &#54632;&#49688;&#47196; &#51204;&#45804;</span>

(<span style="color: #a020f0;">case</span> (testsc-get-testnum)              <span style="color: #b22222;">; </span><span style="color: #b22222;">C &#51032; switch &#47928;&#50640; &#54644;&#45817; - testcase &#48264;&#54840;</span>
  ((241)                                <span style="color: #b22222;">; </span><span style="color: #b22222;">C &#51032; case &#47928;&#50640; &#54644;&#45817; - testcase &#48264;&#54840;&#44032; 241 &#51068; &#44221;&#50864;  </span>
   (set! secampl -1)                    <span style="color: #b22222;">; </span><span style="color: #b22222;">&#53580;&#49828;&#53944;&#48320;&#49688; secampl &#51012; -1 &#47196; &#49444;&#51221;&#54620;&#45796;.</span>
   (set! priampl -1))                   <span style="color: #b22222;">; </span><span style="color: #b22222;">&#53580;&#49828;&#53944;&#48320;&#49688; priampl &#51012; -1 &#47196; &#49444;&#51221;&#54620;&#45796;.</span>
  ((242 243)                            <span style="color: #b22222;">; </span><span style="color: #b22222;">&#53580;&#49828;&#53944;&#48264;&#54840; &#45208;&#50676;&#51060; &#44032;&#45733;&#54616;&#45796;. </span>
   (set! priampl pri_surf_ampl_amphibious)      <span style="color: #b22222;">; </span><span style="color: #b22222;">define &#51004;&#47196; &#51221;&#51032;&#46108; &#49345;&#49688;&#44050;&#51012; &#49324;&#50857;&#54624; &#49688; &#51080;&#45796;. </span>
   (set! secampl sec_surf_ampl_landing_ship)))  <span style="color: #b22222;">; </span><span style="color: #b22222;">define &#51004;&#47196; &#51221;&#51032;&#46108; &#49345;&#49688;&#44050;&#51012; &#49324;&#50857;&#54624; &#49688; &#51080;&#45796;. </span>

</pre>
</div>
</div></li>

<li><a id="org444c9e3"></a>실행<br /><div class="outline-text-5" id="text-org444c9e3">
<p>
<a href="#orga906361">테스트케이스</a>실행을 하여 커버리지 100% 가 되는 것을 확인 한다. 
</p>

<p>
<a href="#org19399f3">testsc 홈</a> 아래 testsc-stdout.txt 파일을 열어 보면 다음과 같은 로그를 확인
할 수 있다. 
</p>

<pre class="example">
testsc-require /testsc/home/util.scm
testsc-require /testsc/home/testsc.scm
testsc-require /testsc/home/testsc-ext.scm
testsc-require /testsc/home/ex/t-1.scm
testsc-apply-tdata next testnum is  241  → t-1.scm 에 있는 testsc-apply-tdata  다음의 테스트번호가 241임을 알려줌 
testsc initalize done      → testsc_init 함수가 끝나는 시점
printf                     → 테스트코드(사용자코드) 표준출력 redirection 
cout test                  → 테스트코드(사용자코드) 표준출력 redirection 
testsc_ivalue priampl is 7 → 테스트코드(호출전 코드)에서 testsc_ivalue 의 리턴 값
testsc_ivalue secampl is 1 → 테스트코드(호출전 코드)에서 testsc_ivalue 의 리턴 값
</pre>


<p>
ex/t-1.scm 파일에서 ')'괄호를 하나 추가 하고 실행하면 다음과 같은 에러 로그를
확인할 수 있다. 
</p>

<pre class="example">
Error: (/testsc/home//ex/t-1.scm : 44) syntax error: illegal token 
</pre>

<p>
여는 괄호'(', 닫는 괄호')' 쌍을 scheme 에서는 s-expression 라고 지칭한다. s-exp 를
처리하는 과정에서 에러가 발생하면 에러가 발생한다. 여는 괄호가 아직 끝나지
아니한 경우는 에러검출이 아니될 수도 있다. 이럴 경우 <a href="#orgc0e24a6">디버깅</a> 을 통해서
문제가 있는 부분을 확인 할 수 있다. 디버깅 방법은 <a href="#orgc0e24a6">디버깅</a> 참조 
</p>
</div></li></ul>
</div>

<div id="outline-container-org7960187" class="outline-4">
<h4 id="org7960187"><span class="section-number-4">3.5.2</span> 예제 2 - 수치 연산</h4>
</div>
<div id="outline-container-org5581fd3" class="outline-4">
<h4 id="org5581fd3"><span class="section-number-4">3.5.3</span> 예제 3 - 리스트 활용</h4>
</div>
<div id="outline-container-org600f1d2" class="outline-4">
<h4 id="org600f1d2"><span class="section-number-4">3.5.4</span> 예제 4 - testsc 구조체  <a id="orgfad37fa"></a></h4>
<div class="outline-text-4" id="text-3-5-4">
<p>
<a href="#orge3cc677">scheme 파일</a>을 통하여 구조체를 정의할 수 있다. <a href="#org3576f09">테스트 변수</a>를 사용하여 구조체
필드를 각각 설정하기 어려운 경우 사용한다. 사용되는 구조체의 필드가 다수일 경우,
스텁함수에서 구조체에 대한 포인터를 리턴하는 경우, 사용되는 구조체가 다수인
경우 등이 해당한다. 
</p>

<p>
추가적인 C 구현이 필요하기 때문에 
데이터가 필요할 경우 사용한다. 추가적으로 C 함수를 구현해야 하는데, 구조체의
필드별로 테스트변수를 만들어서 설정하는방식과 비교하여 한번 구현해 두면 유리할 경우 추가 구현하여 사용한다. 
</p>

<p>
C 함수 추가
  구현이 필요한 부분으로써 관련 구조체가 빈번히 사용될 경우 구현을 하면 
</p>

<p>
C 구현이
  필요하기 때문에 내부에서 자주 사용하는 구조체에 대하여 구현을 사고 
</p>


<p>
GFE 로 부터 받는 메시지등을 구현하는데 사용할 수 있다. 
</p>

<p>
<a href="#org3576f09">테스트 변수</a>를 활용해서 구조체의 필드에 값을 설정할 수 있다. 대부분의 경우
</p>

<p>
<a href="#orgfad37fa">testsc 구조체</a>는 테스트에 사용되는 구조체 생성을 위해 <b>testsc</b> 가
내부적으로 사용하는 구조체를 의미한다. 
</p>

<p>
다음은 식별자 0 으로 _track.TMSIndex 필드 값이 0 _track.identity 가 FRIEND
구조체를 생성한다.  
</p>

<p>
<a href="#orgfad37fa">testsc 구조체</a>에 대한 상세한 내용은 <a href="#orgfad37fa">testsc 구조체</a>부분 참조 
</p>
<div class="org-src-container">
<pre class="src src-scheme">(testsc-ext-set 0 
                '_track.TMSIndex 10
                '_track.identit  FRIEND )
</pre>
</div>
</div>

<ul class="org-ul"><li><a id="org6ecdcdc"></a>구조체 테스트 데이터 생성<br /><div class="outline-text-5" id="text-org6ecdcdc">
<p>
확장 모듈을 이용하여 구조체 테스트 데이터를 생성할 수 있다. 
<a href="#org1f9a22b">No description for this link</a> 을 이용하여 scheme 파일에서 생성한 구조체를 가져 온다. 
</p>
</div></li>

<li><a id="orgf94f692"></a>빌드 방법<br /><div class="outline-text-5" id="text-orgf94f692">
<p>
build.bat 파일을 이용하여 빌드를 수행한다. 
</p>

<p>
scheme.exe 파일을 생성하기 위해서는 -DSTANDALONE=1 을 컴파일러로 전달해야 한다. 
</p>

<p>
libtestsc.a 파일을 생성하기 위해서는 -DSTANDALONE=0 을 컴파일러로 전달해야 한다.  
</p>


<hr>
</div></li></ul>
</div>
</div>
</div>


<div id="outline-container-orge563002" class="outline-2">
<h2 id="orge563002"><span class="section-number-2">4</span> 👍 엄지의 법칙</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-org0b48f47" class="outline-3">
<h3 id="org0b48f47"><span class="section-number-3">4.1</span> 비관리 코드 활용</h3>
<div class="outline-text-3" id="text-4-1">
<p>
<a href="#orga906361">테스트케이스</a>생성후 바로 비관리로 전환하며 직접 입력할 수 도 있다. 
</p>

<p>
비관리로 전환을 하였을 경우 테스트케이스 파일을 직접 편집할 수 있다. 비관리
코드로 전환하면 CodeScroll 없이 작업을 할 수 있어 라이센스를 절약할 수 있다. 
</p>


<p>
CodeScroll 테스트케이스 생성 및 일괄 빌드 후 비관리 코드 전환을 수행하고
테스트를 CodeScroll 없이 테스트를 편집할 수 있다. 결과적으로 CodeScroll
라이센스를 절약할 수 있다.  
</p>
</div>
<div id="outline-container-org37f8f93" class="outline-4">
<h4 id="org37f8f93"><span class="section-number-4">4.1.1</span> 일괄 비관리 코드 전환</h4>
<div class="outline-text-4" id="text-4-1-1">
<p>
CodeScroll 를 종료한 상태에서 프로젝트폴더내의 <b>.csp</b> 파일을 찾은 후
sqlite3 실행 파일을 이용하여 다음과 같이 수행한다. 
</p>

<p>
수행시 해당 .cpp 파일의 모든 함수가 비관리 코드로 전환 된다. 
</p>

<div class="org-src-container">
<pre class="src src-shell"><span style="color: #483d8b;">.</span>\sqlite3 c:\codescroll\testsc1<span style="color: #8b2252;">\.</span>csdata\testsfile.csp &lt; unmanage.sql
</pre>
</div>


<p>
다음은 unmanage.sql 의 내용이다. 
</p>

<div class="org-src-container">
<pre class="src src-sql"><span style="color: #a020f0;">update</span> UtTest <span style="color: #a020f0;">set</span> isManaged = 0 ; 
</pre>
</div>
</div>
</div>

<div id="outline-container-orga3f5dee" class="outline-4">
<h4 id="orga3f5dee"><span class="section-number-4">4.1.2</span> unittest 내부의 c 파일 편집</h4>
<div class="outline-text-4" id="text-4-1-2">
<p>
비관리 코드 전환이 되었을 때만 직접 편집을 하여야 한다. 안된 상태서
편집하는 경우 관련 사항을 읽어버릴 수 있다. 
</p>
<ul class="org-ul">
<li>USER_CODE_GLOBAL_KEY 부분을 찾아서 <a href="#org8eb1c60">관련 헤더파일 include</a> 부분을 직접 편집한다.</li>
<li>User code start 부분을 찾아서 <a href="#orgbbd0ff2">사용자 코드 작성</a> 부분을 직접 편집한다.</li>
<li>테스트 대상 함수 호출 전에 <a href="#org8fbc4b6">호출전 코드 및 stub 코드 작성</a> 부분을 직접 편집한다.</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-org21e1a06" class="outline-3">
<h3 id="org21e1a06"><span class="section-number-3">4.2</span> CodeScroll 의 테스트데이터와 같이 사용</h3>
<div class="outline-text-3" id="text-4-2">
<p>
<b>CS_TESTCASENO()</b> 를 이용하여 관련 부분이 실행이 아니되게 할 수 있다. 다음과
같이 실행하며 10 보다 큰 테스트케이스에 대해서만 <a href="#orge3cc677">scheme 파일</a>로 부터 값을 읽어
온다.  
</p>

<div class="org-src-container">
<pre class="src src-cpp"><span style="color: #a020f0;">if</span>(CS_TESTCASENO() &gt; 10){
  iValue1    = testsc_ivalue(<span style="color: #8b2252;">"value1"</span>) ; 
  dValue2    = testsc_dvalue(<span style="color: #8b2252;">"value2"</span>) ; 
  strValue3  = testsc_strvalue(<span style="color: #8b2252;">"value3"</span>) ;
  pValue4    = (<span style="color: #228b22;">track_t</span>*)testsc_ext_get(0) ; 
}
</pre>
</div>
</div>
</div>

<div id="outline-container-org2c8d696" class="outline-3">
<h3 id="org2c8d696"><span class="section-number-3">4.3</span> testsc 확장 모듈</h3>
<div class="outline-text-3" id="text-4-3">
<p>
C 를 이용하여 확장 할 수 있다. C 확장을 불필요하게 생성하는 것을 지양하고
최대한 scheme 파일을 활용할 수 있도록 한다. 구조체에 대한 확장 정도만 구현을
하여도 충분하다. 
</p>
</div>

<div id="outline-container-orgcadb6fc" class="outline-4">
<h4 id="orgcadb6fc"><span class="section-number-4">4.3.1</span> 구조체 테스트 데이터 생성</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
확장 모듈을 이용하여 구조체 테스트 데이터를 생성할 수 있다. 
<a href="#org1f9a22b">No description for this link</a> 을 이용하여 scheme 파일에서 생성한 구조체를 가져 온다. 
</p>
</div>
</div>

<div id="outline-container-org994aab5" class="outline-4">
<h4 id="org994aab5"><span class="section-number-4">4.3.2</span> 테스트 데이터를 파일에서 가져오게 한다.</h4>
<div class="outline-text-4" id="text-4-3-2">
</div><ul class="org-ul"><li><a id="org4d2b3be"></a>컴파일 없이 테스트 수행을 할 수 있다.<br /></li></ul>
</div>
<div id="outline-container-orgfae2e00" class="outline-4">
<h4 id="orgfae2e00"><span class="section-number-4">4.3.3</span> 테스트 데이터를 프로그래밍 할 수 있게 한다.</h4>
<div class="outline-text-4" id="text-4-3-3">
<p>
테스트 데이터에 대한 프로그래밍을 통하여 커버리지를 높일 수 있는 데이터를
생성할 수 있다.
</p>
</div>
</div>
<div id="outline-container-org5d0407b" class="outline-4">
<h4 id="org5d0407b"><span class="section-number-4">4.3.4</span> 라이브러리를 활용한다.</h4>
<div class="outline-text-4" id="text-4-3-4">
<p>
STUB 을 중복적으로 생성할 필요 없이 재사용 할 수 있다. 
</p>
</div>
<ul class="org-ul"><li><a id="org20d80d5"></a>embedded language 활용<br /><ul class="org-ul"><li><a id="org92d69c6"></a>scheme<br /><div class="outline-text-6" id="text-org92d69c6">
<p>
문법이 간단하여 구현이 용이함. 
</p>
</div>
<ul class="org-ul"><li><a id="org6900efb"></a>구현 - tinyscheme<br /><div class="outline-text-7" id="text-org6900efb">
<p>
5천 라인 정도의 C 파일로 language 가 구현 되어 있음. 
codescroll에서 사용하는 컴파일러만으로 컴파일 가능. 추가 도구 등이 필요
없음. 
</p>
</div></li></ul></li></ul></li></ul>
</div>
</div>
<div id="outline-container-orgbf47c7c" class="outline-3">
<h3 id="orgbf47c7c"><span class="section-number-3">4.4</span> 정의 파일 활용</h3>
<div class="outline-text-3" id="text-4-4">
</div><div id="outline-container-orge40361a" class="outline-4">
<h4 id="orge40361a"><span class="section-number-4">4.4.1</span> enum 타입 및 공통 상수 값 정의</h4>
<div class="outline-text-4" id="text-4-4-1">
<p>
<a href="#orge3cc677">scheme 파일</a> 처음 실행 할 때 <b>(testsc-require icmsdefine)</b> 를 호출하여 관련 값을 가져올
수 있다. 각 타입의 값을 찾을 필요 없이 그대로 사용할 수 있다. 
</p>

<p>
icmsdefine.scm 파일이 공통으로 사용하는 부분이 정의되어 있음. 필요할 경우
타입를 추가 할 수 있다. 
</p>

<p>
두번 정의가 될 경우 뒤에 나오는 값으로 설정이 된다. 
</p>

<p>
<a href="#org4ce0003">테스트 데이터</a>를 작성하기 위해 식별자의 값을 찾을 필요 없이 원보 소스코드를
복사하여 <a href="#orge3cc677">scheme 파일</a>을 작성하는데 재활용 할 수 있다. 
</p>
</div>
</div>
</div>
<div id="outline-container-org7b5df65" class="outline-3">
<h3 id="org7b5df65"><span class="section-number-3">4.5</span> testsc 수정시</h3>
<div class="outline-text-3" id="text-4-5">
<p>
정적 라이브러리이기 때문에 <a href="#orga906361">테스트케이스</a>재빌드 필요하다. 
</p>
</div>
</div>

<div id="outline-container-org1c2686b" class="outline-3">
<h3 id="org1c2686b"><span class="section-number-3">4.6</span> 표준 출력 redirection</h3>
<div class="outline-text-3" id="text-4-6">
<p>
라이브러리가 표준 출력을 파일로 redirection 해준다 코드가 실행하면서
출력하는 사항을 파일로 확인할 수 있다. 
</p>
</div>
</div>

<div id="outline-container-orgc2af52c" class="outline-3">
<h3 id="orgc2af52c"><span class="section-number-3">4.7</span> 디버깅 <a id="orgc0e24a6"></a></h3>
<div class="outline-text-3" id="text-4-7">
<p>
값이 예상과 다르거나 스크립트 로딩에 오류가 있는 것 같을 때 수행한다. 
</p>
</div>
<div id="outline-container-org9dae745" class="outline-4">
<h4 id="org9dae745"><span class="section-number-4">4.7.1</span> <a href="#orga906361">테스트 케이스</a> C 코딩 오류</h4>
<div class="outline-text-4" id="text-4-7-1">
<p>
표준출력 이나 <a href="#org402989e">No description for this link</a>를 할용한다. 출력은 <a href="#org19399f3">testsc 홈</a> 아래
<b>testsc-stdout.txt</b>, <b>testsc-stderr.txt</b> 파일에 저장된다. 
</p>
</div>
</div>
<div id="outline-container-org553575a" class="outline-4">
<h4 id="org553575a"><span class="section-number-4">4.7.2</span> <a href="#orge3cc677">scheme 파일</a> 오류</h4>
<div class="outline-text-4" id="text-4-7-2">
<ol class="org-ol">
<li>커맨드 창을 열고 <a href="#org19399f3">testsc 홈</a> 폴더(<code>/testsc/home/</code>) 으로 이동한다.</li>
<li><p>
scheme 명령을 실행한다. 
</p>
<div class="org-src-container">
<pre class="src src-shell">C:\testsc\home&gt;.\scheme.exe
</pre>
</div></li>
<li><p>
<a href="#org2db1f1f">No description for this link</a> 을 호출한다. 
</p>

<p>
다음은 testscase 번호를 1로 설정하고 <a href="#org19399f3">testsc 홈</a> 폴더 아래 ex/t-1.scm 을
로딩한다. 로깅 과정에 에러가 있을 경우 화면으로 출력한다.  <a href="#orge3cc677">scheme 파일</a> 의
오류를 검증하는데 사용할 수있다. 
</p>
<div class="org-src-container">
<pre class="src src-scheme">ts&gt; (testsc-init 1 ex/t-1 )
</pre>
</div></li>
<li><p>
<a href="#org3576f09">테스트 변수</a> 값을 확인한다. 
확인하고자 하는 변수를 입력후 엔터를 넣으면 값이 출력된다. <a href="#org2db1f1f">No description for this link</a>
함수의 <a href="#org721e067">테스트 번호</a>를 변경해가면서 <a href="#org3576f09">테스트 변수</a> 의 값을 확인할 수 있다. 
</p>
<div class="org-src-container">
<pre class="src src-scheme">ts&gt;priampl
0
</pre>
</div></li>
</ol>
</div>
</div>
</div>

<div id="outline-container-org2dcf820" class="outline-3">
<h3 id="org2dcf820"><span class="section-number-3">4.8</span> testsc 구조체</h3>
<div class="outline-text-3" id="text-4-8">
<p>
대부분의 경우 testsc 구조체가 없이도 동적시험 수행이 가능하다. 
</p>

<p>
동적 구조체 생성이 빈번히 발생하는 경우에 사용한다. 구현을 하게 되는 경우
최대한 많는 구조체 타입을 구현하도록 한다. 그렇기 아니할 경우 testsc
라이브러리를 재빌드 하는 일이 자주 발생 할 수 도 있다. 
</p>
<hr>
</div>
</div>
</div>

<div id="outline-container-orgf2787cd" class="outline-2">
<h2 id="orgf2787cd"><span class="section-number-2">5</span> Reference <a id="orge905670"></a></h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-org8b14b20" class="outline-3">
<h3 id="org8b14b20"><span class="section-number-3">5.1</span> C API - <a id="org7f06562"></a></h3>
<div class="outline-text-3" id="text-5-1">
<p>
CodeScroll <a href="#orga906361">테스트 케이스</a>를 C/C++ 로 작성할 때 사용하는 함수 이다. 
</p>
</div>
<div id="outline-container-orgac9d3fb" class="outline-4">
<h4 id="orgac9d3fb"><span class="section-number-4">5.1.1</span> testsc.h</h4>
<div class="outline-text-4" id="text-5-1-1">
<p>
<a href="#org3576f09">테스트 변수</a>를 처리하는 함수 
</p>
</div>

<ul class="org-ul"><li><a id="orgbf672a1"></a><code class="src src-cpp"><span></span><span class="kt">long</span> <span class="nf">testsc_ivalue</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span><span class="o">*</span> <span class="n">name</span><span class="p">)</span> <span class="p">;</span></code> <a id="orgdb03932"></a><br /><div class="outline-text-5" id="text-orgbf672a1">
<p>
<br />
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="org-left" />

<col  class="org-left" />
</colgroup>
<tbody>
<tr>
<td class="org-left">용도</td>
<td class="org-left"><a href="#org3576f09">테스트 변수</a>의 정수 값을 가져온다.</td>
</tr>

<tr>
<td class="org-left">파라미터</td>
<td class="org-left">name → 가져오고자 하는 <a href="#org3576f09">테스트 변수</a>명</td>
</tr>

<tr>
<td class="org-left">&#xa0;</td>
<td class="org-left">name → 가져오고자 하는 <a href="#org3576f09">테스트 변수</a>명</td>
</tr>

<tr>
<td class="org-left">리턴 값</td>
<td class="org-left"><a href="#org3576f09">테스트 변수</a>의 값</td>
</tr>
</tbody>
</table>
</div>

<ul class="org-ul"><li><a id="orgda7b6ca"></a>사용 예<br /><div class="outline-text-6" id="text-orgda7b6ca">
<div class="org-src-container">
<pre class="src src-cpp">link_state =(<span style="color: #228b22;">link_state_e</span>)testsc_ivalue(<span style="color: #8b2252;">"link_state"</span>) ; 
</pre>
</div>
</div></li></ul></li>

<li><a id="org1ee4dcb"></a>double testsc_dvalue(const char* name)  <a id="org0db0075"></a><br /><div class="outline-text-5" id="text-org1ee4dcb">
<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>
<ul class="org-ul">
<li>용도 : <a href="#org3576f09">테스트 변수</a>의 부동 소수값을 가져온다.</li>
<li>파라미터 :
<ul class="org-ul">
<li>name → 가져오고자 하는 <a href="#org3576f09">테스트 변수</a>명</li>
</ul></li>
<li><p>
사용 예 :
</p>
<div class="org-src-container">
<pre class="src src-cpp">xpos = testsc_dvalue(<span style="color: #8b2252;">"xpos"</span>) ; 
</pre>
</div></li>
</ul>
</div></li>

<li><a id="orgc8412cf"></a>char* testsc_strvalue(const char* name)  <a id="org066e6a9"></a><br /><div class="outline-text-5" id="text-orgc8412cf">
<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>
</div></li>
<li><a id="orgc1377a5"></a>void testsc_eval(const char *cmd)  <a id="org77c1f07"></a><br /><div class="outline-text-5" id="text-orgc1377a5">
<p>
<a href="#org62838d7">No description for this link</a> 에서 초기화 하면서 scheme 을 실행하는 것에 더하여 추가적으로
다른 scheme 명령을 실행고 싶을 때 사용한다. <a href="#org578235e">No description for this link</a> 명령을 이용하여
다른 파일을 불러 올 수 있다. 
</p>

<p>
<a href="#orge3cc677">scheme 파일</a>를 불어오는 것에 추가적으로 다른 파일을 불러
     오고 싶을 사용한다. 
</p>
<ul class="org-ul">
<li>scheme 파일 추가 실행 
다음과 같이 수행하면 관련 scheme 파일을</li>
</ul>
<div class="org-src-container">
<pre class="src src-cpp">testsc_eval( <span style="color: #8b2252;">"(testsc-require mb/t-9)"</span>) ;
</pre>
</div>

<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>
</div></li>
<li><a id="orgf88619d"></a>void testsc_init(int testnum, const char *cmd, const char *homepath = 0 )  <a id="org62838d7"></a><br /><div class="outline-text-5" id="text-orgf88619d">
<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>


<p>
<a href="#org62838d7">No description for this link</a> 를 호출하여 <b>testsc</b> 를 초기화 한다. 첫번째 파라미터는
CS_TESTCASENO() 으로써 <a href="#org721e067">테스트 번호</a>를 전달한다. 두번째 파라미터는 실행할
scheme 명령이다. <a href="#org578235e">No description for this link</a> 를 호출하여 <a href="#orge3cc677">scheme 파일</a>을 읽어 올 수 있다.
마지막 파라미터는 <b>testsc</b> 의 HOME 경로가 된다. <a href="#org578235e">No description for this link</a> 는 홈
경로아래에서 <a href="#orge3cc677">scheme 파일</a> 을 불러온다. 경로를 파라미터로 넘기지 아니할 경우
프로젝트가 있는 드라이브의 <code>/testsc/home</code> 폴더가 홈이 된다. (C 드라이브에
프로젝트 폴더가 있을 경우 <code>c:\testsc\home</code> 폴더, 리눅스의 경우
<code>/testsc/home</code> )       
</p>
</div></li>


<li><a id="org5935c0c"></a>void testsc_debug(const char*format &#x2026;)  <a id="org402989e"></a><br /></li></ul>
</div>

<div id="outline-container-org5dbf255" class="outline-4">
<h4 id="org5dbf255"><span class="section-number-4">5.1.2</span> testsc_ext.h</h4>
<div class="outline-text-4" id="text-5-1-2">
</div><ul class="org-ul"><li><a id="orge5a4332"></a>int testsc_ext_length( void ) <a id="orgc828453"></a><br /><div class="outline-text-5" id="text-orge5a4332">
<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>
</div></li>

<li><a id="org4ee0ef2"></a>void testsc_ext_erase(int index ) <a id="org46fd4d7"></a><br /><div class="outline-text-5" id="text-org4ee0ef2">
<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>
</div></li>
<li><a id="org1815adc"></a>char* testsc_ext_get( int i )  <a id="org1f9a22b"></a><br /><ul class="org-ul"><li><a id="org1b05a15"></a>구현 방법<br /><div class="outline-text-6" id="text-org1b05a15">
<div class="org-src-container">
<pre class="src src-cpp">
</pre>
</div>
</div></li></ul></li>
<li><a id="orgaa83edf"></a>pop_args<br /></li></ul>
</div>
</div>

<div id="outline-container-org6782cc9" class="outline-3">
<h3 id="org6782cc9"><span class="section-number-3">5.2</span> scheme API - <a id="orgae72593"></a></h3>
<div class="outline-text-3" id="text-5-2">
</div><div id="outline-container-orgbcf2367" class="outline-4">
<h4 id="orgbcf2367"><span class="section-number-4">5.2.1</span> util.scm</h4>
<div class="outline-text-4" id="text-5-2-1">
</div><ul class="org-ul"><li><a id="org67b3ae8"></a>변수<br /><ul class="org-ul"><li><a id="org5ffb9df"></a><b>testsc-home</b>  <a id="org255bd42"></a><br /><div class="outline-text-6" id="text-org5ffb9df">
<ul class="org-ul">
<li>목적 : 스크립트 파일 위치</li>
<li>방향 :</li>
<li><p>
사용법 
testsc-debug 를 이용하여 경로를 확인한다. 
</p>

<div class="org-src-container">
<pre class="src src-scheme">(testsc-debug *testsc-home*)
</pre>
</div></li>
</ul>
</div></li></ul></li>

<li><a id="org17b90b1"></a>함수<br /><ul class="org-ul"><li><a id="orgc87d522"></a>(define-macro (testsc-require x) &#x2026;) <a id="org578235e"></a><br /><div class="outline-text-6" id="text-orgc87d522">
<p>
<a href="#org578235e">No description for this link</a> 의 파라미터는 불러오고자 하는 <a href="#orge3cc677">scheme 파일</a>이다. (testsc-require
mb/t-9) 은 홈 폴더 아래의 <b>mb/t-9.scm</b> 파일을 호출한다. 경로명에 공백이
있어서는 아니되고 파일의 확장자인 <b>.scm</b> 은 생략해야 한다. 
</p>

<p>
경로명은 다음과 같는 명명 규칙을 사용한다. 단순한 convention이며 따르지
아니하여도 상관없음. 기억하기 쉽고 짧을 수록 유리
</p>

<pre class="example">
- 폴더명 : 테스트하고자 하는 .cpp 파일을 나타내는 약어
- t-testname.scm : 테스트케이스(함수별) 를 나타내는 약어. *t-* 으로 시작
  하도록 한다. 
</pre>
</div></li>
<li><a id="org95e2461"></a>(define (t-offset start) &#x2026;) <a id="orgab14fe6"></a><br /><div class="outline-text-6" id="text-org95e2461">
<p>
(define (t-offset start) (- (testsc-get-testnum) start))
</p>
</div></li>

<li><a id="orge43d2f1"></a>(define (for-each-index-offset offset proc  . args ) &#x2026;) <a id="org192bbcd"></a><br /><div class="outline-text-6" id="text-orge43d2f1">
<ul class="org-ul">
<li>목적 : 테스트케이스별 값을 설정한다.</li>
<li><p>
사용법 : 테이스케이스별로 순차적으로 값을 설정하고자 할 때 사용한다. 
</p>
<div class="org-src-container">
<pre class="src src-scheme">(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">testsc</span> 0 )
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">order</span> 0 )
(for-each-index-offset
  1
  (<span style="color: #a020f0;">lambda</span> (x)
    (set! testsc 1 )
    (set! order x)
    )
    system_types-assume_cntrl
    system_types-control_and_engage
    system_types-return_to_base
    system_types-transfer_cntrl
    system_types-launch_heli
    system_types-request_cntrl
    system_types-cancel_handover  
    -1
  )

</pre>
</div></li>
<li>입력 파라미터 
<ul class="org-ul">
<li>offset : 값 설정을 시작할 테스트케이스 번호</li>
<li>proc   : 값 설정을 수행할 함수</li>
<li>args   : 테스트 값</li>
</ul></li>
</ul>
</div></li>

<li><a id="orge2f6c61"></a>(define (feio offset proc args ) &#x2026;) <a id="org4f2828d"></a><br /><div class="outline-text-6" id="text-orge2f6c61">
<ul class="org-ul">
<li>목적 : 테스트케이스별 값을 설정한다.</li>
<li><p>
사용법 : 테이스케이스별로 순차적으로 값을 설정하고자 할 때 사용한다. 
<a href="#org192bbcd">No description for this link</a> 와 비교하여 args 부분에 리스트가 올 수
있다. 
</p>
<div class="org-src-container">
<pre class="src src-scheme">(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">i_enStatus</span> 0)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">m_bEnableCallback</span> 0)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">i_pchData_0</span> 0)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">i_pchData_1</span> 0)

(feio
 1
 (<span style="color: #a020f0;">lambda</span> (x)
   (set! i_enStatus        (nth 0 x))
   (set! m_bEnableCallback (nth 1 x))
   (set! i_pchData_0       (nth 2 x))
   (set! i_pchData_1       (nth 3 x)))

 (combi '(11 12) '(1) '(4 5 ) '(1 0 )))


</pre>
</div></li>
</ul>
</div></li>

<li><a id="orgd0d8e1b"></a>(define (combi . args)&#x2026;) <a id="org416c93c"></a><br /><div class="outline-text-6" id="text-orgd0d8e1b">
<ul class="org-ul">
<li>목적 : 테스트 데이터 생성(combination)</li>
<li><p>
사용법 : 
</p>

<div class="org-src-container">
<pre class="src src-scheme">(combi '(a b ) '(1 2 ))
</pre>
</div>

<p>
#+RESULT :
'((a 1) (a 2) (b 1) (b 2))
</p></li>
</ul>
</div></li>
<li><a id="org9a65eee"></a>(define (nth n l) &#x2026;)<br /><div class="outline-text-6" id="text-org9a65eee">
<ul class="org-ul">
<li>목적 : 리스트에서 n 번째 항목을 리턴한다.</li>
<li><p>
사용법 : 리스트에서 값을 가져오고자 할 때 사용한다. 
</p>

<div class="org-src-container">
<pre class="src src-scheme">(nth 3 '(zero one two three four))
</pre>
</div>

<p>
#+RESULT :
three
</p></li>

<li>입력 파라미터 
<ul class="org-ul">
<li>n : 리스트에서 가져오고자 하는 인덱스( 0 부터 시작 )</li>
<li>l : 리스트</li>
</ul></li>
</ul>
</div></li>
<li><a id="orgf31f86e"></a>(define (num-list start end  ) &#x2026;) <a id="org7b519ad"></a><br /><div class="outline-text-6" id="text-orgf31f86e">
<ul class="org-ul">
<li>프로토타입 : (define (num-list start end  ) &#x2026;)</li>
<li>목적 : 숫자 리스트를 리턴한다.</li>
<li><p>
사용법 : 
</p>

<div class="org-src-container">
<pre class="src src-scheme">(num-list 1 10)
</pre>
</div>

<p>
#+RESULT :
'(1 2 3 4 5 6 7 8 9 )
</p></li>

<li>입력 파라미터 
<ul class="org-ul">
<li>start : 시작 값(포함)</li>
<li>end : 종료 값(불포함)</li>
</ul></li>
</ul>
</div></li>

<li><a id="orgdc06cc0"></a>(define-macro (testsc-init x  initcmd) &#x2026;) <a id="org2db1f1f"></a><br /></li>
<li><a id="org5090799"></a>populate<br /><div class="outline-text-6" id="text-org5090799">
<p>
구현 필요. 
</p>
</div></li></ul></li>
<li><a id="org5d7c989"></a>testsc.scm<br /><ul class="org-ul"><li><a id="orga810a81"></a>(define (testsc-apply-tdata offset proc args )&#x2026;) <a id="orge6c5e87"></a><br /></li></ul></li></ul>
</div>
<div id="outline-container-orgcbbe11e" class="outline-4">
<h4 id="orgcbbe11e"><span class="section-number-4">5.2.2</span> testsc.c</h4>
<div class="outline-text-4" id="text-5-2-2">
</div><ul class="org-ul"><li><a id="org41ccf67"></a>함수<br /><ul class="org-ul"><li><a id="org2276800"></a>pointer foreign_testsc_set_testnum(scheme* sc, pointer args) <a id="orgf0d514f"></a> <a id="orgbda5527"></a><br /></li></ul></li></ul>
</div>
</div>

<div id="outline-container-org1898497" class="outline-3">
<h3 id="org1898497"><span class="section-number-3">5.3</span> 추가 C excention 구현</h3>
<div class="outline-text-3" id="text-5-3">
<p>
C 를 이용하여 추가적인 기능을 구현할 수 있다.
</p>

<p>
어떻게 구현 하는지 설명 할 수 있다.
</p>
</div>

<div id="outline-container-org2512a3c" class="outline-4">
<h4 id="org2512a3c"><span class="section-number-4">5.3.1</span> 구조체 테스트 데이터 생성</h4>
<div class="outline-text-4" id="text-5-3-1">
<hr>
</div>
</div>
</div>
</div>
<div id="outline-container-org6c250a4" class="outline-2">
<h2 id="org6c250a4"><span class="section-number-2">6</span> scheme 문법 <a id="orgdf04e2f"></a></h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-org3499452" class="outline-3">
<h3 id="org3499452"><span class="section-number-3">6.1</span> scheme 파일 에디터</h3>
</div>
<div id="outline-container-orgfcd37a7" class="outline-3">
<h3 id="orgfcd37a7"><span class="section-number-3">6.2</span> 15분 만에 scheme 배우기</h3>
<div class="outline-text-3" id="text-6-2">
<div class="org-src-container">
<pre class="src src-scheme"><span style="color: #b22222;">;; </span><span style="color: #b22222;">This gives an introduction to Scheme in 15 minutes</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">First make sure you read this text by Peter Norvig:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">http://norvig.com/21-days.html</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Then install GNU Guile</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">NOTE: I won't encourage using Racket but if you really want,</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">I still give you some hints in this tutorial. But the</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">tutorial will base on Guile and RnRs.</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">openSUSE: zypper install guile</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Debian: apt-get install guile-2.0 (or see your distro instructions)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">MacOSX: Building Guile 2.0 on the Mac</span>
<span style="color: #b22222;">;;         </span><span style="color: #b22222;">http://irrealblog.blogspot.hk/2011/03/building-guile-2.html</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Windows try web: http://repl.it/languages/Scheme</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">More general information can be found at:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">http://www.gnu.org/software/guile</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Important warning:</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Going through this tutorial won't damage your computer unless</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">you get so angry that you throw it on the floor.  In that case,</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">I hereby decline any responsability.  Have fun!</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Fire up Scheme:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Type 'guile' for GNU Guile</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Or just use the browser for web version</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Now look at the prompt:</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Semi-colons start comments anywhere on a line.</span>
<span style="color: #b22222;">;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Scheme programs are made of symbolic expressions (s-exps):</span>
(+ 2 2)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">This symbolic expression reads as "Add 2 to 2".</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Sexps are enclosed into parentheses, possibly nested:</span>
(+ 2 (+ 1 1))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">A symbolic expression contains atoms or other symbolic</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">expressions.  In the above examples, 1 and 2 are atoms,</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(+ 2 (+ 1 1)) and (+ 1 1) are symbolic expressions.</span>

(+ 3 (+ 1 2))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; 6</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">`set!' stores a value into a variable:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Please define my-name first, or you can't assign it.</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">my-name</span> <span style="color: #8b2252;">"unknown"</span>)
(set! my-name <span style="color: #8b2252;">"NalaGinrut"</span>)

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">1. Primitive Datatypes and Operators</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Numbers</span>
9999999999999999999999 <span style="color: #b22222;">; </span><span style="color: #b22222;">integers</span>
#b111                  <span style="color: #b22222;">; </span><span style="color: #b22222;">binary =&gt; 7</span>
#o111                  <span style="color: #b22222;">; </span><span style="color: #b22222;">octal =&gt; 73</span>
#x111                  <span style="color: #b22222;">; </span><span style="color: #b22222;">hexadecimal =&gt; 273</span>
3.14                   <span style="color: #b22222;">; </span><span style="color: #b22222;">reals</span>
6.02e+23
1/2                    <span style="color: #b22222;">; </span><span style="color: #b22222;">rationals</span>
1+2i                   <span style="color: #b22222;">; </span><span style="color: #b22222;">complex numbers</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Function application is written (f x y z ...)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">where f is a function and x, y, z, ... are operands</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">If you want to create a literal list of data, use ' to stop it from</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">being evaluated</span>
'(+ 1 2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; (+ 1 2)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Now, some arithmetic operations</span>
(+ 1 1)  <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 2</span>
(- 8 1)  <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 7</span>
(* 10 2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 20</span>
(expt 2 3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 8</span>
(quotient 5 2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 2</span>
(remainder 5 2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 1</span>
(/ 35 5) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 7</span>
(/ 1 3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 1/3</span>
(exact-&gt;inexact 1/3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 0.3333333333333333</span>
(+ 1+2i  2-3i) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 3-1i</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Booleans</span>
#t <span style="color: #b22222;">; </span><span style="color: #b22222;">for true</span>
#f <span style="color: #b22222;">; </span><span style="color: #b22222;">for false -- any value other than #f is true</span>
(not #t) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #f</span>
(<span style="color: #a020f0;">and</span> 0 #f (error <span style="color: #8b2252;">"doesn't get here"</span>)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #f</span>
(<span style="color: #a020f0;">or</span> #f 0 (error <span style="color: #8b2252;">"doesn't get here"</span>))  <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 0</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Characters</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">According to RnRs, characters only have two notations:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">#\ and #\x</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Racket support #\u, but it's never Scheme.</span>
#\A <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #\A</span>
#\&#955; <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #\&#955;</span>
#\x03BB <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #\&#955;</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Strings are fixed-length array of characters.</span>
<span style="color: #8b2252;">"Hello, world!"</span>
<span style="color: #8b2252;">"Benjamin \"Bugsy\" Siegel"</span>   <span style="color: #b22222;">; </span><span style="color: #b22222;">backslash is an escaping character</span>
<span style="color: #8b2252;">"Foo\tbar\x21\a\r\n"</span> <span style="color: #b22222;">; </span><span style="color: #b22222;">includes C escapes (only support hex)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">try to print the above string</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Printing is pretty easy</span>
(display <span style="color: #8b2252;">"I'm Guile. Nice to meet you!\n"</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">and unicode escapes</span>
<span style="color: #8b2252;">"\u004B"</span> <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; K</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Strings can be added too!</span>
(string-append <span style="color: #8b2252;">"Hello "</span> <span style="color: #8b2252;">"world!"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello world!"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">A string can be treated like a list of characters</span>
(string-ref <span style="color: #8b2252;">"Apple"</span> 0) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #\A</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">format can be used to format strings:</span>
(format #t <span style="color: #8b2252;">"~a can be ~a"</span> <span style="color: #8b2252;">"strings"</span> <span style="color: #8b2252;">"formatted"</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">==&gt; print "strings can be formatted" on screen</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">str</span> (format #f <span style="color: #8b2252;">"~a can be ~a"</span> <span style="color: #8b2252;">"strings"</span> <span style="color: #8b2252;">"formatted"</span>))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">str was assigned to "strings can be formatted"</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">2. Variables</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can create a variable using define</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">a variable name can use any character except: ()[]{}",'`;#|\</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">some-var</span> 5)
some-var <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 5</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Accessing a previously unassigned variable is an exception</span>
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">x ; =&gt; x: undefined ...</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Local binding: `me' is bound to "Bob" only within the (let ...)</span>
(<span style="color: #a020f0;">let</span> ((me <span style="color: #8b2252;">"Bob"</span>))
  <span style="color: #8b2252;">"Alice"</span>
  me) 
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; "Bob"</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">3. Structs and Collections</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Record Type (Skip this chapter if you're trying web version</span>
(use-modules (srfi srfi-9))
(define-record-type dog 
  (make-dog name breed age)
  dog?
  (name dog-name)
  (breed dog-breed)
  (age dog-age))
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">my-pet</span>
  (make-dog <span style="color: #8b2252;">"lassie"</span> <span style="color: #8b2252;">"collie"</span> 5))
my-pet <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #&lt;dog&gt;</span>
(dog? my-pet) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>
(dog-name my-pet) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "lassie"</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Pairs (immutable)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">`cons' constructs pairs, `car' and `cdr' extract the first</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">and second elements</span>
(cons 1 2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(1 . 2)</span>
(car (cons 1 2)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 1</span>
(cdr (cons 1 2)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 2</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Lists</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Lists are linked-list data structures, made of `cons' pairs and end</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">with a '() to mark the end of the list</span>
(cons 1 (cons 2 (cons 3 '()))) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(1 2 3)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">`list' is a convenience variadic constructor for lists</span>
(list 1 2 3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(1 2 3)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">and a quote can also be used for a literal list value</span>
'(1 2 3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(1 2 3)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Can still use `cons' to add an item to the beginning of a list</span>
(cons 4 '(1 2 3)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(4 1 2 3)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use `append' to add lists together</span>
(append '(1 2) '(3 4)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(1 2 3 4)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Lists are a very basic type, so there is a *lot* of functionality for</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">them, a few examples:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">For Racket users:</span>
(<span style="color: #a020f0;">map</span> add1 '(1 2 3))          <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(2 3 4)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">For Guile users:</span>
(<span style="color: #a020f0;">map</span> 1+ '(1 2 3))            <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(2 3 4)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">add1 or 1+ is not a standard primitive, so it depends on implementations.</span>

(<span style="color: #a020f0;">map</span> + '(1 2 3) '(10 20 30)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(11 22 33)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">filter/count/take/drop are dwell in SRFI-1, so you have to load it first.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">For Racket users:</span>
(require srfi/1)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">For Guile users:</span>
(use-modules (srfi srfi-1))

(filter even? '(1 2 3 4))    <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(2 4)</span>
(count even? '(1 2 3 4))     <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 2</span>
(take '(1 2 3 4) 2)          <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(1 2)</span>
(drop '(1 2 3 4) 2)          <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(3 4)</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Vectors</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Vectors are fixed-length arrays</span>
#(1 2 3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '#(1 2 3)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use `vector-append' to add vectors together</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">NOTE: vector-append is in SRFI-43 which is not supported in Guile-2.0.9</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">or earlier. And it may not be added in Guile-2.0.10.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">But it's proposed in R7RS, and there's a r7rs branch in Guile upstream.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">If your Guile doesn't support vector-append, please skip this step.</span>
(vector-append #(1 2 3) #(4 5 6)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #(1 2 3 4 5 6)</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Hashes</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Create mutable hash table</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">For GNU Guile</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">m</span> (make-hash-table))
(hash-set! m 'a 1)
(hash-set! m 'b 2)
(hash-set! m 'c 3)

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Retrieve a value</span>
(hash-ref m 'a) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 1</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Retrieving a non-present value is an exception</span>
(hash-ref m 'd) 
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; #f </span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can provide a default value for missing keys</span>
(hash-ref m 'd 0)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; 0</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use `hash-remove' to remove keys (functional too)</span>
(hash-remove! m 'a) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; ((b . 2) (c . 3))</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">3. Functions</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use `lambda' to create functions.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">A function always returns the value of its last expression</span>
(<span style="color: #a020f0;">lambda</span> () <span style="color: #8b2252;">"Hello World"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #&lt;procedure&gt;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use parens to call all functions, including a lambda expression</span>
((<span style="color: #a020f0;">lambda</span> () <span style="color: #8b2252;">"Hello World"</span>)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello World"</span>
((<span style="color: #a020f0;">lambda</span> (x) (+ x x)) 5)      <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 10</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Assign a function to a var</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">hello-world</span> (<span style="color: #a020f0;">lambda</span> () <span style="color: #8b2252;">"Hello World"</span>))
(hello-world) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello World"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can shorten this using the function definition syntatcic sugar:</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">hello-world2</span>) <span style="color: #8b2252;">"Hello World"</span>)
(hello-world2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello World"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">The () in the above is the list of arguments for the function</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">hello</span>
  (<span style="color: #a020f0;">lambda</span> (name)
    (string-append <span style="color: #8b2252;">"Hello "</span> name)))
(hello <span style="color: #8b2252;">"Steve"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello Steve"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">... or equivalently, using a sugared definition:</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">hello2</span> name)
  (string-append <span style="color: #8b2252;">"Hello "</span> name))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can have multi-variadic functions too, using `case-lambda'</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">hello3</span>
  (case-lambda
    (() <span style="color: #8b2252;">"Hello World"</span>)
    ((name) (string-append <span style="color: #8b2252;">"Hello "</span> name))))
(hello3 <span style="color: #8b2252;">"Jake"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello Jake"</span>
(hello3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello World"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">... or specify optional arguments with a default value expression</span>
(<span style="color: #a020f0;">define*</span> (<span style="color: #0000ff;">hello4</span> <span style="color: #483d8b;">#:key</span> (name <span style="color: #8b2252;">"World"</span>))
  (string-append <span style="color: #8b2252;">"Hello "</span> name))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Functions can pack extra arguments up in a list</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">count-args</span> . args)
  (format #t <span style="color: #8b2252;">"You passed ~a args: ~a"</span> (length args) args))
(count-args 1 2 3) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "You passed 3 args: (1 2 3)"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">... or with the unsugared `lambda' form:</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">count-args2</span>
  (<span style="color: #a020f0;">lambda</span> args
    (format #t <span style="color: #8b2252;">"You passed ~a args: ~a"</span> (length args) args)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can mix regular and packed arguments</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">hello-count</span> name . args)
  (format #t <span style="color: #8b2252;">"Hello ~a, you passed ~a extra args"</span> name (length args)))
(hello-count <span style="color: #8b2252;">"Finn"</span> 1 2 3)
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello Finn, you passed 3 extra args"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">... unsugared:</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">hello-count2</span>
  (<span style="color: #a020f0;">lambda</span> (name . args)
    (format #t <span style="color: #8b2252;">"Hello ~a, you passed ~a extra args"</span> name (length args))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">And with keywords</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">the keywords are those like this #:its-name, sometimes you may see</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">:its-name without '#' in certain Scheme implementation.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">NOTE: keywords is not in any Scheme standards like RnRs.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">But mainstream Scheme implementation often contains it. </span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">This truth also means that different implementation may has</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">different result.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">The code below will follow Guile situation.</span>
(<span style="color: #a020f0;">define*</span> (<span style="color: #0000ff;">hello</span> <span style="color: #483d8b;">#:key</span> (name <span style="color: #8b2252;">"World"</span>) (greeting <span style="color: #8b2252;">"Hello"</span>) . args)
  (format #t <span style="color: #8b2252;">"~a ~a, ~a extra args~%"</span> greeting name (length args)))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">'define*' is similar with 'define', but you may use it for defining</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">optional args or using keyword to specify the value to specified argument.</span>
(hello)                 <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello World, 0 extra args"</span>
(hello 1 2 3)           <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hello World, 3 extra args"</span>
(hello <span style="color: #483d8b;">#:greeting</span> <span style="color: #8b2252;">"Hi"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hi World, 2 extra args"</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">NOTE: In Guile, all the keyword-value pairs are countered as the rest args.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">It means 'args' here will be (#:greeting "Hi"), so its length is 2.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">If you are in Racket, it's different, so the result will be 0.</span>
<span style="color: #b22222;">;;       </span><span style="color: #b22222;">Because it's not defined in RnRs, so it's implementation specific.</span>
(hello <span style="color: #483d8b;">#:name</span> <span style="color: #8b2252;">"Finn"</span> <span style="color: #483d8b;">#:greeting</span> <span style="color: #8b2252;">"Hey"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hey Finn, 4 extra args"</span>
(hello 1 2 3 <span style="color: #483d8b;">#:greeting</span> <span style="color: #8b2252;">"Hi"</span> <span style="color: #483d8b;">#:name</span> <span style="color: #8b2252;">"Finn"</span> 4 5 6) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "Hi Finn, 10 extra args"</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">4. Equality</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">for numbers use `='</span>
(= 3 3.0) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>
(= 2 1) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #f</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">for characters use `char=?'</span>
(char=? #\c #\c) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">for object identity use `eq?'</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">WARNING: don't use `eq?' on numbers and characters, the reason is very simple:</span>
<span style="color: #b22222;">;;          </span><span style="color: #b22222;">because RnRs treat this rule as undefined! </span>
<span style="color: #b22222;">;;</span><span style="color: #b22222;">(eq? 3 3) ; =&gt; Wrong! it's undefined! So it depends on implementation!</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">No matter if you got #t from above, it's a wrong usage!!!</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Should use (= 3 3) or (eqv? 3 3)</span>

(eq? (list 3) (list 3)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #f</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Why it's #f? Because comparison between objects depends on their head-pointers.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">These two lists are different objects, and they have different head-pointers.</span>

(eq? 'a 'a) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Symbols are the typical objects to compare with their head-pointers</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">eqv?</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">The difference between `eqv?' and `eq':</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can compare numbers and characters with `eqv?'</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">When you use `eqv?' for any objects other than numbers&amp;characters, it's the</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">same with `eq?'.</span>
(eqv? 3 3)     <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>
(eqv? #\c #\c) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>
(eqv? 'a 'a)   <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">for collections use `equal?'</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">`equal?' will compare all the values in a collections type like record or list.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">You can compare any objects with `equal?' safely, but inefficiency.</span>
(equal? (list 'a 'b) (list 'a 'b)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #t</span>
(equal? (list 'a 'b) (list 'b 'a)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #f</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Choosing proper equal pred for you code, is one of the art in Scheme programming!</span>

(eqv? <span style="color: #8b2252;">"abcd"</span> <span style="color: #8b2252;">"abcd"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; unspecified</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Obviously, strings are collections type, so...it's your EXECISE now!</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Another EXECISE, what's the proper 'equal-pred' for functions?</span>
(what-to-use? (<span style="color: #a020f0;">lambda</span> (x) (1+ x)) (<span style="color: #a020f0;">lambda</span> (x) (1+ x)))

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">5. Control Flow</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Conditionals</span>

(<span style="color: #a020f0;">if</span> #t               <span style="color: #b22222;">; </span><span style="color: #b22222;">test expression</span>
    <span style="color: #8b2252;">"this is true"</span>   <span style="color: #b22222;">; </span><span style="color: #b22222;">then expression</span>
    <span style="color: #8b2252;">"this is false"</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">else expression</span>
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; "this is true"</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">In conditionals, all non-#f values are treated as true</span>
(member 'Groucho '(Harpo Groucho Zeppo)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; '(Groucho Zeppo)</span>
(<span style="color: #a020f0;">if</span> (member 'Groucho '(Harpo Groucho Zeppo))
    'yep
    'nope)
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 'yep</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">`cond' chains a series of tests to select a result</span>
(<span style="color: #a020f0;">cond</span> ((&gt; 2 2) (error <span style="color: #8b2252;">"wrong!"</span>))
      ((&lt; 2 2) (error <span style="color: #8b2252;">"wrong again!"</span>))
      (<span style="color: #a020f0;">else</span> 'ok)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 'ok</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Pattern Matching</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">For Racket users:</span>
(require racket/match) <span style="color: #b22222;">; </span><span style="color: #b22222;">use match module</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">fizzbuzz?</span> n)
  (match (list (remainder n 3) (remainder n 5))
    ((list 0 0) 'fizzbuzz)
    ((list 0 _) 'fizz)
    ((list _ 0) 'buzz)
    (<span style="color: #a020f0;">else</span> #f)))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">For Guile users:</span>
(use-modules (ice-9 match)) <span style="color: #b22222;">; </span><span style="color: #b22222;">use match module</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">fizzbuzz?</span> n)
  (match (list (remainder n 3) (remainder n 5))
    ((0 0) 'fizzbuzz)
    ((0 _) 'fizz)
    ((_ 0) 'buzz)
    (<span style="color: #a020f0;">else</span> #f)))

(fizzbuzz? 15) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 'fizzbuzz</span>
(fizzbuzz? 37) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #f</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Loops</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Looping can be done through (tail-) recursion</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">lp</span> i)
  (when (&lt; i 10)
    (format #t <span style="color: #8b2252;">"i=~a\n"</span> i)
    (lp (1+ i))))
(lp 5) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; i=5, i=6, ...</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Similarly, with a named let</span>
(<span style="color: #a020f0;">let</span> <span style="color: #0000ff;">lp</span> ((i 0))
  (when (&lt; i 10)
    (format #t <span style="color: #8b2252;">"i=~a\n"</span> i)
    (lp (1+ i)))) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; i=0, i=1, ...</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">how to get a range? just like range(0, 9)?</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">the original 'iota' only accept one para</span>
(iota 10) <span style="color: #b22222;">; </span><span style="color: #b22222;">==&gt; (0 1 2 3 4 5 6 7 8 9)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">the 'iota' in srfi-1 was extended </span>
(use-modules (srfi srfi-1))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">#&lt;procedure iota (count #:optional start step)&gt;</span>
(iota 5 10) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; (10 11 12 13 14) </span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">means from 10 count 5 times, each step +1 (plus one is default)</span>
(iota 5 10 2) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; (10 12 14 16 18)</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">from 10 count 5 times, each step +2</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">If you need a Python like range(5, 10) ==&gt; (5 6 7 8 9), try:</span>
(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">range</span> from to) (<span style="color: #a020f0;">map</span> (<span style="color: #a020f0;">lambda</span> (x) (+ from x)) (iota (- to from))))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">EXECISE: you may find this 'range' implementation is not so good,</span>
<span style="color: #b22222;">;;          </span><span style="color: #b22222;">please optimize it if you can.</span>
(range 5 10) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; (5 6 7 8 9)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">how to do iteration?</span>
(<span style="color: #a020f0;">for-each</span> display '(1 2 3 4 5))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; 12345</span>
(<span style="color: #a020f0;">for-each</span> (<span style="color: #a020f0;">lambda</span> (i) (format #t <span style="color: #8b2252;">"i=~a\n"</span> i))
          (iota 10)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; i=0, i=1, ...</span>
(<span style="color: #a020f0;">for-each</span> (<span style="color: #a020f0;">lambda</span> (i) (format #t <span style="color: #8b2252;">"i=~a\n"</span> i))
          (range 5 10)) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; i=5, i=6, ...</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Iteration Over Other Sequences</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">`for' allows iteration over many other kinds of sequences:</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">lists, vectors, strings, sets, hash tables, etc...</span>
(<span style="color: #a020f0;">for-each</span> display '(l i s t))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; list</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">vector-for-each</span> (@ (rnrs) vector-for-each))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">export vector-for-each from rnrs only</span>
(vector-for-each display #(v e c t o r))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; vector</span>
(string-for-each display <span style="color: #8b2252;">"string"</span>)
<span style="color: #b22222;">;; </span><span style="color: #b22222;">=&gt; string</span>
<span style="color: #b22222;">;;; </span><span style="color: #b22222;">More Iterations</span>
(<span style="color: #a020f0;">do</span> ((i 10 (1+ i)) (j '(x y z) (cdr j))) 
    ((null? j)) <span style="color: #b22222;">; </span><span style="color: #b22222;">if j is '(), just end the loop</span>
  (format #t <span style="color: #8b2252;">"~a:~a "</span> i (car j)))
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 0:x 1:y 2:z</span>

<span style="color: #b22222;">;;; </span><span style="color: #b22222;">Exceptions</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">To catch exceptions, use the 'catch' form</span>
(catch 'my-error 
  (<span style="color: #a020f0;">lambda</span> () (throw 'my-error))
  (<span style="color: #a020f0;">lambda</span> e (display <span style="color: #8b2252;">"oh~my error!\n"</span>)))
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; oh~my error!</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">6. Mutation</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use `set!' to assign a new value to an existing variable</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">n</span> 5)
(set! n (1+ n))
n <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 6</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use fluid for explicitly mutable values</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">n*</span> (make-fluid 5))
(fluid-set! n* (1+ (fluid-ref n*)))
(fluid-ref n*) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 6</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Many Guile datatypes are immutable (pairs, lists, etc), some come in</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">both mutable and immutable flavors (strings, vectors, hash tables,</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">etc...)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use `vector' or `make-vector' to create mutable vectors</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">vec</span> (vector 2 2 3 4))
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">wall</span> (make-vector 100 'bottle-of-beer))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">Use vector-set! to update a slot</span>
(vector-set! vec 0 1)
(vector-set! wall 99 'down)
vec <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; #(1 2 3 4)</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Create an empty mutable hash table and manipulate it</span>
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">m3</span> (make-hash-table))
(hash-set! m3 'a 1)
(hash-set! m3 'b 2)
(hash-set! m3 'c 3)
(hash-ref m3 'a)   <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 1</span>
(hash-ref m3 'd 0) <span style="color: #b22222;">; </span><span style="color: #b22222;">=&gt; 0</span>
(hash-remove! m3 'a)

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">7. Modules</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Modules let you organize code into multiple files and reusable</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">libraries; Make sure put all the module code in one file, since </span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">the modules split as files. And the module name should be same </span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">with the filename, say, module named (my-cake) is 'my-cake.scm',</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">and module named (mods my-cake) is 'mods/my-cake.scm',</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">(mods submods my-cake) ==&gt; 'mods/submods/my-cake.scm'.</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">---begin my-cake.scm---</span>
(<span style="color: #a020f0;">define-module</span> (<span style="color: #228b22;">my-cake</span>) <span style="color: #b22222;">; </span><span style="color: #b22222;">define a `cake' module based on racket/base</span>
  <span style="color: #483d8b;">#:use-module</span> (ice-9 format) <span style="color: #b22222;">; </span><span style="color: #b22222;">the pre-requisition of current module</span>
  <span style="color: #483d8b;">#:export</span> (print-cake)) <span style="color: #b22222;">; </span><span style="color: #b22222;">function exported by the module</span>

(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">show</span> fmt n ch) <span style="color: #b22222;">; </span><span style="color: #b22222;">internal function</span>
  (format #t fmt (make-string n ch))
  (newline))

(<span style="color: #a020f0;">define</span> (<span style="color: #0000ff;">print-cake</span> n)
  (show <span style="color: #8b2252;">"   ~a   "</span> n #\.)
  (show <span style="color: #8b2252;">" .-~a-. "</span> n #\|)
  (show <span style="color: #8b2252;">" | ~a | "</span> n #\space)
  (show <span style="color: #8b2252;">"---~a---"</span> n #\-))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">--end my-cake.scm---</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Be sure that the path of 'my-cake.scm' is in your current </span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">%load-path list. Use `use-modules' to get all `provide'd names </span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">from a module.</span>
(use-modules (my-cake)) <span style="color: #b22222;">; </span><span style="color: #b22222;">the ' is for a local submodule</span>
(print-cake 3)
                                        <span style="color: #b22222;">; </span><span style="color: #b22222;">(show "~a" 1 #\A) ; =&gt; error, `show' was not exported</span>

<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">8. Classes and Objects</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">TODO</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">9. Macros</span>
<span style="color: #b22222;">;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Macros let you extend the syntax of the language</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Let's add a while loop</span>
(define-syntax-rule (while condition body ...)
  (<span style="color: #a020f0;">let</span> <span style="color: #0000ff;">loop</span> ()
    (when condition
      body ...
      (loop))))

(<span style="color: #a020f0;">let</span> ((i 0))
  (while (&lt; i  10)
    (display i)
    (set! i (1+ i))))

<span style="color: #b22222;">;; </span><span style="color: #b22222;">Macros are hygienic, you cannot clobber existing variables!</span>
(define-syntax-rule (swap! x y) <span style="color: #b22222;">; </span><span style="color: #b22222;">-! is idomatic for mutation</span>
  (<span style="color: #a020f0;">let</span> ((tmp x))
    (set! x y)
    (set! y tmp)))

(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">tmp</span> 1)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">a</span> 2)
(<span style="color: #a020f0;">define</span> <span style="color: #0000ff;">b</span> 3)
(swap! a b)
(format #t <span style="color: #8b2252;">"tmp = ~a; a = ~a; b = ~a\n"</span> tmp a b) <span style="color: #b22222;">; </span><span style="color: #b22222;">tmp is unaffected</span>

<span style="color: #b22222;">;; </span><span style="color: #b22222;">But they are still code transformations, for example:</span>
(define-syntax-rule (bad-while condition body ...)
  (when condition
    body ...
    (bad-while condition body ...)))
<span style="color: #b22222;">;; </span><span style="color: #b22222;">this macro is broken: it generates infinite code, if you try to use</span>
<span style="color: #b22222;">;; </span><span style="color: #b22222;">it, the compiler will get in an infinite loop</span>

(quit) <span style="color: #b22222;">;; </span><span style="color: #b22222;">exit repl</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org660375c" class="outline-2">
<h2 id="org660375c"><span class="section-number-2">7</span> 용어</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-org9058207" class="outline-3">
<h3 id="org9058207"><span class="section-number-3">7.1</span> 테스트케이스 <a id="orga906361"></a></h3>
<div class="outline-text-3" id="text-7-1">
<p>
CodeScroll 이 생성하는 함수별 테스트를 의미한다. 
</p>
</div>
</div>
<div id="outline-container-org4c89d47" class="outline-3">
<h3 id="org4c89d47"><span class="section-number-3">7.2</span> scheme 파일 <a id="orge3cc677"></a></h3>
<div class="outline-text-3" id="text-7-2">
<p>
테스트 데이터를 생성하는 scheme 테스트 스크립트를 의미한다. 
</p>
</div>
</div>
<div id="outline-container-org96dcafe" class="outline-3">
<h3 id="org96dcafe"><span class="section-number-3">7.3</span> testsc 홈 <a id="org19399f3"></a></h3>
</div>
<div id="outline-container-orgc1f8abb" class="outline-3">
<h3 id="orgc1f8abb"><span class="section-number-3">7.4</span> 테스트 변수 <a id="org3576f09"></a></h3>
</div>

<div id="outline-container-orgb034d8c" class="outline-3">
<h3 id="orgb034d8c"><span class="section-number-3">7.5</span> 테스트 데이터 <a id="org4ce0003"></a></h3>
<div class="outline-text-3" id="text-7-5">
<p>
<a href="#org3576f09">테스트 변수</a>의 값을 의미한다. 
</p>
</div>
</div>
<div id="outline-container-orgfeb8470" class="outline-3">
<h3 id="orgfeb8470"><span class="section-number-3">7.6</span> 테스트 번호 <a id="org721e067"></a></h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Created: 2017-06-10 토 18:46</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
